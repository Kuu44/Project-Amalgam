(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1182:function(t,e,s){"use strict";s.r(e);var n=s(96),a=(s(69),s(97),s(95)),o=s.n(a),i=s(285);function r(){var t=Object(n.a)(["\n                     mutation setDomainSlogan($hash: String!, $slogan : String!) {\n                        setDomainSlogan(hash: $hash, slogan : $slogan) {\n                           success\n                        }\n                     }\n                     "]);return r=function(){return t},t}function c(){var t=Object(n.a)(["\n                     mutation setDomainName($hash: String!, $name : String!) {\n                        setDomainName(hash: $hash, name : $name) {\n                           success\n                        }\n                     }\n                     "]);return c=function(){return t},t}function l(){var t=Object(n.a)(["\n            query domain($hash: String!) {\n               domain(hash : $hash) {   \n                     name        \n                     hash \n                     slogan\n                     theme\n                     coverphoto{\n                        hash\n                     }\n                     expired\n                     collection{\n                        hash\n                        name\n                     }   \n               }\n            }\n         "]);return l=function(){return t},t}var m={components:{author:function(){return Promise.all([s.e(3),s.e(7)]).then(s.bind(null,1203))},shop:function(){return Promise.all([s.e(3),s.e(7)]).then(s.bind(null,1194))},profile:function(){return Promise.all([s.e(3),s.e(7)]).then(s.bind(null,1208))},business:function(){return Promise.all([s.e(3),s.e(7)]).then(s.bind(null,1205))},"app-logo":i.a},apollo:{domain:{query:o()(l()),variables:function(t){return{hash:this.hash}},update:function(t){return t&&t.domain&&(t.domain.collection&&t.domain.expired&&this.$router.replace({name:"redirect",params:{from:"domain",collectionHash:t.domain.collection.hash}}),t.domain.theme&&(this.theme=t.domain.theme.replace(/\s+/g,""))),t.domain}}},data:function(){return{server:"https://api.naya.com.np/",local:"https://naya.com.np/",domain:{},theme:null,selectedType:"",settingType:null,domainName:"",domainSlogan:"",collectionName:"",isSettingsModalActive:!1,self:null,postRobotLoaded:!1}},props:{hash:{type:String,required:!0}},head:function(){return{title:this.domain&&this.domain.name?this.domain.name:this.domain&&this.domain.collection&&this.domain.collection.name?this.domain.collection.name:"Naya",meta:[{hid:"description",name:"description",content:this.domain&&this.domain.slogan?this.domain.slogan:"A domain created on the Naya Network."},{hid:"og:title",property:"og:title",content:this.domain&&this.domain.name?this.domain.name:this.domain&&this.domain.collection&&this.domain.collection.name?this.domain.collection.name:"Naya"},{hid:"og:description",property:"og:description",content:this.domain&&this.domain.slogan?this.domain.slogan:"A domain created on the Naya Network."},{hid:"og:image",property:"og:image",content:this.domain&&this.domain.coverphoto&&this.domain.coverphoto.hash?this.server+"attachments.img/lg/"+this.domain.coverphoto.hash:this.server+"public/images/lg/empty_cl.png"}]}},methods:{openSettings:function(t){this.settingType=t,this.isSettingsModalActive=!0},changeDomainName:function(){var t=this;this.$apollo.mutate({mutation:o()(c()),variables:{hash:this.domain.hash,name:this.domainName}}).then((function(e){e.data.setDomainName.success&&(t.$apollo.queries.domain.refetch(),t.isSettingsModalActive=!1,t.domainName="")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},changeDomainSlogan:function(){var t=this;this.$apollo.mutate({mutation:o()(r()),variables:{hash:this.domain.hash,slogan:this.domainSlogan}}).then((function(e){e.data.setDomainSlogan.success&&(t.$apollo.queries.domain.refetch(),t.isSettingsModalActive=!1,t.domainSlogan="")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},mounted:function(){(self=this,"undefined"!=typeof postRobot)&&(postRobot.on("getUserInformation",{window:deferredIframe.contentWindow},(function(t){var e=self.$store.state.token,s=t.data.token;return e||(e=null),s||(s=null),e!=s&&(s?(self.$cookies.set("apollo-token",s,{path:"/",maxAge:2592e3}),self.$cookies.set("user",t.data.user,{path:"/",maxAge:2592e3}),self.$store.commit("setToken",s),self.$store.commit("setUser",t.data.user)):(self.$apolloHelpers.onLogout(),self.$cookies.removeAll(),self.$store.commit("removeToken"),self.$store.commit("removeUser")),self.postRobotLoaded=!0),{success:1}})),document.getElementById("deferredIframe").src=this.local+"authenticator")}},h=s(22),u=Object(h.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.domain&&t.domain.hash&&!t.domain.expired&&t.domain.collection&&t.theme?s("div",{staticClass:"row"},[s(t.theme,{tag:"Component",attrs:{domainHash:t.domain.hash,postRobotLoaded:t.postRobotLoaded}})],1):!t.domain||!t.domain.hash||!t.domain.expired&&t.domain.collection&&t.theme?s("div",[s("div",{staticClass:"margin-top-0-px-imp",attrs:{id:"naya-content"}},[s("div",{staticClass:"columns is-gapless margin-bottom-0-px-imp"},[s("div",{staticClass:"column"}),t._v(" "),s("div",{staticClass:"column is-four-fifths is-full-mobile"},[s("section",{staticClass:"hero is-medium"},[s("div",{staticClass:"hero-body padding-RL-0-px"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-2"}),t._v(" "),s("div",{staticClass:"column is-one-third"},[s("div",{staticClass:"columns is-mobile"},[s("div",{staticClass:"column is-hidden-tablet"}),t._v(" "),s("div",{staticClass:"column is-5-mobile"},[s("content-placeholders",{attrs:{rounded:!0}},[s("content-placeholders-img"),t._v(" "),s("content-placeholders-heading")],1)],1),t._v(" "),s("div",{staticClass:"column is-hidden-tablet"})])]),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"columns is-mobile"},[s("div",{staticClass:"column is-1 is-hidden-tablet"}),t._v(" "),s("div",{staticClass:"column"},[s("content-placeholders",{attrs:{rounded:!0}},[s("content-placeholders-text",{attrs:{lines:3}})],1)],1),t._v(" "),s("div",{staticClass:"column is-1 is-hidden-tablet"})])]),t._v(" "),s("div",{staticClass:"column is-2"})])])])]),t._v(" "),s("div",{staticClass:"column"})])])]):s("div",[s("section",{staticClass:"hero is-fullheight-with-navbar"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container has-text-centered"},[s("h1",{staticClass:"title is-size-4 is-size-5-mobile"},[s("b-icon",{attrs:{icon:"progress-wrench",size:"is-large"}}),s("br"),t._v("\n                  Under construction\n               ")],1),t._v(" "),s("h2",{staticClass:"subtitle has-text-grey  is-size-5 is-size-6-mobile"},[t._v("\n                  Page not configured yet, check back later!\n               ")])])])])]),t._v(" "),s("script",{attrs:{src:"https://unpkg.com/post-robot@10.0.18/dist/post-robot.js"}}),t._v(" "),s("iframe",{staticClass:"is-hidden",attrs:{id:"deferredIframe",src:"about:blank"}})])}),[],!1,null,"4db13384",null).exports,p=s(283),d=s(293),g=s(286),v=s.n(g),f=s(282),b=s.n(f);function y(){var t=Object(n.a)(["\n            mutation addCollection($name: String!, $type: CollectionType!) {\n              addCollection(name: $name, type: $type) {\n                name\n                hash\n                type\n              }\n            }\n          "]);return y=function(){return t},t}function C(){var t=Object(n.a)(["\n        query user($username: Username!, $page: Int, $total : Int) {\n          user(username: $username) {\n            nfollowing\n            following(page: $page, total : $total) {\n              hasmore\n              list {\n                username\n                name\n                image {\n                    hash\n                }\n              }\n            }\n          }\n        }\n      "]);return C=function(){return t},t}function _(){var t=Object(n.a)(["\n      query collection($hash: String!) {\n         collection(hash: $hash) {\n            name\n            posts {\n               hasmore\n               list {\n               attachments { \n                  hash\n               }\n               hash\n               permissions\n               privacy\n               author {\n                  name\n                  username\n                  hash\n                  image {\n                     hash\n                  }\n               }\n            }\n         }\n         }\n      }\n   "]);return _=function(){return t},t}function $(){var t=Object(n.a)(["\n         query collection($hash: String!, $page: Int, $offset : Int, $sortby : SortBy, $total : Int) {\n            collection(hash: $hash) {\n               name\n               posts(page: $page , offset :  $offset , sortby : $sortby, total : $total) {\n                  hasmore\n                  list {\n                  title\n                  attachments { \n                        hash\n                     }\n                  domain {\n                     hash\n                     url\n                  }\n                  status\n                  fullstatus\n                  timestamp\n                  hash\n                  truncated\n                  nlikes\n                  ncollected\n                  liked\n                  ncomments\n                  permissions\n                  theme\n                  themedata\n                     collection {\n                        name\n                        hash\n                     }\n                  privacy\n                  author {\n                     name\n                     username\n                     hash\n                     image{\n                        hash\n                     }\n                  }\n                  }\n               }\n            }\n         }\n      "]);return $=function(){return t},t}function x(){var t=Object(n.a)(["\n            query posts($page: Int, $offset : Int, $sortby : SortBy, $total : Int, $theme: Theme) {\n               posts(page: $page , offset :  $offset , sortby : $sortby, total : $total, theme: $theme) {\n                  hasmore\n                  list {\n                  title\n                  attachments { \n                        hash\n                     }\n                  domain {\n                     hash\n                     url\n                  }\n                  status\n                  fullstatus\n                  timestamp\n                  hash\n                  truncated\n                  nlikes\n                  ncollected\n                  liked\n                  ncomments\n                  permissions\n                  theme\n                  themedata\n                     collection {\n                        name\n                        hash\n                     }\n                  privacy\n                  author {\n                     name\n                     username\n                     hash\n                     image{\n                        hash\n                     }\n                  }\n                  }\n               }\n            }\n         "]);return x=function(){return t},t}function k(){var t=Object(n.a)(["\n            query posts($page: Int, $offset : Int, $sortby : SortBy, $total : Int, $theme: Theme) {\n               posts(page: $page , offset :  $offset , sortby : $sortby, total : $total, theme: $theme) {\n                  hasmore\n                  list {\n                  title\n                  attachments { \n                        hash\n                     }\n                  domain {\n                     hash\n                     url\n                  }\n                  status\n                  fullstatus\n                  timestamp\n                  hash\n                  truncated\n                  nlikes\n                  ncollected\n                  liked\n                  ncomments\n                  permissions\n                  theme\n                  themedata\n                     collection {\n                        name\n                        hash\n                     }\n                  privacy\n                  author {\n                     name\n                     username\n                     hash\n                     image{\n                        hash\n                     }\n                  }\n                  }\n               }\n            }\n         "]);return k=function(){return t},t}function O(){var t=Object(n.a)(["\n        query collections($page: Int, $sortby: SortBy, $total : Int ) {\n          collections(page: $page, sortby : $sortby, total : $total) {\n            hasmore\n            list {\n              name\n              description\n              hash\n              stars\n              nitems\n              type\n              logo{\n                  hash\n              }\n            }\n          }\n        }\n      "]);return O=function(){return t},t}var w={apollo:{collections:{query:o()(O()),prefetch:function(t){t.route;return{page:1,total:7,sortby:"trending"}},variables:function(t){return{page:1,total:7,sortby:"trending"}},update:function(t){return t.collections}},articlePosts:{query:o()(k()),variables:function(){return{offset:0,page:1,total:8,sortby:"trending",theme:"article"}},update:function(t){return t.posts}},statusPosts:{query:o()(x()),prefetch:function(t){t.route;return{offset:0,page:1,total:4,sortby:"trending",theme:"status"}},variables:function(){return{offset:0,page:1,total:4,sortby:"trending",theme:"status"}},update:function(t){return t.posts}},shopPosts:{query:o()($()),variables:function(){return{hash:this.symlinks.shop.reference,offset:0,page:1,total:5,sortby:"trending"}},skip:function(){return!this.symlinks||!this.symlinks.shop},update:function(t){return t.collection.posts}},homePageImageCollection:{query:o()(_()),variables:function(){return{hash:this.symlinks.homePageImage.reference}},skip:function(){return!this.symlinks||!this.symlinks.homePageImage},update:function(t){return t.collection},error:function(t){t.message=="GraphQL error: could not find collection/"+this.$route.params.hash&&this.$router.replace({name:"error404"})}},user:{query:o()(C()),prefetch:!1,skip:function(){return null==this.$store.state.user},variables:function(){return{username:this.$store.state.user?this.$store.state.user.username:null,page:1,total:3}},update:function(t){return t.user}}},props:{symlinks:{type:Object}},data:function(){return{server:"https://api.naya.com.np/",local:"https://naya.com.np/",collections:[],user:{},collectionTypes:["page","business","organization","landmark","location","favorites","album","data","application"],selectedType:"",collectionName:"",isCollectionModalActive:!1,pageNumber:1,loadingMoreCollections:!1,truncate:b.a,disable:!1}},head:function(){return{title:"Naya",meta:[{hid:"description",name:"description",content:"Welcome to naya.com.np, a vibrant online community. Instantly connect with amazing content creators based in Nepal."},{hid:"og:title",property:"og:title",content:"Naya"},{hid:"og:description",property:"og:description",content:"Welcome to naya.com.np, a vibrant online community. Instantly connect with amazing content creators based in Nepal."},{hid:"og:image",property:"og:image",content:this.homePageImageCollection&&this.homePageImageCollection.posts.list&&this.homePageImageCollection.posts.list[0].attachments&&this.homePageImageCollection.posts.list[0].attachments.length>0?this.server+"attachments.img/lg/"+this.homePageImageCollection.posts.list[0].attachments[0].hash:this.server+"public/images/lg/empty_cl.png"}]}},methods:{gotoAddProduct:function(){this.$router.push({name:"compose",query:{hash:this.symlinks.shop.reference,theme:"shop"}})},gotoAddArticle:function(){this.$router.push({name:"compose",query:{theme:"article"}})},gotoAddStatus:function(){this.$router.push({name:"compose",query:{theme:"status"}})},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})},createCollection:function(){var t=this,e=this.selectedType,s=this.collectionName;this.disable=!0,s.length>0?this.$apollo.mutate({mutation:o()(y()),variables:{name:s,type:e}}).then((function(e){t.name="",t.selectedType="",t.disable=!1,t.$router.push({name:"singleCollection",params:{hash:e.data.addCollection.hash}})})).catch((function(e){t.disable=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"Collection Type is required",type:"is-danger",position:"is-bottom"}):"GraphQL error: you are banned from using this feature until Invalid Date"==e.message?t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})})):this.$toast.open({message:"Collection Name is required",type:"is-danger",position:"is-bottom"})}},mounted:function(){this.$apollo.queries.homePageImageCollection.refetch()},components:{"app-header":p.a,"app-indexpost":d.a,StarRating:v.a,"app-logo":i.a}},j=(s(347),Object(h.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("no-ssr",[n("app-header")],1),t._v(" "),n("div",{staticClass:"margin-top-0-px-imp",attrs:{id:"naya-content"}},[t._m(0),t._v(" "),n("section",{staticClass:"hero is-small"},[n("div",{staticClass:"hero-body padding-RL-0-px"},[t.$store.state.user?n("div",{staticClass:"margin-top-0-px margin-bottom-50-px is-size-5 is-size-6-mobile has-background-light-yellow padding-20-px border-radius-5-px"},[n("h2",[t._v("\n                     You are currently following "),n("b",[t._v(t._s(t.user.nfollowing))]),t._v(" user"+t._s(1==t.user.nfollowing?"":"s")+".\n                     "),n("br"),t._v(" "),t.user.nfollowing?n("nuxt-link",{staticClass:"has-text-link is-size-6",attrs:{to:{name:"newsFeed"}}},[t._v("\n                        See what they're posting\n                     ")]):t._e()],1),t._v(" "),t.user.following&&t.user.following.list&&t.user.following.list.length?n("div",{staticClass:"margin-top-10-px clear-both"},[t._l(t.user.following.list,(function(e,s){return n("span",{key:s,staticClass:"margin-right-10-px image-stacked"},[n("nuxt-link",{attrs:{to:{name:"user",params:{username:e.username}}}},[n("img",{staticClass:"is-rounded",style:{"background-image":"url('"+(e.image&&null!=e.image?t.server+"attachments.img/sm/"+e.image.hash:t.server+"public/images/sm/empty_pp.png")+"')","background-size":"cover","background-position":"center center"},attrs:{width:"30",src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}})])],1)})),t._v(" "),1==t.user.following.hasmore?n("nuxt-link",{staticClass:"position-absolute",attrs:{to:{name:"userFollowing",query:{username:t.$store.state.user.username}}}},[n("b",{staticClass:"tag tag-more-users"},[t._v("+ "+t._s(t.user.nfollowing-3))])]):t._e()],2):n("div",[n("span",[t._v("make your feed interesting by following people")]),t._v(" "),n("br"),t._v(" "),n("nuxt-link",{staticClass:"has-text-link",attrs:{to:{name:"search"}}},[t._v("\n                        find friends\n                     ")])],1)]):t._e(),t._v(" "),n("div",{staticClass:"margin-bottom-20-px padding-10-px padding-left-0-px",class:t.$store.state.user?"margin-top-100-px":"margin-top-0-px"},[n("nuxt-link",{attrs:{to:{name:"popular",query:{sortby:"trending",theme:"article"}}}},[n("span",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold"},[t._v("Epics")]),t._v(" "),n("br"),n("span",{staticClass:"has-text-grey"},[t._v("Articles by creative"),n("br"),t._v("authors on Naya.")])]),t._v(" "),n("div",{staticClass:"margin-top-10-px pointer",on:{click:function(e){t.$store.state.user?t.gotoAddArticle():t.loginMessage()}}},[t._m(1),t._v(" Compose your article\n                  ")])],1),t._v(" "),t.articlePosts&&t.articlePosts.list?n("div",{staticClass:"columns is-multiline is-mobile is-variable is-5-desktop is-3-tablet is-2-mobile"},t._l(t.articlePosts.list,(function(e,a){return n("div",{key:a,staticClass:"column is-half-mobile is-one-quarter-tablet"},[n("div",{staticClass:"list-card card article overflow-hidden position-relative",class:"article-child-"+a},[e.domain?n("a",{attrs:{href:"http://"+e.domain.url+"/post/"+e.hash}},[0==a?n("img",{staticClass:"background-none position-absolute margin-top-15-px z-index-10 right-10-px",attrs:{src:s(340),width:"24",height:"24"}}):t._e(),t._v(" "),n("figure",{staticClass:"image is-32x32 position-absolute margin-top-15-px margin-left-15-px"},[n("img",{staticClass:"green-dashed-border-icon is-rounded has-background-white",attrs:{src:e.author&&e.author.image?t.server+"attachments.img/sm/"+e.author.image.hash:e.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})]),t._v(" "),n("div",{staticClass:"list-card-text article"},[n("p",{staticClass:"has-text-weight-bold has-text-dark is-size-6",domProps:{innerHTML:t._s(t.truncate(e.title?e.title.replace(/<br>/g," ").replace(/\n/g,""):e.status?e.status.replace(/<br>/g," ").replace(/\n/g,""):"",65).text)}})]),t._v(" "),n("div",{staticClass:"card-image"},[n("figure",{staticClass:"image is-4by5 border-radius-5-px"})])]):n("nuxt-link",{attrs:{to:{name:"post",params:{hash:e.hash}}}},[0==a?n("img",{staticClass:"background-none position-absolute margin-top-15-px z-index-1 right-10-px",attrs:{src:s(340),width:"24",height:"24"}}):t._e(),t._v(" "),n("figure",{staticClass:"image is-32x32 position-absolute margin-top-15-px margin-left-15-px"},[n("img",{staticClass:"green-dashed-border-icon is-rounded has-background-white",attrs:{src:e.author&&e.author.image?t.server+"attachments.img/sm/"+e.author.image.hash:e.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})]),t._v(" "),n("div",{staticClass:"list-card-text article"},[n("p",{staticClass:"has-text-weight-bold has-text-dark is-size-6",domProps:{innerHTML:t._s(t.truncate(e.title?e.title.replace(/<br>/g," ").replace(/\n/g,""):e.status?e.status.replace(/<br>/g," ").replace(/\n/g,""):"",65).text)}})]),t._v(" "),n("div",{staticClass:"card-image"},[n("figure",{staticClass:"image is-4by5 border-radius-5-px"})])])],1)])})),0):n("no-ssr",[n("div",{staticClass:"columns is-multiline is-mobile is-variable is-5-tablet is-2"},t._l(8,(function(e){return n("div",{key:e,staticClass:"column is-half-mobile is-one-third-tablet is-one-quarter-desktop"},[n("content-placeholders",{attrs:{rounded:!0}},[n("content-placeholders-img"),t._v(" "),n("content-placeholders-heading")],1)],1)})),0)]),t._v(" "),t.articlePosts&&t.articlePosts.hasmore?n("div",{staticClass:"has-text-centered margin-top-20-px position-relative"},[n("nuxt-link",{attrs:{to:{name:"popular",query:{sortby:"trending",theme:"article"}}}},[n("button",{staticClass:"button on-divider"},[t._v("more")]),t._v(" "),n("div",{staticClass:"is-divider margin-0-px behind-btn"})])],1):t._e(),t._v(" "),n("div",{staticClass:"margin-bottom-20-px margin-top-100-px padding-10-px padding-left-0-px"},[n("nuxt-link",{attrs:{to:{name:"collections",query:{sortby:"trending"}}}},[n("span",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold"},[t._v("Collections")]),t._v(" "),n("br"),n("span",{staticClass:"has-text-grey"},[t._v("Stories collected by users"),n("br"),t._v("into themes.")])])],1),t._v(" "),t.collections&&t.collections.list?n("div",{staticClass:"columns is-multiline is-mobile is-variable is-5-desktop is-3-tablet is-2-mobile"},[n("div",{staticClass:"column is-half-mobile is-one-quarter-tablet"},[n("div",{staticClass:"position-relative has-background-primary border-radius-5-px is-full-height pointer",on:{click:function(e){null!=t.$store.state.user?t.isCollectionModalActive=!0:t.loginMessage()}}},[t._m(2)])]),t._v(" "),t._l(t.collections.list,(function(e,s){return n("div",{key:s,staticClass:"column is-half-mobile is-one-quarter-tablet"},[n("nuxt-link",{attrs:{to:{name:"singleCollection",params:{hash:e.hash}}}},[n("div",{staticClass:"list-card card collection overflow-hidden"},[n("div",{staticClass:"list-card-text"},[n("p",{staticClass:"is-uppercase is-size-7 margin-bottom-5-px",class:e.logo&&null!=e.logo?"has-text-white":"has-text-dark"},[t._v(t._s(e.type))]),t._v(" "),n("p",{staticClass:"has-text-weight-bold is-size-6",class:e.logo&&null!=e.logo?"has-text-white":"has-text-dark",domProps:{innerHTML:t._s(t.truncate(e.name,65).text)}})]),t._v(" "),n("div",{staticClass:"card-image"},[n("figure",{staticClass:"image is-4by5 has-background-black border-radius-5-px",class:e.logo&&null!=e.logo?"":"has-background-lightgrey-gradient"},[e.logo&&null!=e.logo?n("img",{staticClass:"border-radius-3-px opacity-50",style:{"background-image":"url('"+t.server+"attachments.img/md/"+e.logo.hash+"')","background-size":"cover","background-position":"center center"},attrs:{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}}):t._e()])])])])],1)}))],2):n("no-ssr",[n("div",{staticClass:"columns is-multiline is-mobile is-variable is-5-tablet is-2"},t._l(8,(function(e){return n("div",{key:e,staticClass:"column is-half-mobile is-one-third-tablet is-one-quarter-desktop"},[n("content-placeholders",{attrs:{rounded:!0}},[n("content-placeholders-img"),t._v(" "),n("content-placeholders-heading")],1)],1)})),0)]),t._v(" "),t.collections&&t.collections.hasmore?n("div",{staticClass:"has-text-centered margin-top-20-px position-relative"},[n("nuxt-link",{attrs:{to:{name:"collections",query:{sortby:"trending"}}}},[n("button",{staticClass:"button on-divider"},[t._v("more")]),t._v(" "),n("div",{staticClass:"is-divider margin-0-px behind-btn"})])],1):t._e(),t._v(" "),n("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isCollectionModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isCollectionModalActive=e}}},[n("section",{staticClass:"width-auto",attrs:{scroll:"clip"}},[n("p",{staticClass:"has-text-weight-bold"},[t._v("Create new collection")]),t._v(" "),n("p",[t._v("Before creating a new collection please check if it already exists. Repeated or misleading collections may be banned!")]),t._v(" "),n("b-field",{staticClass:"margin-top-20-px",attrs:{label:"Select Type"}},[n("b-select",{attrs:{placeholder:"Select Collection type",required:""},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},t._l(t.$store.state.collectionTypes,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v("\n                                 "+t._s(e)+"\n                              ")])})),0)],1),t._v(" "),n("b-field",{staticClass:"margin-top-20-px",attrs:{label:"Name of the collection"}},[n("b-input",{attrs:{placeholder:"Name",maxlength:"50",required:""},model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}})],1),t._v(" "),n("button",{staticClass:"margin-top-20-px margin-bottom-20-px button is-clear",attrs:{disabled:t.disable},on:{click:t.createCollection}},[t._v("Confirm")])],1)]),t._v(" "),n("div",{staticClass:"columns is-variable is-2-mobile is-mobile domain-info"},[t._m(3),t._v(" "),n("div",{staticClass:"column is-7 is-size-5 is-size-6-mobile"},[t._v("\n                     Did you know that you can convert your collection on Naya into a full-fledged website?\n                     "),n("br"),t._v(" "),n("nuxt-link",{staticClass:"has-text-link is-size-6-half",attrs:{to:{name:"domains"}}},[t._v("\n                        Read more\n                     ")])],1)]),t._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-4"},[t.symlinks?n("div",{staticClass:"padding-10-px padding-left-0-px"},[n("nuxt-link",{attrs:{to:{name:"singleCollection",params:{hash:t.symlinks.shop.reference},query:{sortby:"trending"}}}},[n("span",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold"},[t._v("Shop")]),t._v(" "),n("br"),n("span",{staticClass:"has-text-grey"},[t._v("Sellers from Nepal also use Naya to "),n("b",[t._v("showcase")]),t._v(" their "),n("b",[t._v("amazing products")]),t._v(".")])]),t._v(" "),t.symlinks&&t.symlinks.shop?n("div",{staticClass:"margin-top-10-px pointer",on:{click:function(e){t.$store.state.user?t.gotoAddProduct():t.loginMessage()}}},[t._m(4),t._v(" Add your product\n                        ")]):t._e()],1):t._e()]),t._v(" "),n("div",{staticClass:"column"},[t.shopPosts&&t.shopPosts.list?n("div",[t._l(t.shopPosts.list,(function(e,s){return n("div",{key:s,staticClass:"list-card card product margin-bottom-15-px has-background-white-biss"},[n("div",{staticClass:"card-content padding-TB-15-px-RL-10-px-imp"},[n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column is-narrow"},[n("nuxt-link",{staticClass:"image is-32x32",attrs:{to:e.author.hash?{name:"singleCollection",params:{hash:e.author.hash}}:{name:"user",params:{username:e.author.username}}}},[n("img",{staticClass:"green-dashed-border-icon is-rounded has-background-white",attrs:{src:e.author&&e.author.image?t.server+"attachments.img/sm/"+e.author.image.hash:e.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})])],1),t._v(" "),n("div",{staticClass:"column margin-top-5-px margin-bottom-5-px"},[n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column is-narrow"},[e.domain?n("a",{attrs:{href:"http://"+e.domain.url+"/post/"+e.hash}},[n("figure",{staticClass:"image is-24x24 border-radius-5-px opacity-95",style:{"background-image":"url('"+(e.attachments&&e.attachments.length>0?t.server+"attachments.img/md/"+e.attachments[0].hash:t.server+"public/images/md/empty_cl.png")+"')","background-size":"cover","background-position":"center center"}})]):n("nuxt-link",{attrs:{to:{name:"post",params:{hash:e.hash}}}},[n("figure",{staticClass:"image is-24x24 border-radius-5-px opacity-95",style:{"background-image":"url('"+(e.attachments&&e.attachments.length>0?t.server+"attachments.img/md/"+e.attachments[0].hash:t.server+"public/images/md/empty_cl.png")+"')","background-size":"cover","background-position":"center center"}})])],1),t._v(" "),n("div",{staticClass:"column"},[e.domain?n("a",{attrs:{href:"http://"+e.domain.url+"/post/"+e.hash}},[n("div",{staticClass:"is-size-6",domProps:{innerHTML:t._s(t.truncate(e.title?e.title.replace(/<br>/g," ").replace(/\n/g,""):"",40).text)}})]):n("nuxt-link",{attrs:{to:{name:"post",params:{hash:e.hash}}}},[n("div",{staticClass:"is-size-6",domProps:{innerHTML:t._s(t.truncate(e.title?e.title.replace(/<br>/g," ").replace(/\n/g,""):"",40).text)}})])],1)])]),t._v(" "),n("div",{staticClass:"column margin-top-5-px margin-bottom-5-px is-narrow has-text-link is-size-7"},[n("b",[t._v("Rs. "+t._s(e.themedata&&e.themedata.total.toLocaleString("en-IN")))])])])])])})),t._v(" "),t.shopPosts.hasmore&&t.symlinks?n("div",{staticClass:"has-text-centered margin-top-5-px position-relative"},[n("nuxt-link",{attrs:{to:{name:"singleCollection",params:{hash:t.symlinks.shop.reference},query:{sortby:"trending"}}}},[n("button",{staticClass:"button on-divider"},[t._v("more")]),t._v(" "),n("div",{staticClass:"is-divider margin-0-px behind-btn"})])],1):t._e()],2):n("no-ssr",[n("div",{staticClass:"columns is-multiline is-mobile"},t._l(5,(function(t){return n("div",{key:t,staticClass:"column is-12"},[n("content-placeholders",{attrs:{rounded:!0}},[n("content-placeholders-text",{attrs:{lines:1}})],1)],1)})),0)])],1)]),t._v(" "),n("div",{staticClass:"columns is-variable is-2-mobile is-mobile domain-info"},[t._m(5),t._v(" "),n("div",{staticClass:"column is-7 is-size-5 is-size-6-mobile"},[t._v("\n                     If you are a seller based in Nepal, you can setup your shop on Naya for consistent online sales.\n                     "),n("br"),t._v(" "),n("span",{staticClass:"pointer has-text-link is-size-6-half",on:{click:function(e){null!=t.$store.state.user?t.isCollectionModalActive=!0:t.loginMessage()}}},[t._v("\n                        add business\n                     ")])])]),t._v(" "),n("div",{staticClass:"columns margin-top-100-px padding-30-px has-background-white overflow-hidden is-vcentered"},[n("div",{staticClass:"column is-5 margin-bottom-10-px"},[n("nuxt-link",{attrs:{to:{name:"popular",query:{sortby:"trending",theme:"status"}}}},[n("span",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold"},[t._v("Updates")]),t._v(" "),n("br"),n("span",{staticClass:"has-text-grey"},[t._v("Quick updates that tell"),n("br"),t._v("great stories.")])])],1),t._v(" "),n("div",{staticClass:"column"},[n("nuxt-link",{staticClass:"hover-opacity-100",attrs:{to:{name:"popular",query:{sortby:"trending",theme:"status"}}}},[t.statusPosts&&t.statusPosts.list?n("div",{staticClass:"height-325-px position-relative"},[n("div",{staticClass:"position-absolute z-index-1 width-100-percent"},[n("div",{staticClass:"margin-RL-auto has-background-black border-radius-2-px",style:{transform:"translate(-270px, 100px)",width:"40px",height:"50px",opacity:"0.04"}})]),t._v(" "),n("div",{staticClass:"position-absolute z-index-1 width-100-percent"},[n("div",{staticClass:"margin-RL-auto has-background-black border-radius-2-px",style:{transform:"translate(-210px, 210px)",width:"50px",height:"40px",opacity:"0.07"}})]),t._v(" "),n("div",{staticClass:"position-absolute z-index-1 width-100-percent"},[n("div",{staticClass:"margin-RL-auto has-background-black border-radius-2-px",style:{transform:"translate(-300px, 210px)",width:"20px",height:"20px",opacity:"0.02"}})]),t._v(" "),t._l(t.statusPosts.list,(function(e,s){return n("div",{key:s,staticClass:"position-absolute z-index-1 width-100-percent"},[n("div",{staticClass:"card margin-RL-auto",style:0==s?{transform:"translate(0px, 0px)",width:"240px",height:"276px"}:1==s?{transform:"translate(140px, 60px)",width:"160px",height:"196px"}:2==s?{transform:"translate(-200px, 40px)",width:"120px",height:"156px"}:{transform:"translate(-130px, 150px)",width:"80px",height:"116px"}},[n("div",{staticClass:"card-content padding-10-px"},[n("figure",{staticClass:"image is-16x16"},[n("img",{staticClass:"is-rounded",attrs:{src:e.author&&e.author.image?t.server+"attachments.img/sm/"+e.author.image.hash:e.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})])]),t._v(" "),n("div",{staticClass:"card-content",class:e.attachments&&e.attachments.length>0?"padding-0-px":"padding-10-px"},[e.attachments&&e.attachments.length>0?n("div",[n("img",{attrs:{width:"100%",src:t.server+"attachments.img/sm/"+e.attachments[0].hash}})]):n("p",{class:0==s?"is-size-4":1==s?"is-size-6":2==s?"is-size-6-half":"is-size-7",domProps:{innerHTML:t._s(t.truncate(e.title?e.title.replace(/<br>/g," ").replace(/\n/g,""):e.status?e.status.replace(/<br>/g," ").replace(/\n/g,""):"",50).text)}})])])])}))],2):n("no-ssr",[n("div",{staticClass:"columns is-multiline is-mobile is-variable is-2"},t._l(4,(function(e){return n("div",{key:e,staticClass:"column is-half-mobile is-one-third-tablet is-one-quarter-desktop"},[n("content-placeholders",{attrs:{rounded:!0}},[n("content-placeholders-img"),t._v(" "),n("content-placeholders-heading")],1)],1)})),0)]),t._v(" "),t.statusPosts&&t.statusPosts.list?n("p",{staticClass:"has-text-centered"},[n("button",{staticClass:"button is-text is-small has-text-weight-bold"},[n("span",{staticClass:"margin-right-5-px"},[t._v("explore updates")]),t._v(" "),n("b-icon",{attrs:{icon:"menu-right-outline"}})],1)]):t._e()],1)],1)])],1)]),t._v(" "),n("section",{staticClass:"columns is-mobile margin-top-100-px"},[n("div",{staticClass:"column is-8"},[n("nuxt-link",{attrs:{to:{name:"user",params:{username:"naya"}}}},[n("b",{staticClass:"is-size-5"},[t._v("Naya")])]),t._v(" "),n("br"),n("b",[t._v("©")]),t._v(" "+t._s(t.local.replace(/(.*):\/\//,"").replace("/",""))+" "+t._s((new Date).getFullYear())+"\n               "),n("br"),t._v("All rights reserved\n            ")],1),t._v(" "),n("div",{staticClass:"column has-text-right"},[n("nuxt-link",{attrs:{to:{name:"termsCondition"}}},[n("br"),t._v(" "),n("b",{staticClass:"is-size-7"},[t._v("Terms")])])],1)])])],1)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hero is-white is-fullheight-with-navbar border-radius-3-px"},[s("div",{staticClass:"hero-body border-radius-3-px has-text-centered"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-gapless is-mobile"},[s("div",{staticClass:"column"}),t._v(" "),s("div",{staticClass:"column is-four-fifths-mobile is-four-fifths-tablet"},[s("h1",{staticClass:"title has-text-weight-bold is-size-1 is-size-2-mobile"},[t._v("\n                           naya.\n                        ")]),t._v(" "),s("div",{staticClass:"subtitle columns"},[s("div",{staticClass:"column is-hidden-mobile"}),t._v(" "),s("div",{staticClass:"column is-7"},[s("h2",{staticClass:"has-text-dark is-size-5 is-size-6-mobile"},[t._v("\n                                 Explore "),s("b",[t._v("Nepal")]),t._v(" through a vibrant online community.\n                              ")])]),t._v(" "),s("div",{staticClass:"column is-hidden-mobile"})])]),t._v(" "),s("div",{staticClass:"column"})])])]),t._v(" "),s("div",{staticClass:"hero-foot"},[s("div",{staticClass:"is-hidden-mobile mouse dark z-index-10"},[s("span")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"add-article-btn is-pulled-left margin-right-10-px has-text-centered border-radius-2-px"},[e("b",[this._v("+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"position-absolute is-full-width is-full-height has-text-white has-text-centered is-v-centered"},[e("div",{staticClass:"is-size-6-half has-text-weight-bold"},[e("b",{staticClass:"is-size-3"},[this._v("+")]),this._v(" "),e("br"),this._v("\n                              Create a\n                              "),e("br"),this._v("\n                              Collection\n                           ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-5-mobile is-3-tablet"},[e("h1",{staticClass:"title is-size-4 is-size-5-mobile has-text-weight-bold"},[this._v("Connect your domain to a collection")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"add-product-btn is-pulled-left margin-right-10-px has-text-centered border-radius-2-px"},[e("b",[this._v("+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-5-mobile is-3-tablet"},[e("h1",{staticClass:"title is-size-4 is-size-5-mobile has-text-weight-bold"},[this._v("Reach more customers on Naya")])])}],!1,null,"f1f17556",null).exports);function A(){var t=Object(n.a)(['\n            query symlink{\n               homePageImage : symlink(name : "homepageimage"){\n                  name\n                  reference\n               }\n               shop : symlink(name : "shop"){\n                  name\n                  reference\n               }\n            }\n         ']);return A=function(){return t},t}var S={apollo:{symlinks:{query:o()(A()),update:function(t){return t}}},data:function(){return{domainHash:this.$store.state.domain,server:"https://api.naya.com.np/",collections:[],collectionTypes:["page","business","organization","landmark","location","favorites","album","data","application"],selectedType:"",collectionName:"",isCollectionModalActive:!1,pageNumber:1,loadingMoreCollections:!1,domain:null}},methods:{loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},mounted:function(){this.$store.state.domain||this.$apollo.queries.symlinks.refetch()},components:{"app-domain":u,"app-index":j}},P=Object(h.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.domainHash?e("app-domain",{attrs:{hash:this.domainHash}}):e("app-index",{attrs:{symlinks:this.symlinks}})],1)}),[],!1,null,"c5f20c8c",null);e.default=P.exports},292:function(t,e,s){"use strict";s(97);var n=s(96),a=s(95),o=s.n(a);function i(){var t=Object(n.a)(["\n            mutation addReply($commenthash: String!, $content: String!, $aliashash: String) {\n              addReply(commenthash: $commenthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                timestamp\n                nreplies\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return i=function(){return t},t}function r(){var t=Object(n.a)(["\n            mutation removeUpvote($hash: String!) {\n              removeUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return r=function(){return t},t}function c(){var t=Object(n.a)(["\n            mutation addUpvote($hash: String!) {\n              addUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return c=function(){return t},t}function l(){var t=Object(n.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return l=function(){return t},t}function m(){var t=Object(n.a)(["\n            mutation removeComment($hash: String!) {\n              removeComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return m=function(){return t},t}function h(){var t=Object(n.a)(["\n        query comment($hash: String!, $page: Int, $offset : Int) {\n          comment(hash: $hash) {\n            replies(page: $page, offset : $offset) {\n              hasmore\n              list {\n                timestamp\n                nupvotes\n                nreplies\n                hash\n                content\n                upvoted\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return h=function(){return t},t}var u={apollo:{commentR:{query:o()(h()),prefetch:!1,variables:function(){return{hash:this.comment.hash,page:1,offset:0}},skip:function(){return this.skipQuery},update:function(t){return t.comment&&t.comment.replies&&t.comment.replies.list&&t.comment.replies.list.length>0&&(this.replies=t.comment.replies.list),t.comment.replies}}},data:function(){return{server:"https://api.naya.com.np/",currentUser:null,upvoted:this.comment.upvoted,nupvotes:this.comment.nupvotes,replyActive:!1,replyingActive:!1,replyFirstFetch:!1,replyContent:"",replies:[],nreplies:this.comment.nreplies,offset:0,skipQuery:!0,pageNumber:1,isFlagCommentModalActive:!1,flagType:null,deleted:!1,disable:!1}},props:{comment:{type:Object,required:!0},selectedCommenter:{type:Object}},name:"app-comment",methods:{decreaseNcomments:function(){this.nreplies--,this.offset--},loadMore:function(){this.pageNumber++,this.$apollo.queries.commentR.fetchMore({variables:{hash:this.comment.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,n=s.comment.replies.list,a=s.comment.replies.hasmore;return s?{comment:{__typename:t.comment.__typename,replies:{__typename:t.comment.replies.__typename,list:t.comment.replies.list.concat(n),hasmore:a}}}:t}})},openRemoveCommentDialogBox:function(){var t=this;this.$dialog.confirm({title:"Remove Comment",message:"Are you sure you want to <b>delete</b> this comment?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removeComment()}})},removeComment:function(){var t=this;this.$apollo.mutate({mutation:o()(m()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeComment.success&&(t.deleted=!0,t.$emit("decreaseNcomments"))})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagComment:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:o()(l()),variables:{hash:this.comment.hash,type:this.flagType,documenttype:"comment"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Comment has been successfully flagged!!",type:"is-success"}),t.isFlagCommentModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this Comment",type:"is-danger"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagCommentModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},upvoteComment:function(){var t=this;this.$apollo.mutate({mutation:o()(c()),variables:{hash:this.comment.hash}}).then((function(e){e.data.addUpvote.success&&(t.upvoted=!0,t.nupvotes++)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},downvoteComment:function(){var t=this;this.$apollo.mutate({mutation:o()(r()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeUpvote.success&&(t.upvoted=!1,t.nupvotes--)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},submitReply:function(t){var e=this;this.disable=!0;var s,n=((s=this.replyContent)||(s=""),s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:o()(i()),variables:{commenthash:t,content:n,aliashash:this.selectedCommenter.hash}}).then((function(t){t.data.addReply&&(e.replyContent="",e.replyActive=!0,e.nreplies++,e.offset++,e.replies=[t.data.addReply].concat(e.replies),e.disable=!1)})).catch((function(t){e.disable=!1,"GraphQL error: you are banned from using this feature until Invalid Date"==t.message?e.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},replyToggle:function(t){var e=this;if("onlyreplies"==t){this.$apollo.queries.commentR.skip=!1,this.replyActive=!this.replyActive,this.replyActive||(this.replyingActive=!1);var s=document.getElementsByClassName("reply-text-box");for(n=0;n<s.length;n++)s[n].id==="reply-"+this.comment.hash?s[n].className=s[n].className.replace(/is-hidden/g,"").trim():(s[n].className=s[n].className.replace(/is-hidden/g,"").trim(),s[n].className?s[n].className+=" is-hidden":s[n].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}else{this.$apollo.queries.commentR.skip=!1,this.replyActive=!0,this.replyingActive=!0;var n;s=document.getElementsByClassName("reply-text-box");for(n=0;n<s.length;n++)s[n].id==="reply-"+this.comment.hash?s[n].className=s[n].className.replace(/is-hidden/g,"").trim():(s[n].className=s[n].className.replace(/is-hidden/g,"").trim(),s[n].className?s[n].className+=" is-hidden":s[n].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}},gotoUser:function(){this.comment.author.hash?this.$router.push({name:"singleCollection",params:{hash:this.comment.author.hash}}):this.$router.push({name:"user",params:{username:this.comment.author.username}})},refreshQuery:function(){this.replyToggle(),this.$emit("refreshQuery")},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},mounted:function(){this.$store.state.user&&(this.currentUser=this.$store.state.user.username)},components:{"app-comment":g}},p=s(22),d=Object(p.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.deleted?t._e():s("div",[t.comment.author?s("div",[s("div",{staticClass:"media margin-bottom-20-px"},[s("div",{staticClass:"media-left"},[s("figure",{staticClass:"image is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:t.comment.author&&t.comment.author.image?t.server+"attachments.img/sm/"+t.comment.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"pointer has-text-centered is-size-7 margin-top-5-px"},[t.upvoted?t._e():s("span",{on:{click:function(e){null!=t.currentUser?t.upvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1),t._v(" "),t.upvoted?s("span",{staticClass:"has-text-danger",on:{click:function(e){null!=t.currentUser?t.downvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1):t._e(),t._v(" "),t.nupvotes?s("p",{staticClass:"margin-top--5-px"},[s("b",[t._v(t._s(t.nupvotes))])]):t._e()])]),t._v(" "),s("div",{staticClass:"media-content"},[t.comment.permissions&&1==t.comment.permissions.write&&null!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:t.openRemoveCommentDialogBox}},[s("b-icon",{attrs:{icon:"delete",size:"is-small"}})],1):t._e(),t._v(" "),t.comment.permissions&&0==t.comment.permissions.write&&t.comment.author.username!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:function(e){null!=t.currentUser?t.isFlagCommentModalActive=!0:t.loginMessage()}}},[s("b-icon",{attrs:{icon:"flag",size:"is-small"}})],1):t._e(),t._v(" "),s("div",{staticClass:"display-block"},[s("nuxt-link",{attrs:{to:this.comment.author.hash?{name:"singleCollection",params:{hash:this.comment.author.hash}}:{name:"user",params:{username:this.comment.author.username}}}},[s("strong",{staticClass:"is-size-6-half pointer"},[t._v(t._s(t.comment.author.name))])]),t._v(" "),s("p",{staticClass:"has-text-grey is-size-7 "},[t._v(t._s(t._f("moment")(t.comment.timestamp,"from","now")))])],1),t._v(" "),s("div",{staticClass:"is-size-6-half margin-top-5-px",domProps:{innerHTML:t._s(t.comment.content)}}),t._v(" "),s("div",[s("p",{staticClass:"is-size-7 margin-top-5-px"},[t.nreplies?s("span",{staticClass:"pointer  margin-right-10-px ",on:{click:function(e){return t.replyToggle("onlyreplies")}}},[s("b",[t._v(t._s(t.nreplies))]),s("span",[t._v(" replies")])]):t._e(),t._v(" "),s("span",{staticClass:"pointer has-text-weight-bold",on:{click:function(e){return t.replyToggle("replieswithtextbox")}}},[t._v("reply")])]),t._v(" "),s("div",[t.replyingActive?s("div",{staticClass:"reply-text-box margin-top-10-px",attrs:{id:"reply-"+t.comment.hash}},[s("textarea-autosize",{ref:"comment",staticClass:"textarea box-shadow-none",attrs:{rows:"2",placeholder:"Write a reply ...",maxlength:"1000"},model:{value:t.replyContent,callback:function(e){t.replyContent="string"==typeof e?e.trim():e},expression:"replyContent"}}),t._v(" "),t.replyContent.length>0?s("div",{staticClass:"margin-top-10-px"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.currentUser?t.submitReply(t.comment.hash):t.loginMessage()}}},[t._v("Submit")]),t._v(" \n                     ")]):t._e()],1):t._e(),t._v(" "),t.replyActive?s("div",[t._l(t.replies,(function(e){return t.replies?s("div",{key:e.hash,staticClass:"margin-top-10-px"},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1):t._e()})),t._v(" "),t.commentR&&1==t.commentR.hasmore?s("div",{staticClass:"has-text-centered margin-top-20-px"},[s("button",{staticClass:"button is-clear is-small is-rounded",on:{click:t.loadMore}},[t._v("load more")])]):t._e()],2):t._e()])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagCommentModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagCommentModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                     Flagging comment\n                  ")]),t._v("\n                  You are about to flag a comment. Please select a category.\n               ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagComment}},[t._v("Done")])])])],1)]):t._e()])}),[],!1,null,null,null),g=e.a=d.exports},293:function(t,e,s){"use strict";var n,a=s(101),o=(s(97),s(69),s(153),s(154),s(47),s(96)),i=s(2),r=s(288),c=s.n(r),l=s(95),m=s.n(l),h=s(292);function u(){var t=Object(o.a)(["\n              mutation changePostPrivacy(\n                $hash: String!\n                $privacy: PostPrivacy!\n              ) {\n                changePostPrivacy(hash: $hash, privacy: $privacy) {\n                  success\n                }\n              }\n            "]);return u=function(){return t},t}function p(){var t=Object(o.a)(["\n            mutation declinePostFromCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              declinePostFromCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return p=function(){return t},t}function d(){var t=Object(o.a)(["\n            mutation approvePostInCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              approvePostInCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return d=function(){return t},t}function g(){var t=Object(o.a)(["\n            mutation removePostFromCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              removePostFromCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return g=function(){return t},t}function v(){var t=Object(o.a)(["\n            mutation addReply($commenthash: String!, $content: String!) {\n              addReply(commenthash: $commenthash, content: $content) {\n                hash\n                content\n              }\n            }\n          "]);return v=function(){return t},t}function f(){var t=Object(o.a)(["\n            mutation removeUpvote($hash: String!) {\n              removeUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return f=function(){return t},t}function b(){var t=Object(o.a)(["\n            mutation addUpvote($hash: String!) {\n              addUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return b=function(){return t},t}function y(){var t=Object(o.a)(["\n            mutation flagComment($hash: String!) {\n              flagComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return y=function(){return t},t}function C(){var t=Object(o.a)(["\n            mutation removeComment($hash: String!) {\n              removeComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return C=function(){return t},t}function _(){var t=Object(o.a)(["\n            mutation addComment($posthash: String!, $content: String!) {\n              addComment(posthash: $posthash, content: $content) {\n                nupvotes\n                nreplies\n                hash\n                content\n                author {\n                  username\n                  name\n                  hash\n                  image { \n                      hash\n                  }\n                 }\n              }\n            }\n          "]);return _=function(){return t},t}function $(){var t=Object(o.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return $=function(){return t},t}function x(){var t=Object(o.a)(["\n            mutation removePost($hash: String!) {\n              removePost(hash: $hash) {\n                success\n              }\n            }\n          "]);return x=function(){return t},t}function k(){var t=Object(o.a)(["\n            mutation removeLike($hash: String!) {\n              removeLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return k=function(){return t},t}function O(){var t=Object(o.a)(["\n            mutation addLike($hash: String!) {\n              addLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return O=function(){return t},t}function w(){var t=Object(o.a)(["\n            mutation addPostToCollection(\n              $collectionhash: String!\n              $hash: String!\n            ) {\n              addPostToCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return w=function(){return t},t}function j(){var t=Object(o.a)(["\n            query searchCollections($page: Int, $q: String!) {\n              searchCollections(page: $page, q: $q) {\n                hasmore\n                list {\n                  name\n                  hash\n                }\n              }\n            }\n          "]);return j=function(){return t},t}function A(){var t=Object(o.a)(["\n            mutation toggleInstock($hash: String!, $instock: Boolean!) {\n              toggleInstock(hash: $hash, instock: $instock) {\n                success\n              }\n            }\n          "]);return A=function(){return t},t}function S(){var t=Object(o.a)(["\n            mutation removeOffer($hash: String!) {\n              removeOffer(hash: $hash) {\n                success\n              }\n            }\n          "]);return S=function(){return t},t}function P(){var t=Object(o.a)(["\n            mutation addOffer(\n              $hash: String!\n              $discount: Percentage!\n              $daysuntiloffer: Int!\n            ) {\n              addOffer(\n                hash: $hash\n                discount: $discount\n                daysuntiloffer: $daysuntiloffer\n              ) {\n                success\n              }\n            }\n          "]);return P=function(){return t},t}function z(){var t=Object(o.a)(["\n            mutation reserveProduct(\n              $hash: String!\n              $quantity: Int!\n              $daysuntilpickup: Int!\n              $coins: Int\n            ) {\n              reserveProduct(\n                hash: $hash\n                quantity: $quantity\n                daysuntilpickup: $daysuntilpickup\n                coins: $coins\n              ) {\n                pin\n                hash\n              }\n            }\n          "]);return z=function(){return t},t}function q(){var t=Object(o.a)(["\n        query post($hash: String!) {\n          post(hash: $hash) {\n            title\n            status\n            domain{\n               hash\n               url\n            }\n            fullstatus\n            timestamp\n            hash\n            truncated\n            nlikes\n            ncollected\n            liked\n            ncomments\n            permissions\n            theme\n            privacy\n            themedata\n            attachments {\n                hash\n            }\n            collection {\n              hash\n            }\n            author {\n              name\n              username\n              hash\n              image{\n                  hash\n              }\n            }\n          }\n        }\n      "]);return q=function(){return t},t}i.default.use(c.a);var T=(n={apollo:{post:{query:m()(q()),variables:function(){return{hash:this.postObject.hash}},update:function(t){return t.post&&(this.liked=t.post.liked,this.nlikes=t.post.nlikes,this.ncomments=t.post.ncomments,t.post.comments&&t.post.comments.list&&t.post.comments.list.length>0&&(this.comments=t.post.comments.list)),t.post&&"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.instock?this.inStockToggle="Yes":this.inStockToggle="No",t.post}}},props:{postObject:{type:Object,required:!0},collectionLogoHash:{type:String},profileImageDeleted:{type:Boolean},username:{type:String},profileImageHash:{type:String},collectionPermissions:{type:Object},collectionhash:{type:String},from:{type:String}},data:function(){return{server:"https://api.naya.com.np/",pageNumber:0,liked:null,nlikes:null,currentUser:null,commentContent:"",post:{},replyActive:!1,replyContent:"",comments:[],ncomments:null,offset:0,seeMore:!1,deleted:!1,data:[],collectionName:"",collections:[],selected:{},isFlagPostModalActive:!1,flagType:null,itemQuantity:1,isReserveItemModalActive:!1,itemPickUpDuration:1,isOfferModalActive:!1,discount:0,daysUntillOffer:null,inStockToggle:"Yes",discountDate:null,interval:null,isAddPostToCollectionModalActive:!1}},computed:{filteredDataArray:function(){var t=this;return this.data.filter((function(e){return e.toString().toLowerCase().indexOf(t.name.toLowerCase())>=0}))}},methods:{decreaseNcomments:function(){this.ncomments--,this.offset--},increaseItemQuantity:function(){this.itemQuantity++},decreaseItemQuantity:function(){this.itemQuantity>1&&this.itemQuantity--},reserveItem:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:m()(z()),variables:{hash:e,quantity:this.itemQuantity,daysuntilpickup:this.itemPickUpDuration}}).then((function(e){t.isReserveItemModalActive=!1,t.$toast.open({message:"Item has been successfully reserved",type:"is-success"}),t.$router.push({name:"transaction",params:{hash:e.data.reserveProduct.hash}})})).catch((function(e){t.isReserveItemModalActive=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:m()(P()),variables:{hash:e,discount:this.discount,daysuntiloffer:this.daysUntillOffer}}).then((function(e){e.data.addOffer.success&&(t.isOfferModalActive=!1,t.$toast.open({message:"Offer has been placed",type:"is-success"}),t.$apollo.queries.post.refetch(),t.discount=0,t.daysUntillOffer=null)})).catch((function(e){t.isOfferModalActive=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:m()(S()),variables:{hash:e}}).then((function(e){e.data.removeOffer.success&&(t.$toast.open({message:"Offer has been removed",type:"is-success"}),t.$apollo.queries.post.refetch())})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},stockToggle:function(){var t=this;if("No"==this.inStockToggle)var e=!0;else e=!1;var s=this.post.hash;this.$apollo.mutate({mutation:m()(A()),variables:{hash:s,instock:e}}).then((function(t){})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(){this.pageNumber<1?(this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.postObject.hash,page:this.pageNumber,total:8},updateQuery:function(t,e){var s=e.fetchMoreResult,n=s.post.comments.list,a=s.post.comments.hasmore,o=s.post.title,i=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,m=s.post.truncated,h=s.post.nlikes,u=s.post.ncollected,p=s.post.liked,d=s.post.ncomments,g=s.post.permissions,v=s.post.privacy,f=s.post.attachments,b=s.post.collection,y=s.post.author,C=s.post.theme,_=s.post.themedata;return s?{post:{__typename:t.post.__typename,title:o,status:i,fullstatus:r,timestamp:c,hash:l,truncated:m,nlikes:h,ncollected:u,liked:p,ncomments:d,permissions:g,privacy:v,collection:b,author:y,theme:C,themedata:_,attachments:f,comments:{__typename:t.post.comments.__typename,list:n,hasmore:a}}}:t}})):this.pageNumber>=1&&(this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.postObject.hash,page:this.pageNumber,total:8},updateQuery:function(t,e){var s=e.fetchMoreResult,n=s.post.comments.list,a=s.post.comments.hasmore,o=s.post.title,i=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,m=s.post.truncated,h=s.post.nlikes,u=s.post.ncollected,p=s.post.liked,d=s.post.ncomments,g=s.post.permissions,v=s.post.privacy,f=s.post.collection,b=s.post.author,y=s.post.theme,C=s.post.themedata,_=s.post.attachments;return s?{post:{__typename:t.post.__typename,title:o,status:i,fullstatus:r,timestamp:c,hash:l,truncated:m,nlikes:h,ncollected:u,liked:p,ncomments:d,permissions:g,privacy:v,collection:f,author:b,theme:y,themedata:C,attachments:_,comments:{__typename:t.post.comments.__typename,list:t.post.comments.list.concat(n),hasmore:a}}}:t}}))},getCollections:function(){var t=this;this.$apollo.query({query:m()(j()),variables:{q:this.collectionName}}).then((function(e){t.collections=[],e.data.searchCollections&&e.data.searchCollections.list.length>0?e.data.searchCollections.list.forEach((function(e){return t.collections.push(e)})):e.data.searchCollections&&0==e.data.searchCollections.list.length&&(t.collections=[])})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addToCollection:function(){var t=this,e=this.selected.hash,s=this.post.hash;this.$apollo.mutate({mutation:m()(w()),variables:{hash:s,collectionhash:e}}).then((function(e){e.data.addPostToCollection.success&&t.$toast.open({message:"Post has been Added",type:"is-success"}),t.collectionName="",t.isAddPostToCollectionModalActive=!1})).catch((function(e){t.isAddPostToCollectionModalActive=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"The collection may not be available. Please select from the list",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},gotoPost:function(){this.$router.push({name:"post",params:{hash:this.post.hash,post:this.post,postObject:this.postObject}})},like:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:m()(O()),variables:{hash:e}}).then((function(e){e.data.addLike.success&&(t.liked=!0,t.nlikes++)})).catch((function(e){t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},unlike:function(){var t=this;this.$apollo.mutate({mutation:m()(k()),variables:{hash:this.post.hash}}).then((function(e){e.data.removeLike.success&&(t.liked=!1,t.nlikes--)})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRemovePostDialog:function(){var t=this;this.$dialog.confirm({title:"Remove Post",message:"Are you sure you want to <b>delete</b> this post?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removePost()}})},removePost:function(){var t=this;this.$apollo.mutate({mutation:m()(x()),variables:{hash:this.post.hash}}).then((function(e){e.data.removePost.success&&(t.$emit("decreaseOffset"),t.deleted=!0)})).catch((function(e){(e.graphQLErrors[0].message="shop"==t.post.theme)?t.$toast.open({message:"Cannot remove the post. The product may have been reserved by some buyers.",type:"is-danger",position:"is-bottom"}):(e.graphQLErrors[0].message="error deleting post")?t.$toast.open({message:"Error Deleting Post",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagPost:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:m()($()),variables:{hash:this.post.hash,type:this.flagType,documenttype:"post"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Post has been successfully flagged!!",type:"is-success"}),t.isFlagPostModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this post",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},submitComment:function(){var t,e=this,s=((t=this.commentContent)||(t=""),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:m()(_()),variables:{posthash:this.post.hash,content:s}}).then((function(t){t.data.addComment&&(e.commentContent="",e.ncomments++,e.offset++,e.comments=[t.data.addComment].concat(e.comments))})).catch((function(t){e.liked=!1,"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):"GraphQL error: you are banned from using this feature until Invalid Date"==t.message?e.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeComment:function(t){var e=this;this.$apollo.mutate({mutation:m()(C()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.removeComment.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagComment:function(t){var e=this;this.$apollo.mutate({mutation:m()(y()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.flagComment.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},upvoteComment:function(t){var e=this;this.$apollo.mutate({mutation:m()(b()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.addUpvote.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},downvoteComment:function(t){var e=this;this.$apollo.mutate({mutation:m()(f()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.removeUpvote.success&&e.$apollo.queries.post.refetch()})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},submitReply:function(t){var e=this,s=this.replyContent;this.$apollo.mutate({mutation:m()(v()),variables:{commenthash:t,content:s}}).then((function(t){t.data.addReply&&(e.replyContent="",e.$apollo.queries.post.refetch())})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},refreshQuery:function(){this.$apollo.queries.post.refetch()},removeFromCollection:function(){var t=this;this.$apollo.mutate({mutation:m()(g()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.removePostFromCollection.success&&t.$emit("refreshQuery")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},approvePostInCollection:function(){var t=this;this.$apollo.mutate({mutation:m()(d()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.approvePostInCollection.success&&t.$emit("refreshQuery")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},declinePostInCollection:function(){var t=this;this.$apollo.mutate({mutation:m()(p()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.declinePostFromCollection.success&&t.$emit("refreshQuery")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openLocktoCollectionDialog:function(){var t=this;this.$dialog.confirm({title:"Lock Post to Collection",message:'<p v-if="'.concat(0!=this.post.ncollected,'">This post is collected in ').concat(this.post.ncollected," collections.</p> Are you sure you want to <b>lock</b> this post to current collection?"),cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("locked_to_collection")}})},postPrivacy:function(t){var e=this;this.postObject.permissions&&1==this.post.permissions.write&&null!=this.currentUser&&this.$apollo.mutate({mutation:m()(u()),variables:{hash:this.post.hash,privacy:t}}).then((function(t){t.data.changePostPrivacy.success&&e.$apollo.queries.post.refetch()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},gotoUser:function(){this.post.author.hash?this.$router.push({name:"singleCollection",params:{hash:this.post.author.hash}}):this.$router.push({name:"user",params:{username:this.post.author.username}})},editPost:function(){this.post.author.hash?this.$router.push({name:"editPost",params:{hash:this.post.hash}}):this.$router.push({name:"editPost",params:{username:this.post.author.username,hash:this.post.hash,post:this.post}})},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}}},Object(a.a)(n,"computed",{}),Object(a.a)(n,"beforeMount",(function(){})),Object(a.a)(n,"mounted",(function(){if(this.$store.state.user&&(this.currentUser=this.$store.state.user.username),this.$store.state.servertime){new Date(this.$store.state.servertime).getTime(),Date.now();var t=this.$store.state.servertime;this.$moment.now=function(){return t}}})),Object(a.a)(n,"beforeDestroy",(function(){})),Object(a.a)(n,"components",{"app-comment":h.a}),n),N=(s(346),s(22)),L=Object(N.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"columns is-mobile is-variable is-2"},[("article"==t.postObject.theme||"shop"==t.postObject.theme)&&t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"column is-one-third",on:{click:t.gotoPost}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/lg/"+t.postObject.attachments[0].hash}})])]):t._e(),t._v(" "),s("div",{staticClass:"column"},[s("nuxt-link",{attrs:{to:t.post&&t.post.domain?{name:"domainPost",params:{hash:t.post.domain.hash,posthash:t.post.hash}}:{name:"post",params:{hash:t.post.hash}}}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-5-mobile has-text-weight-bold margin-bottom-10-px",on:{click:t.gotoPost}},[t._v(t._s(t.postObject.title))]):t._e()]),t._v(" "),"shop"==t.postObject.theme&&t.postObject.themedata?s("div",{staticClass:"margin-top-20-px"},[s("p",{staticClass:"is-size-5 is-size-5-mobile"},[t._v("Rs. "),s("b",{staticClass:"has-text-danger"},[t._v(t._s(t.postObject.themedata.total.toLocaleString("en-IN")))])]),t._v(" "),t.post.themedata&&t.post.themedata.discount?s("div",{staticClass:"margin-top-20-px "},[s("span",{staticClass:"is-size-6 is-size-6-mobile"},[t._v("Discount offer of upto "),s("b",[t._v(t._s(t.post.themedata.discount)+"%")])]),s("br"),t._v(" "),s("no-ssr",[s("span",{staticClass:"has-text-link"},[t._v("(ends "+t._s(t._f("moment")(t.post.themedata.discountuntil,"from","now"))+")")])])],1):t._e(),t._v(" "),s("div",{staticClass:"is-divider margin-top-20-px margin-bottom-10-px"})]):t._e(),t._v(" "),"undefined"!=t.postObject.status?s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.postObject.status)},on:{click:t.gotoPost}}):t._e()],1)]),t._v(" "),"link"==t.postObject.theme&&t.postObject.themedata?s("div",{staticClass:"card margin-top-10-px"},[s("div",{staticClass:"card-content"},[s("a",{attrs:{href:t.postObject.themedata.url,target:"_blank"}},[s("p",{staticClass:"is-size-6 is-size-6-mobile has-text-weight-bold"},[t._v("\n                           "+t._s(t.postObject.themedata.title)+"\n                        ")]),t._v(" "),s("p",{staticClass:"is-size-6 is-size-6-mobile margin-top-2-px"},[t._v("\n                           "+t._s(t.postObject.themedata.description)+"\n                        ")])])])]):t._e(),t._v(" "),t.postObject.theme&&"status"!=t.postObject.theme?t._e():s("div",{on:{click:t.gotoPost}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},t._l(t.postObject.attachments,(function(e,n){return n<3?s("div",{key:n,class:"grid-item "+(0===n&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(n+1)},[s("figure",{staticClass:"image"},[2===n&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===n&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()})),0):t._e()])]),t._v(" "),s("div",{staticClass:"margin-top-10-px"},[s("button",{staticClass:"button is-white is-small has-text-grey-dark no-action is-pulled-right"},[s("b-icon",{attrs:{icon:"heart",size:"is-small"}}),t._v(" "),s("span",[t._v(t._s(t.nlikes))])],1),t._v(" "),s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-16x16 margin-top-2-px"},[t.postObject&&t.postObject.author.hash?s("div",[t.collectionLogoHash?t.collectionLogoHash?s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.hash==t.collectionhash?t.server+"attachments.img/sm/"+t.collectionLogoHash:t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_cl.png"}})]):t._e():s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.hash==t.collectionhash&&t.profileImageDeleted?t.server+"public/images/sm/empty_cl.png":t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_cl.png"}})])]):s("div",[t.profileImageHash?t.profileImageHash?s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.username==t.username?t.server+"attachments.img/sm/"+t.profileImageHash:t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})]):t._e():s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.username==t.username&&t.profileImageDeleted?t.server+"public/images/sm/empty_pp.png":t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})])])]),t._v(" "),s("div",{staticClass:"media-content"},[s("nuxt-link",{attrs:{to:t.postObject.author.hash?{name:"singleCollection",params:{hash:t.postObject.author.hash}}:{name:"user",params:{username:t.postObject.author.username}}}},[s("p",{staticClass:"is-size-7 has-text-grey-light"},[t._v(t._s(t.postObject.author.name))])])],1)])])])}),[],!1,null,"24dad58f",null);e.a=L.exports},304:function(t,e,s){},305:function(t,e,s){},340:function(t,e,s){t.exports=s.p+"img/3e3fd4e.png"},346:function(t,e,s){"use strict";var n=s(304);s.n(n).a},347:function(t,e,s){"use strict";var n=s(305);s.n(n).a}}]);