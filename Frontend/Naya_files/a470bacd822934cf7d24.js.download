(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1183:function(t,e,s){"use strict";s.r(e);var a,o=s(101),i=(s(97),s(96)),n=(s(69),s(2)),r=s(288),c=s.n(r),l=(s(155),s(283)),p=s(292),m=s(286),h=s.n(m),u=s(95),d=s.n(u);function g(){var t=Object(i.a)(["\n            mutation removeLike($hash: String!) {\n              removeLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return g=function(){return t},t}function v(){var t=Object(i.a)(["\n            mutation addLike($hash: String!) {\n              addLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return v=function(){return t},t}function f(){var t=Object(i.a)(["\n            mutation addComment($posthash: String!, $content: String!, $aliashash: String) {\n              addComment(posthash: $posthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                timestamp\n                nreplies\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return f=function(){return t},t}function b(){var t=Object(i.a)(["\n            mutation toggleInstock($hash: String!, $instock: Boolean!) {\n              toggleInstock(hash: $hash, instock: $instock) {\n                success\n              }\n            }\n          "]);return b=function(){return t},t}function _(){var t=Object(i.a)(["\n            mutation removeOffer($hash: String!) {\n              removeOffer(hash: $hash) {\n                success\n              }\n            }\n          "]);return _=function(){return t},t}function y(){var t=Object(i.a)(["\n            mutation addOffer(\n              $hash: String!\n              $discount: Percentage!\n              $daysuntiloffer: Int!\n            ) {\n              addOffer(\n                hash: $hash\n                discount: $discount\n                daysuntiloffer: $daysuntiloffer\n              ) {\n                success\n              }\n            }\n          "]);return y=function(){return t},t}function C(){var t=Object(i.a)(["\n            mutation reserveProduct(\n              $hash: String!\n              $quantity: Int!\n              $daysuntilpickup: Int!\n              $coins: Int\n              $phone: Phonenumber!\n            ) {\n              reserveProduct(\n                hash: $hash\n                quantity: $quantity\n                daysuntilpickup: $daysuntilpickup\n                coins: $coins\n                phone: $phone\n              ) {\n                pin\n                hash\n              }\n            }\n          "]);return C=function(){return t},t}function $(){var t=Object(i.a)(["\n               query wallet {\n               wallet{\n                  coins\n                  rates\n               }\n               }\n            "]);return $=function(){return t},t}function w(){var t=Object(i.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return w=function(){return t},t}function x(){var t=Object(i.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return x=function(){return t},t}function k(){var t=Object(i.a)(["\n            mutation removePost($hash: String!) {\n              removePost(hash: $hash) {\n                success\n              }\n            }\n          "]);return k=function(){return t},t}function P(){var t=Object(i.a)(["\n            mutation addPostToCollection(\n              $collectionhash: String!\n              $hash: String!\n            ) {\n              addPostToCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return P=function(){return t},t}function T(){var t=Object(i.a)(["\n            query searchCollections($page: Int, $q: String!) {\n              searchCollections(page: $page, q: $q) {\n                hasmore\n                list {\n                  name\n                  hash\n                  logo {\n                     hash\n                  }\n                }\n              }\n            }\n          "]);return T=function(){return t},t}function M(){var t=Object(i.a)(["\n              mutation changePostPrivacy(\n                $hash: String!\n                $privacy: PostPrivacy!\n              ) {\n                changePostPrivacy(hash: $hash, privacy: $privacy) {\n                  success\n                }\n              }\n            "]);return M=function(){return t},t}function O(){var t=Object(i.a)(["\n                     query listOwnedCollections($page: Int, $sortby: SortBy ) {\n                        listOwnedCollections(page: $page, sortby : $sortby) {\n                           hasmore\n                           list {\n                           name\n                           hash\n                           logo{\n                                 hash\n                           }\n                           }\n                        }\n                     }\n                     "]);return O=function(){return t},t}function S(){var t=Object(i.a)(["\n            mutation removeProductReview($hash: String!) {\n              removeProductReview(hash: $hash) {\n                success\n              }\n            }\n          "]);return S=function(){return t},t}function R(){var t=Object(i.a)(["\n            query post($hash: String!, $page: Int) {\n               post(hash: $hash) {\n                 reviews(page : $page) {\n                     hasmore\n                         list {\n                             hash\n                             stars\n                             content\n                             timestamp\n                             author {\n                                 username\n                                 name\n                             }   \n                         }\n                 }\n            }\n        }\n        "]);return R=function(){return t},t}function A(){var t=Object(i.a)(["\n        query listOwnedCollections($page: Int, $sortby: SortBy ) {\n          listOwnedCollections(page: $page, sortby : $sortby) {\n            hasmore\n            list {\n              name\n              hash\n              logo{\n                  hash\n              }\n            }\n          }\n        }\n      "]);return A=function(){return t},t}function z(){var t=Object(i.a)(["\n        query post($hash: String!, $page: Int, $offset : Int) {\n          post(hash: $hash) {\n            author {\n              username\n              name\n              hash\n              image{\n                  hash\n              }\n            }\n            tags\n            domain {\n                 url\n                 hash\n              }\n            timestamp\n            title\n            status\n            fullstatus\n            hash\n            nlikes\n            liked\n            ncomments\n            ncollected\n            attachments{\n                hash\n            }\n            permissions\n            privacy\n            theme\n            themedata\n            collection {\n              name\n            }\n            reviews{\n               hasmore\n               list{\n                  hash\n                  stars\n                  content\n                  permissions\n                  newavg\n                  author{\n                     name\n                     username\n                     hash\n                     image{\n                        hash\n                     }\n                  }\n               }\n            }\n            comments(page: $page, offset: $offset) {\n              hasmore\n              list {\n                timestamp\n                nupvotes\n                nreplies\n                hash\n                content\n                upvoted\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return z=function(){return t},t}n.default.use(c.a);var q,L=(a={apollo:{post:{query:d()(z()),variables:function(){return{hash:this.postHash,page:1,offset:0}},update:function(t){if(t.post){if(!t.post.domain)return this.liked=t.post.liked,this.nlikes=t.post.nlikes,this.ncomments=t.post.ncomments,t.post.comments&&t.post.comments.list&&t.post.comments.list.length>0&&(this.comments=t.post.comments.list),t.post&&"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.instock?this.inStockToggle="Yes":this.inStockToggle="No",t.post.reviews&&t.post.reviews.list&&(this.reviews=t.post.reviews.list,this.hasmoreReviews=t.post.reviews.hasmore),t.post;this.$router.replace({name:"redirect",params:{from:"singlePost",domain:t.post.domain,postHash:t.post.hash}})}},error:function(t){t.message=="GraphQL error: could not find post/"+this.postHash&&this.$router.replace({name:"error404"})}},usersCollections:{query:d()(A()),prefetch:!1,skip:function(){return!this.$store.state.user},variables:function(t){return{page:1}},update:function(t){if(t.listOwnedCollections)return this.ownCollections=t.listOwnedCollections.list,this.hasmoreOwnCollections=t.listOwnedCollections.hasmore,t.listOwnedCollections}}},props:{postHash:{type:String,required:!0},routeEnter:{type:String}},data:function(){return{server:"https://api.naya.com.np/",local:"https://naya.com.np/",hash:this.$route.params.hash,post:{},liked:null,nlikes:null,commentContent:"",comments:[],ncomments:null,offset:0,currentUser:null,pageNumber:1,isReserveItemModalActive:!1,itemQuantity:1,itemPickUpDuration:1,isOfferModalActive:!1,discount:0,daysUntillOffer:null,inStockToggle:"Yes",discountDate:null,interval:null,isFlagPostModalActive:!1,flagType:null,collectionName:"",collections:[],selected:{},wallet:{},coins:0,usableCoins:null,isAddPostToCollectionModalActive:!1,ownCollections:[],OwnCollectionPageNumber:1,hasmoreOwnCollections:!1,selectedCommenter:{},loadingMoreOwnCollection:!1,reviews:[],hasmoreReviews:!1,isReviewModalActive:!1,loadingMoreReviews:!1,reviewsPageNumber:1,isFlagProductReviewModalActive:!1,reviewHash:null,isImageModalActive:!1,imagehash:null,disable:!1,contact:null,isSocialShareModalActive:!1,currentUrl:null}},watch:{routeEnter:function(t){this.$apollo.queries.post.refetch()}},head:function(){return{title:this.post&&this.post.title?"".concat(this.post.title," ").concat(this.post&&"shop"==this.post.theme?"- get the best price in Nepal":""):"Naya",meta:[{hid:"description",name:"description",content:this.post&&this.post.status?this.post.status.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:title",property:"og:title",content:this.post&&this.post.title?this.post.title:"Naya"},{hid:"og:description",property:"og:description",content:this.post&&this.post.status?this.post.status.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:image",property:"og:image",content:this.post&&this.post.attachments&&this.post.attachments.length>0?this.server+"attachments.img/lg/"+this.post.attachments[0].hash:this.post&&this.post.author&&this.post.author.image?this.server+"attachments.img/lg/"+this.post.author.image.hash:this.server+"public/images/lg/empty_cl.png"}]}},methods:{openProductReviewFlagModal:function(t){this.reviewHash=t,this.isFlagProductReviewModalActive=!0},loadMoreReviews:function(){var t=this;this.reviewsPageNumber++,this.loadingMoreReviews=!0,this.$apollo.query({query:d()(R()),variables:{hash:this.postHash,page:this.reviewsPageNumber}}).then((function(e){t.reviews=t.reviews.concat(e.data.post.reviews.list),t.hasmoreReviews=e.data.post.reviews.hasmore,t.loadingMoreReviews=!1})).catch((function(e){t.loadingMoreReviews=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeReview:function(t){var e=this;this.$apollo.mutate({mutation:d()(S()),variables:{hash:t}}).then((function(t){e.$apollo.queries.post.refetch(),e.isReviewModalActive=!1})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},selectUserAsCommenter:function(){this.selectedCommenter={},this.$refs.dropup.toggle()},selectCommenter:function(t){this.selectedCommenter&&this.selectedCommenter.hash&&this.selectedCommenter.hash==t.hash||(this.selectedCommenter=t),this.$refs.dropup.toggle()},loadMoreOwnCollections:function(){var t=this;this.OwnCollectionPageNumber++,this.loadingMoreOwnCollection=!0,this.$apollo.query({query:d()(O()),variables:{page:this.OwnCollectionPageNumber}}).then((function(e){t.ownCollections=t.ownCollections.concat(e.data.listOwnedCollections.list),t.hasmoreOwnCollections=e.data.listOwnedCollections.hasmore,t.loadingMoreOwnCollection=!1})).catch((function(e){t.loadingMoreOwnCollection=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openImageModal:function(t){this.isImageModalActive=!0,this.imagehash=t.hash},closeReserveModal:function(){this.coins=0,this.itemPickUpDuration=1,this.itemQuantity=1,this.contact=null},decreaseNcomments:function(){this.ncomments--,this.offset--},openLocktoCollectionDialog:function(){var t=this;this.$dialog.confirm({title:"Lock Post to Collection",message:"Are you sure you want to <b>lock</b> this post to collection?",cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("locked_to_collection")}})},openPrivatePrivacyDialog:function(){var t=this;this.$dialog.confirm({title:"Make post private",message:"This post has been collected in ".concat(this.post.ncollected," collections. Are you sure you want to make this post <b>private</b>?"),cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("private")}})},postPrivacy:function(t){var e=this;1==this.post.permissions.write&&null!=this.$store.state.user&&this.$apollo.mutate({mutation:d()(M()),variables:{hash:this.post.hash,privacy:t}}).then((function(t){t.data.changePostPrivacy.success&&e.$apollo.queries.post.refetch()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},getCollections:function(){var t=this;this.$apollo.query({query:d()(T()),variables:{q:this.collectionName}}).then((function(e){t.collections=[],e.data.searchCollections&&e.data.searchCollections.list.length>0?e.data.searchCollections.list.forEach((function(e){return t.collections.push(e)})):e.data.searchCollections&&0==e.data.searchCollections.list.length&&(t.collections=[])})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addToCollection:function(){var t=this,e=this.selected.hash,s=this.post.hash;this.$apollo.mutate({mutation:d()(P()),variables:{hash:s,collectionhash:e}}).then((function(e){e.data.addPostToCollection.success&&t.$toast.open({message:"Post has been Added",type:"is-success"}),t.isAddPostToCollectionModalActive=!1,t.collectionName="",t.$apollo.queries.post.refetch()})).catch((function(e){t.isAddPostToCollectionModalActive=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"The collection may not be available. Please select from the list",type:"is-danger",position:"is-bottom"}):"GraphQL error: collection access denied"==e.message?t.$toast.open({message:"Access Denied",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRemovePostDialog:function(){var t=this;this.$dialog.confirm({title:"Remove Post",message:"Are you sure you want to <b>delete</b> this post?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removePost()}})},removePost:function(){var t=this;this.$apollo.mutate({mutation:d()(k()),variables:{hash:this.post.hash}}).then((function(e){e.data.removePost.success&&(t.deleted=!0,t.$router.go(-1))})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagProductReview:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:d()(x()),variables:{hash:this.reviewHash,type:this.flagType,documenttype:"post_shop_review"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Review has been successfully flagged!!",type:"is-success"}),t.isFlagProductReviewModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this review",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},flagPost:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:d()(w()),variables:{hash:this.post.hash,type:this.flagType,documenttype:"post"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Post has been successfully flagged!!",type:"is-success"}),t.isFlagPostModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this post",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},increaseItemQuantity:function(){this.itemQuantity++},decreaseItemQuantity:function(){this.itemQuantity>1&&this.itemQuantity--},openReserveModal:function(){var t=this;this.$apollo.query({query:d()($())}).then((function(e){t.wallet=e.data.wallet;var s=t.post.themedata.discount/100*t.post.themedata.total,a=Math.floor(s/e.data.wallet.rates.coins);e.data.wallet.coins<a?t.usableCoins=e.data.wallet.coins:t.usableCoins=a,t.isReserveItemModalActive=!0})).catch((function(e){t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},reserveItem:function(){var t=this,e=this.post.hash;this.contact&&this.contact.length>0?this.$apollo.mutate({mutation:d()(C()),variables:{hash:e,quantity:this.itemQuantity,daysuntilpickup:this.itemPickUpDuration,coins:this.coins,phone:this.contact}}).then((function(e){t.isReserveItemModalActive=!1,t.$toast.open({message:"Item has been successfully reserved",type:"is-success"}),t.$store.state.domain?window.location.href=t.local+"transaction/"+e.data.reserveProduct.hash:t.$router.push({name:"transaction",params:{hash:e.data.reserveProduct.hash}})})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?(t.isReserveItemModalActive=!1,t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})):"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"Enter the Fields correctly and Re-try!",type:"is-danger",position:"is-bottom"}):(t.isReserveItemModalActive=!1,t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}))})):this.$toast.open({message:"Contact number is mandatory.",type:"is-danger",position:"is-bottom"})},addOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(y()),variables:{hash:e,discount:this.discount,daysuntiloffer:this.daysUntillOffer}}).then((function(e){e.data.addOffer.success&&(t.isOfferModalActive=!1,t.$toast.open({message:"Offer has been placed",type:"is-success"}),t.$apollo.queries.post.refetch(),t.discount=0,t.daysUntillOffer=null)})).catch((function(e){t.isOfferModalActive=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(_()),variables:{hash:e}}).then((function(e){e.data.removeOffer.success&&(t.$toast.open({message:"Offer has been removed",type:"is-success"}),t.$apollo.queries.post.refetch())})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},stockToggle:function(){var t=this;if("No"==this.inStockToggle)var e=!0;else e=!1;var s=this.post.hash;this.$apollo.mutate({mutation:d()(b()),variables:{hash:s,instock:e}}).then((function(t){})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(){this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.$route.params.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.post.comments.list,o=s.post.comments.hasmore,i=s.post.title,n=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,p=s.post.nlikes,m=s.post.liked,h=s.post.ncomments,u=s.post.permissions,d=s.post.author,g=s.post.collection,v=s.post.theme,f=s.post.themedata,b=s.post.ncollected,_=s.post.attachments,y=s.post.privacy;return s?{post:{__typename:t.post.__typename,title:i,status:n,fullstatus:r,timestamp:c,hash:l,nlikes:p,liked:m,ncomments:h,permissions:u,author:d,collection:g,theme:v,themedata:f,ncollected:b,privacy:y,attachments:_,comments:{__typename:t.post.comments.__typename,list:t.post.comments.list.concat(a),hasmore:o}}}:t}})},refreshQuery:function(){this.$apollo.queries.post.refetch()},submitComment:function(){var t=this;this.disable=!0;var e,s=((e=this.commentContent)||(e=""),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:d()(f()),variables:{posthash:this.$route.params.hash,content:s,aliashash:this.selectedCommenter.hash}}).then((function(e){e.data.addComment&&(t.commentContent="",t.ncomments++,t.offset++,t.comments=[e.data.addComment].concat(t.comments),t.disable=!1)})).catch((function(e){t.disable=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):"GraphQL error: you are banned from using this feature until Invalid Date"==e.message?t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},youtubeEmbed:function(t){if(t.match(/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/)){var e=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(e&&e.length&&e[2]){var s=e[2];return"<div class='embed-container'><iframe src=\"https://www.youtube.com/embed/".concat(s,'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>')}return""}return""},like:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(v()),variables:{hash:e}}).then((function(e){e.data.addLike.success&&(t.liked=!0,t.nlikes++)})).catch((function(e){t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},unlike:function(){var t=this;this.$apollo.mutate({mutation:d()(g()),variables:{hash:this.post.hash}}).then((function(e){e.data.removeLike.success&&(t.liked=!1,t.nlikes--)})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},editPost:function(){this.post.author.hash?this.$router.push({name:"editPost",params:{username:this.post.author.name,hash:this.post.hash,post:this.post}}):this.$router.push({name:"editPost",params:{username:this.post.author.username,hash:this.post.hash,post:this.post}})},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},created:function(){},beforeMount:function(){},mounted:function(){if(this.currentUrl=window.location.href,this.$store.state.user&&(this.currentUser=this.$store.state.user.username),this.$store.state.servertime){new Date(this.$store.state.servertime).getTime(),Date.now();var t=this.$store.state.servertime;this.$moment.now=function(){return t}}}},Object(o.a)(a,"created",(function(){})),Object(o.a)(a,"components",{"app-header":l.a,"app-comment":p.a,StarRating:h.a}),a),N=(s(354),s(22)),I=Object(N.a)(L,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("no-ssr",[s("app-header")],1),t._v(" "),s("div",{attrs:{id:"naya-content"}},[t.post&&t.post.author?s("section",{staticClass:"hero is-medium"},[s("div",{staticClass:"hero-body padding-RL-0-px"},[s("div",{staticClass:"columns is-gapless"},[s("div",{staticClass:"column is-1 is-hidden-mobile"}),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"media"},[s("figure",{staticClass:"media-left"},[s("nuxt-link",{staticClass:"image is-48x48",attrs:{to:t.post.author.hash?{name:"singleCollection",params:{hash:t.post.author.hash}}:{name:"user",params:{username:t.post.author.username}}}},[s("img",{staticClass:"is-rounded padding-8-px border-1-px-eee has-background-white",attrs:{src:t.post.author&&t.post.author.image?t.server+"attachments.img/sm/"+t.post.author.image.hash:t.post.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})])],1),t._v(" "),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("div",[s("nuxt-link",{attrs:{to:t.post.author.hash?{name:"singleCollection",params:{hash:t.post.author.hash}}:{name:"user",params:{username:t.post.author.username}}}},[s("b",[t._v(t._s(t.post.author.name))]),t._v(" "),t.post.author.username?s("span",{staticClass:"margin-left-5-px"},[t._v("@"+t._s(t.post.author.username))]):t._e()])],1),t._v(" "),s("span",{staticClass:"has-text-grey-light is-size-6-half"},[t._v(t._s(t._f("moment")(t.post.timestamp,"MMMM Do YYYY"))+" ")]),t._v(" "),s("span",{staticClass:"has-text-grey-light"},[s("b-tooltip",{attrs:{label:"private"==t.post.privacy?"only me":"locked_to_collection"==t.post.privacy?"only collection members":"public",position:"is-top",type:"is-info"}},[s("b-icon",{attrs:{icon:"private"==t.post.privacy?"lock":"locked_to_collection"==t.post.privacy?"account-multiple":"earth",size:"is-small"}})],1)],1)])]),t._v(" "),s("div",{staticClass:"media-right"},[s("no-ssr",[s("b-dropdown",{staticClass:"is-right"},[s("button",{staticClass:"button is-white has-text-grey-dark",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{icon:"dots-horizontal"}})],1),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{attrs:{custom:""}},[s("div",{staticClass:"padding-15-px"},[t.post.collection?t._e():s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"private"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){0==t.post.ncollected?t.postPrivacy("private"):t.openPrivatePrivacyDialog()}}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"private"==t.post.privacy?"has-text-weight-bold":""},[t._v("Only me")])]),t._v(" "),t.post.collection?s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"locked_to_collection"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:t.openLocktoCollectionDialog}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"locked_to_collection"==t.post.privacy?"has-text-weight-bold":""},[t._v("Locked to Collection")])]):t._e()])]):t._e(),t._v(" "),1==t.post.permissions.write?s("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.editPost}},[s("a",[s("b-icon",{attrs:{icon:"square-edit-outline",size:"is-small"}}),t._v(" Edit")],1)]):t._e(),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.openRemovePostDialog}},[s("a",[s("b-icon",{attrs:{icon:"delete",size:"is-small"}}),t._v(" Delete")],1)]):t._e(),t._v(" "),t.post.permissions&&1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isSocialShareModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"share-variant",size:"is-small"}}),t._v(" Share")],1)]):t._e(),t._v(" "),1==t.post.permissions.write&&"shop"==t.post.theme&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isOfferModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"tag ",size:"is-small"}}),t._v(" Add Offer")],1)]):t._e(),t._v(" "),0==t.post.permissions.write?s("b-dropdown-item",{on:{click:function(e){null!=t.$store.state.user?t.isFlagPostModalActive=!0:t.loginMessage()}}},[s("a",[s("b-icon",{attrs:{icon:"flag",size:"is-small"}}),t._v(" Flag")],1)]):t._e()],1)],1)],1)]),t._v(" "),s("div",{staticClass:"columns margin-top-20-px"},["shop"==t.post.theme?s("div",{staticClass:"column is-two-fifths"},[s("no-ssr",[s("carousel",{attrs:{perPage:1,scrollPerPage:!0}},t._l(t.post.attachments,(function(e,a){return s("slide",{key:a},[s("figure",{staticClass:"image is-square",on:{click:function(s){return t.openImageModal(e)}}},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+e.hash}})])])})),1)],1)],1):t._e(),t._v(" "),s("article",{staticClass:"column",class:t.post.theme&&"article"!=t.post.theme?"":"is-article"},[s("h1",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold margin-bottom-15-px"},[t._v(t._s(t.post.title))]),t._v(" "),"shop"==t.post.theme&&t.post.themedata?s("div",{staticClass:"margin-top-20-px"},[s("p",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Rs. "),s("b",{staticClass:"has-text-danger"},[t._v(t._s(t.post.themedata.total.toLocaleString("en-IN")))])]),t._v(" "),t.post.themedata.tax?s("p",{staticClass:"has-text-grey"},[t._v("Includes "),s("span",{staticClass:"has-text-grey-dark"},[t._v(t._s(t.post.themedata.tax)+"%")]),t._v(" tax")]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t.post.themedata.instock||1==t.post.permissions.write?t._e():s("div",{staticClass:"has-text-danger has-text-weight-bold"},[t._v("Out of stock")]),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("div",[t._v("\n                                 In Stock:\n                                 "),s("b-switch",{attrs:{"true-value":"Yes","false-value":"No"},nativeOn:{click:function(e){return t.stockToggle(e)}},model:{value:t.inStockToggle,callback:function(e){t.inStockToggle=e},expression:"inStockToggle"}},[t._v("\n                                    "+t._s(t.inStockToggle)+"\n                                 ")])],1):t._e()]),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime?s("div",{staticClass:"margin-top-20-px"},[s("span",[t._v("Discount offer of upto "),s("b",[t._v(t._s(t.post.themedata.discount)+"%")])]),s("br"),t._v(" "),s("span",{staticClass:"has-text-link"},[t._v("(ends "+t._s(t._f("moment")(t.post.themedata.discountuntil,"from","now"))+")")]),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("span",{staticClass:"tag is-danger margin-left-10-px"},[t._v("\n                                 Remove\n                                 "),s("button",{staticClass:"delete is-small",on:{click:t.removeOffer}})]):t._e()]):t._e(),t._v(" "),t.post.themedata.instock&&1!=t.post.permissions.write?s("div",{staticClass:"margin-top-20-px"},[s("button",{staticClass:"button is-link",on:{click:function(e){null!=t.$store.state.user?t.openReserveModal():t.loginMessage()}}},[t._v("Reserve")]),t._v(" "),"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.price?s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReserveItemModalActive,width:350,scroll:"keep",onCancel:t.closeReserveModal},on:{"update:active":function(e){t.isReserveItemModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("b",[t._v(t._s(t.post.title))]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("p",[s("span",[t._v("Quantity: ")]),t._v(" "),s("span",{staticClass:"select-quantity"},[s("span",{on:{click:t.decreaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"minus-circle-outline"}})],1),t._v(" "+t._s(t.itemQuantity)+"\n                                          "),s("span",{on:{click:t.increaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"plus-circle-outline"}})],1)])]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("span",{attrs:{set:t.$discount=0}}),t._v(" "),s("span",{attrs:{set:t.$tax=0}}),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$price=t.itemQuantity*t.post.themedata.price}},[s("span",[t._v("Price : ")]),t._v(" "),s("b",[t._v(t._s(t.itemQuantity)+" x "+t._s(t.post.themedata.price.toLocaleString("en-IN")))])]),t._v(" "),t.coins>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$discount=t.coins*this.wallet.rates.coins}},[s("span",[t._v("Discount : ")]),t._v(" "),s("b",[t._v(t._s(t.$discount.toLocaleString("en-IN"))+" ")]),t._v(" "),s("span",{staticClass:"margin-left-10-px is-size-7 has-text-grey"},[t._v("("+t._s(t.coins)+" coins)")])]):t._e(),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$total=t.$price-t.$discount|0}},[s("span",[t._v("Total : ")]),t._v(" "),s("b",[t._v(t._s(t.$total.toLocaleString("en-IN")))])]),t._v(" "),t.post.themedata.tax?s("p",{staticClass:"is-size-5",attrs:{set:t.$tax=Math.round(t.$total*(0|t.post.themedata.tax)/100)}},[s("span",[t._v("Tax ("+t._s(t.post.themedata.tax)+"%) : ")]),t._v(" "),s("b",[t._v(t._s(t.$tax.toLocaleString("en-IN")))])]):t._e(),t._v(" "),t.$tax&&t.$tax>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$grandtotal=t.$total+t.$tax|0}},[s("b",[t._v("Grand total : ")]),t._v(" "),s("b",[t._v(t._s(t.$grandtotal.toLocaleString("en-IN"))+" ")])]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       By when can you pick the product up from the shop?\n                                       "),t._v(" "),s("b-select",{attrs:{placeholder:"Select pick up duration"},model:{value:t.itemPickUpDuration,callback:function(e){t.itemPickUpDuration=e},expression:"itemPickUpDuration"}},t._l(14,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v("\n                                                "+t._s(e)+" days\n                                             ")])})),0)],1),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       Use coins to claim discounts?"),s("br"),t._v(" "),s("i",[t._v("You can use total of "+t._s(t.usableCoins)+" coins for this product")]),s("br"),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"coins","currency-symbol-position":"suffix",placeholder:"... coins","empty-value":0,precision:0,separator:",",min:0,max:t.usableCoins},model:{value:t.coins,callback:function(e){t.coins=t._n(e)},expression:"coins"}})],1):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[s("b-field",{attrs:{label:"Contact number:"}},[s("b-input",{staticClass:"inline has-text-dark has-text-weight-bold width-80-percent",attrs:{type:"tel",placeholder:"ex. 98510..."},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1)],1),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("button",{staticClass:"button is-dark is-fullwidth margin-bottom-20-px",on:{click:t.reserveItem}},[t._v("Confirm")])])]):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"is-divider margin-top-20-px margin-bottom-10-px"}),t._v(" "),t.post.themedata.stars&&t.post.themedata.stars.rating?s("div",[s("div",{attrs:{itemtype:"http://schema.org/Product",itemscope:""}},[s("meta",{attrs:{itemprop:"mpn",content:t.post.hash}}),t._v(" "),s("meta",{attrs:{itemprop:"name",content:t.post.title}}),t._v(" "),t._l(t.post.attachments,(function(e,a){return s("link",{key:a,attrs:{itemprop:"image",href:t.server+"attachments.img/sm/"+e.hash}})})),t._v(" "),s("meta",{attrs:{itemprop:"description",content:t.post.status}}),t._v(" "),s("div",{attrs:{itemprop:"aggregateRating",itemtype:"http://schema.org/AggregateRating",itemscope:""}},[s("meta",{attrs:{itemprop:"reviewCount",content:t.post.themedata.stars.n}}),t._v(" "),s("meta",{attrs:{itemprop:"ratingValue",content:t.post.themedata.stars.rating}})]),t._v(" "),s("meta",{attrs:{itemprop:"sku",content:t.post.hash}})],2)]):t._e(),t._v(" "),t.post.themedata.stars&&t.post.themedata.stars.rating?s("no-ssr",[s("div",{staticClass:"pointer has-text-grey-light margin-top-10-px margin-bottom-20-px",on:{click:function(e){t.isReviewModalActive=!0}}},[s("star-rating",{attrs:{"star-size":18,"read-only":!0,"show-rating":!1,"active-color":"gold",padding:-2,rating:t.post.themedata.stars.rating}}),t._v(" Rated "+t._s(t.post.themedata.stars.rating)+" "+t._s(1==t.post.themedata.stars.rating?"star":"stars")+" by "+t._s(t.post.themedata.stars.n)+" "+t._s(1==t.post.themedata.stars.n?"buyer":"buyers")+"\n                              ")],1)]):t._e()],1):t._e(),t._v(" "),t.post.status&&!t.post.fullstatus?s("div",{staticClass:"is-post-fullview margin-top-10-px is-size-5 is-size-6-mobile",domProps:{innerHTML:t._s(t.post.status)}}):t.post.fullstatus?s("div",{staticClass:"is-post-fullview margin-top-10-px is-size-5 is-size-6-mobile",domProps:{innerHTML:t._s(t.post.fullstatus.replace(/\{\/\/\}/g,t.server+"attachments.img/lg"))}}):t._e(),t._v(" "),"link"==t.post.theme?s("div",{staticClass:"card margin-top-20-px"},[s("div",{staticClass:"card-image has-background-dark",domProps:{innerHTML:t._s(t.youtubeEmbed(t.post.themedata.url))}}),t._v(" "),s("div",{staticClass:"card-content has-background-white-bis"},[s("a",{attrs:{href:t.post.themedata.url,target:"_blank"}},[s("div",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold",domProps:{innerHTML:t._s(t.post.themedata.title)}}),t._v(" "),s("div",{staticClass:"is-size-5 is-size-6-mobile margin-top-5-px",domProps:{innerHTML:t._s(t.post.themedata.description)}})])])]):t._e()])]),t._v(" "),t.post.theme&&"status"!=t.post.theme?t._e():s("div",[t.post.attachments&&t.post.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.post.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.post.attachments,(function(e,a){return s("div",{key:a,class:"grid-item "+(0===a&&(t.post.attachments.length>2||1===t.post.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[0===a&&(t.post.attachments.length>2||1===t.post.attachments.length)?s("figure",{staticClass:"image",on:{click:function(s){return t.openImageModal(e)}}},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/lg/"+e.hash}})]):s("figure",{staticClass:"image border-radius-5-px is-square",style:{"background-image":"url('"+t.server+"attachments.img/md/"+e.hash+"')","background-size":"cover","background-position":"center"},on:{click:function(s){return t.openImageModal(e)}}})])}))],2):t._e()]),t._v(" "),s("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},t._l(t.post.tags,(function(e,a){return s("nuxt-link",{key:a,attrs:{set:t.$linkparams="shop"==t.post.theme?{tag:e,theme:"shop"}:{tag:e},to:{name:"popular",query:t.$linkparams}}},[s("b-tag",{staticClass:"padding-10-px margin-right-5-px has-text-grey",attrs:{type:"is-light"}},[s("b-icon",{attrs:{icon:"tag-outline",size:"is-small"}}),t._v(" "+t._s(e))],1)],1)})),1),t._v(" "),s("div",{staticClass:"clear-both"}),t._v(" "),s("div",{staticClass:"margin-top-50-px clear-both"},[t.liked?s("button",{staticClass:"button margin-left--5-px-imp is-white has-text-danger",on:{click:function(e){null!=t.$store.state.user?t.unlike():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-marked",size:""}}),t._v(" "),s("span",[t._v("Liked")])],1):s("button",{staticClass:"button margin-left--5-px-imp is-white has-text-grey-dark",on:{click:function(e){null!=t.$store.state.user?t.like():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-blank",size:""}}),t._v(" "),s("span",[t._v("Like")])],1),t._v(" "),s("button",{staticClass:"button is-white has-text-grey-dark no-action"},[s("b-icon",{attrs:{icon:"heart",size:""}}),t._v(" "),s("span",[t._v(t._s(t.nlikes))])],1),t._v(" "),t.$store.state.user&&t.post&&"public"==t.post.privacy?s("button",{staticClass:"button is-text is-pulled-right",on:{click:function(e){t.isAddPostToCollectionModalActive=!0}}},[s("b-icon",{attrs:{icon:"bookmark-plus has-text-grey-light"}})],1):t._e(),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isAddPostToCollectionModalActive,width:300,scroll:"keep"},on:{"update:active":function(e){t.isAddPostToCollectionModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-20-px"},[t._v("\n                              Enter the collection you want to add this post to, select from the dropdown list and press "),s("span",{staticClass:"tag"},[t._v("+ Add")])]),t._v(" "),s("b-autocomplete",{attrs:{data:t.collections,field:"name",placeholder:"Enter Collection Name"},on:{input:t.getCollections,select:function(e){return t.selected=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[e.option&&e.option.name?s("div",{staticClass:"media padding-5-px"},[s("figure",{staticClass:"image media-left is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:e.option.logo&&e.option.logo.hash?t.server+"attachments.img/xs/"+e.option.logo.hash:t.server+"public/images/xs/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                       "+t._s(e.option.name)+"  \n                                    ")])]):t._e()]}}],null,!1,809104614),model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}}),t._v(" "),s("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:t.addToCollection}},[s("b-icon",{attrs:{icon:"plus",size:"is-small"}}),t._v(" Add")],1),t._v(" "),s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:function(e){t.isAddPostToCollectionModalActive=!1}}},[t._v("Cancel")])])],1)]),t._v(" "),s("no-ssr",[s("div",{staticClass:"margin-top-50-px"},[t.ncomments?s("p",{staticClass:"margin-bottom-10-px has-text-weight-bold is-size-6-half has-text-grey-light"},[t._v("Comments ("+t._s(t.ncomments)+")")]):t._e(),t._v(" "),this.$store.state.user?s("b-dropdown",{ref:"dropup",staticClass:"is-up is-right is-pulled-right dropdown-no-headers margin-bottom-5-px"},[s("button",{staticClass:"button is-text is-small",attrs:{slot:"trigger"},slot:"trigger"},[t.selectedCommenter&&t.selectedCommenter.hash?s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.selectedCommenter.logo&&t.selectedCommenter.logo.hash?t.server+"attachments.img/xs/"+t.selectedCommenter.logo.hash:t.server+"public/images/md/empty_cl.png"}})]):s("div",{staticClass:"is-pulled-left"},[s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("span",{staticClass:"margin-left-5-px"},[t._v("@"+t._s(t.$store.state.user.username))])]),t._v(" "),s("b-icon",{attrs:{icon:"menu-up-outline",size:"is-small"}})],1),t._v(" "),s("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[s("div",[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("\n                                          Comment as:\n                                       ")])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp",on:{click:t.selectUserAsCommenter}},[s("div",{staticClass:"has-background-white-bis border-bottom-1-px-f8f8f8 padding-10-px pointer"},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&!t.selectedCommenter.hash?"sender-selected":"",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&!t.selectedCommenter.hash?"has-text-weight-bold":""},[t._v("\n                                                   @"+t._s(t.$store.state.user.username)+"\n                                                ")])])])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp"},[t._l(t.ownCollections,(function(e,a){return s("div",{key:a,staticClass:"border-bottom-1-px-f8f8f8 padding-10-px pointer",on:{click:function(s){return t.selectCommenter(e)}}},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&e.logo&&t.selectedCommenter.logo&&t.selectedCommenter.logo.hash==e.logo.hash?"sender-selected":"",attrs:{src:e.logo&&e.logo.hash?t.server+"attachments.img/xs/"+e.logo.hash:t.server+"public/images/md/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&t.selectedCommenter.hash==e.hash?"has-text-weight-bold":""},[t._v("\n                                                "+t._s(e.name)+"\n                                             ")])])])})),t._v(" "),1==t.hasmoreOwnCollections?s("div",{staticClass:"has-text-centered padding-10-px margin-top-10-px margin-bottom-10-px"},[s("a",{staticClass:"button is-rounded is-small",class:t.loadingMoreOwnCollection?"is-loading":"",on:{click:t.loadMoreOwnCollections}},[t._v("load more")])]):t._e()],2)])])],1):t._e(),t._v(" "),this.$store.state.user?s("span",{staticClass:"is-pulled-right margin-top-5-px is-size-7 has-text-grey-light"},[t._v("comment as:")]):t._e(),t._v(" "),s("textarea-autosize",{ref:"comment",staticClass:"textarea",attrs:{rows:"2",placeholder:"Write a comment ...",maxlength:"1000"},model:{value:t.commentContent,callback:function(e){t.commentContent="string"==typeof e?e.trim():e},expression:"commentContent"}}),t._v(" "),t.commentContent.length>0?s("div",{staticClass:"margin-top-20-px has-text-right"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.$store.state.user?t.submitComment():t.loginMessage()}}},[t._v("Submit")])]):t._e(),t._v(" "),t.comments?s("div",{staticClass:"margin-top-20-px"},t._l(t.comments,(function(e){return s("div",{key:e.hash},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1)})),0):t._e(),t._v(" "),t.post.comments&&1==t.post.comments.hasmore?s("center",[s("button",{staticClass:"button is-clear is-small",on:{click:t.loadMore}},[t._v("LOAD MORE")])]):t._e()],1)])],1)]),t._v(" "),s("div",{staticClass:"column is-1 is-hidden-mobile"})])])]):s("div",{staticClass:"hero is-medium"},[s("div",{staticClass:"hero-body padding-RL-0-px"},[s("div",{staticClass:"columns is-gapless"},[s("div",{staticClass:"column is-1 is-hidden-mobile"}),t._v(" "),s("div",{staticClass:"column"},[s("content-placeholders",{staticClass:"is-half-width",attrs:{rounded:!0}},[s("content-placeholders-img"),t._v(" "),s("content-placeholders-heading",{attrs:{img:!0}}),t._v(" "),s("content-placeholders-text",{attrs:{lines:0}})],1),t._v(" "),s("content-placeholders",[s("content-placeholders-heading"),t._v(" "),s("content-placeholders-text",{attrs:{lines:3}})],1)],1),t._v(" "),s("div",{staticClass:"column is-1 is-hidden-mobile"})])])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagPostModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagPostModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Flagging post\n            ")]),t._v("\n            You are about to flag a post. Please select a category.\n         ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagPost}},[t._v("Done")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReviewModalActive,width:500,scroll:"keep"},on:{"update:active":function(e){t.isReviewModalActive=e}}},[t.post&&t.post.reviews&&t.post.reviews.list&&t.post.reviews.list.length>0?s("section",{staticClass:"width-auto"},[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),t._l(t.reviews,(function(e,a){return s("div",{key:a,staticClass:"margin-top-20-px"},[s("div",{staticClass:"padding-10-px"},[null!=t.$store.state.user&&e.author.username==t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.removeReview(e.hash)}}},[s("b-icon",{attrs:{icon:"delete"}})],1):t._e(),t._v(" "),null!=t.$store.state.user&&e.author.username!=t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.openProductReviewFlagModal(e.hash)}}},[s("b-icon",{attrs:{icon:"flag"}})],1):t._e(),t._v(" "),s("no-ssr",[s("star-rating",{attrs:{"star-size":24,"show-rating":!1,"active-color":"#4da6ff",padding:-2,"read-only":!0,rating:e.stars}})],1),t._v(" "),s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-top-10-px"},[t._v("\n                  "+t._s(e.content)+"\n               ")]),t._v(" "),s("div",{staticClass:"margin-top-10-px is-size-7 is-italic"},[s("span",{staticClass:"is-pulled-left margin-right-5-px"},[t._v("By:")]),t._v(" "),s("nuxt-link",{attrs:{to:{name:"user",params:{username:e.author.username}}}},[s("b",[t._v(t._s(e.author.name))])])],1)],1)])})),t._v(" "),1==t.hasmoreReviews?s("center",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear",class:t.loadingMoreReviews?"is-loading":"",on:{click:t.loadMoreReviews}},[t._v("load more")])]):t._e()],2):s("section",[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),s("p",{staticClass:"has-text-grey margin-top-20-px"},[t._v("No Reviews Yet")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagProductReviewModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagProductReviewModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Flagging Product Review\n            ")]),t._v("\n            You are about to flag a product review. Please select a category.\n         ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Review is explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagProductReview}},[t._v("Done")])])]),t._v(" "),s("b-modal",{attrs:{active:t.isImageModalActive},on:{"update:active":function(e){t.isImageModalActive=e}}},[s("div",{staticClass:"image-modal-container"},[s("div",{staticClass:"image-box",style:{background:"url('"+t.server+"attachments.img/lg/"+t.imagehash+"')","background-repeat":"no-repeat","background-size":"contain","background-position":"center"},on:{click:function(e){t.isImageModalActive=!1}}})])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isOfferModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isOfferModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",[s("b",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Adding offer to:")]),t._v(" "),t.post?s("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.post.title))]):t._e()]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("span",{staticClass:"margin-right-10-px"},[t._v("How much discount do you want to offer?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"%","currency-symbol-position":"suffix",placeholder:"... %","empty-value":0,precision:0,separator:",",min:0,max:100},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}}),t._v(" "),s("p",{staticClass:"margin-top-20-px"},[s("span",{staticClass:"margin-right-10-px"},[t._v("How many days do you want this offer to be valid for?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"days","currency-symbol-position":"suffix",placeholder:"... days","empty-value":0,precision:0,separator:",",min:0,max:30},model:{value:t.daysUntillOffer,callback:function(e){t.daysUntillOffer=t._n(e)},expression:"daysUntillOffer"}})],1)],1),t._v(" "),s("button",{staticClass:"button is-dark margin-top-30-px margin-bottom-20-px",on:{click:t.addOffer}},[t._v("Done")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isSocialShareModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isSocialShareModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Share your post\n            ")])]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("p",{staticClass:"margin-top-10-px has-text-centered"},[s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://www.facebook.com/sharer/sharer.php?u="+t.currentUrl}},[s("b-icon",{attrs:{icon:"facebook has-text-link",size:"is-large"}})],1),t._v(" "),s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://twitter.com/intent/tweet?url="+t.currentUrl}},[s("b-icon",{attrs:{icon:"twitter has-text-info",size:"is-large"}})],1)])])])])],1)}),[],!1,null,"56fcfbae",null).exports,Q=s(285);function j(){var t=Object(i.a)(["\n            mutation removeLike($hash: String!) {\n              removeLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return j=function(){return t},t}function U(){var t=Object(i.a)(["\n            mutation addLike($hash: String!) {\n              addLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return U=function(){return t},t}function D(){var t=Object(i.a)(["\n            mutation addComment($posthash: String!, $content: String!, $aliashash: String) {\n              addComment(posthash: $posthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                timestamp\n                nreplies\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return D=function(){return t},t}function F(){var t=Object(i.a)(["\n            mutation toggleInstock($hash: String!, $instock: Boolean!) {\n              toggleInstock(hash: $hash, instock: $instock) {\n                success\n              }\n            }\n          "]);return F=function(){return t},t}function G(){var t=Object(i.a)(["\n            mutation removeOffer($hash: String!) {\n              removeOffer(hash: $hash) {\n                success\n              }\n            }\n          "]);return G=function(){return t},t}function Y(){var t=Object(i.a)(["\n            mutation addOffer(\n              $hash: String!\n              $discount: Percentage!\n              $daysuntiloffer: Int!\n            ) {\n              addOffer(\n                hash: $hash\n                discount: $discount\n                daysuntiloffer: $daysuntiloffer\n              ) {\n                success\n              }\n            }\n          "]);return Y=function(){return t},t}function E(){var t=Object(i.a)(["\n            mutation reserveProduct(\n              $hash: String!\n              $quantity: Int!\n              $daysuntilpickup: Int!\n              $coins: Int\n              $phone: Phonenumber!\n            ) {\n              reserveProduct(\n                hash: $hash\n                quantity: $quantity\n                daysuntilpickup: $daysuntilpickup\n                coins: $coins\n                phone: $phone\n              ) {\n                pin\n                hash\n              }\n            }\n          "]);return E=function(){return t},t}function H(){var t=Object(i.a)(["\n               query wallet {\n               wallet{\n                  coins\n                  rates\n               }\n               }\n            "]);return H=function(){return t},t}function B(){var t=Object(i.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return B=function(){return t},t}function V(){var t=Object(i.a)(["\n            mutation removePost($hash: String!) {\n              removePost(hash: $hash) {\n                success\n              }\n            }\n          "]);return V=function(){return t},t}function W(){var t=Object(i.a)(["\n            mutation addPostToCollection(\n              $collectionhash: String!\n              $hash: String!\n            ) {\n              addPostToCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return W=function(){return t},t}function J(){var t=Object(i.a)(["\n            query searchCollections($page: Int, $q: String!) {\n              searchCollections(page: $page, q: $q) {\n                hasmore\n                list {\n                  name\n                  hash\n                  logo {\n                     hash\n                  }\n                }\n              }\n            }\n          "]);return J=function(){return t},t}function K(){var t=Object(i.a)(["\n              mutation changePostPrivacy(\n                $hash: String!\n                $privacy: PostPrivacy!\n              ) {\n                changePostPrivacy(hash: $hash, privacy: $privacy) {\n                  success\n                }\n              }\n            "]);return K=function(){return t},t}function X(){var t=Object(i.a)(["\n                     query listOwnedCollections($page: Int, $sortby: SortBy ) {\n                        listOwnedCollections(page: $page, sortby : $sortby) {\n                           hasmore\n                           list {\n                           name\n                           hash\n                           logo{\n                                 hash\n                           }\n                           }\n                        }\n                     }\n                     "]);return X=function(){return t},t}function Z(){var t=Object(i.a)(["\n            mutation removeProductReview($hash: String!) {\n              removeProductReview(hash: $hash) {\n                success\n              }\n            }\n          "]);return Z=function(){return t},t}function tt(){var t=Object(i.a)(["\n            query post($hash: String!, $page: Int) {\n               post(hash: $hash) {\n                 reviews(page : $page) {\n                     hasmore\n                         list {\n                             hash\n                             stars\n                             content\n                             timestamp\n                             author {\n                                 username\n                                 name\n                             }   \n                         }\n                 }\n            }\n        }\n        "]);return tt=function(){return t},t}function et(){var t=Object(i.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return et=function(){return t},t}function st(){var t=Object(i.a)(["\n            query conversations {\n               conversations {\n                  hasmore\n                  list {\n                     hash\n                     seen\n                     }\n               }\n            }\n            "]);return st=function(){return t},t}function at(){var t=Object(i.a)(["\n            query inbox {\n               inbox {\n                  nunseen\n               }\n            }\n            "]);return at=function(){return t},t}function ot(){var t=Object(i.a)(["\n        query listOwnedCollections($page: Int, $sortby: SortBy ) {\n          listOwnedCollections(page: $page, sortby : $sortby) {\n            hasmore\n            list {\n              name\n              hash\n              logo{\n                  hash\n              }\n            }\n          }\n        }\n      "]);return ot=function(){return t},t}function it(){var t=Object(i.a)(["\n        query post($hash: String!, $page: Int, $offset : Int) {\n          post(hash: $hash) {\n            author {\n              username\n              name\n              hash\n              image{\n                  hash\n              }\n            }\n            timestamp\n            title\n            tags\n            status\n            fullstatus\n            hash\n            nlikes\n            liked\n            ncomments\n            ncollected\n            attachments{\n                hash\n            }\n            permissions\n            privacy\n            theme\n            themedata\n            collection {\n              name\n              hash\n              logo {\n                  hash\n               }\n            }\n            reviews{\n               hasmore\n               list{\n                  hash\n                  stars\n                  content\n                  permissions\n                  newavg\n                  author{\n                     name\n                     username\n                     hash\n                     image{\n                        hash\n                     }\n                  }\n               }\n            }\n            comments(page: $page, offset: $offset) {\n              hasmore\n              list {\n                timestamp\n                nupvotes\n                nreplies\n                hash\n                content\n                upvoted\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n            domain {\n               hash\n               url\n            }\n          }\n        }\n      "]);return it=function(){return t},t}n.default.use(c.a);var nt,rt=(q={apollo:{post:{query:d()(it()),variables:function(){return{hash:this.postHash,page:1,offset:0}},update:function(t){if(t.post){if(null!=t.post.domain)return this.liked=t.post.liked,this.nlikes=t.post.nlikes,this.ncomments=t.post.ncomments,t.post.comments&&t.post.comments.list&&t.post.comments.list.length>0&&(this.comments=t.post.comments.list),t.post&&"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.instock?this.inStockToggle="Yes":this.inStockToggle="No",t.post.reviews&&t.post.reviews.list&&(this.reviews=t.post.reviews.list,this.hasmoreReviews=t.post.reviews.hasmore),t.post;this.$router.replace({name:"redirect",params:{from:"domainPost",postHash:t.post.hash}})}},error:function(t){t.message=="GraphQL error: could not find post/"+this.postHash&&this.$router.replace({name:"error404"})}},usersCollections:{query:d()(ot()),prefetch:!1,skip:function(){return!this.$store.state.user},variables:function(t){return{page:1}},update:function(t){if(t.listOwnedCollections)return this.ownCollections=t.listOwnedCollections.list,this.hasmoreOwnCollections=t.listOwnedCollections.hasmore,t.listOwnedCollections}},inbox:{query:d()(at()),prefetch:!1,skip:function(){return null==this.$store.state.user},update:function(t){return t&&t.inbox&&t.inbox.nunseen&&(this.notiNumber=t.inbox.nunseen),t.inbox}},conversations:{query:d()(st()),prefetch:!1,skip:function(){return null==this.$store.state.user},update:function(t){return t&&t.conversations&&t.conversations.list&&t.conversations.list.length>0&&(t.conversations.list[0].seen||(this.messageNumber=!0)),t.conversations}}},data:function(){return Object(o.a)({server:"https://api.naya.com.np/",local:"https://naya.com.np/",hash:this.$route.params.hash,post:{},liked:null,nlikes:null,commentContent:"",comments:[],ncomments:null,offset:0,currentUser:null,pageNumber:1,isReserveItemModalActive:!1,itemQuantity:1,itemPickUpDuration:1,isOfferModalActive:!1,discount:0,daysUntillOffer:null,inStockToggle:"Yes",discountDate:null,interval:null,isFlagPostModalActive:!1,flagType:null,collectionName:"",collections:[],selected:{},wallet:{},coins:0,usableCoins:null,isAddPostToCollectionModalActive:!1,currentUrl:null,self:null,ownCollections:[],OwnCollectionPageNumber:1,hasmoreOwnCollections:!1,selectedCommenter:{},loadingMoreOwnCollection:!1,reviews:[],hasmoreReviews:!1,isReviewModalActive:!1,loadingMoreReviews:!1,reviewsPageNumber:1,isFlagProductReviewModalActive:!1,reviewHash:null,isImageModalActive:!1,imagehash:null,notiNumber:0,messageNumber:!1,disable:!1,contact:null,isSocialShareModalActive:!1},"currentUrl",null)},head:function(){return{title:this.post&&this.post.title?"".concat(this.post.title," ").concat(this.post&&"shop"==this.post.theme?"- get the best price in Nepal":""):"Naya",meta:[{hid:"description",name:"description",content:this.post&&this.post.status?this.post.status.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:title",property:"og:title",content:this.post&&this.post.title?this.post.title:"Naya"},{hid:"og:description",property:"og:description",content:this.post&&this.post.status?this.post.status.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:image",property:"og:image",content:this.post&&this.post.attachments&&this.post.attachments.length>0?this.server+"attachments.img/lg/"+this.post.attachments[0].hash:this.post&&this.post.author&&this.post.author.image?this.server+"attachments.img/lg/"+this.post.author.image.hash:this.server+"public/images/lg/empty_cl.png"}]}},props:{postHash:{type:String,required:!0},routeEnter:{type:String}},watch:{routeEnter:function(t){this.$apollo.queries.post.refetch(),this.$apollo.queries.conversations.refetch()}},methods:{openProductReviewFlagModal:function(t){this.reviewHash=t,this.isFlagProductReviewModalActive=!0},flagProductReview:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:d()(et()),variables:{hash:this.reviewHash,type:this.flagType,documenttype:"post_shop_review"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Review has been successfully flagged!!",type:"is-success"}),t.isFlagProductReviewModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this review",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},loadMoreReviews:function(){var t=this;this.reviewsPageNumber++,this.loadingMoreReviews=!0,this.$apollo.query({query:d()(tt()),variables:{hash:this.postHash,page:this.reviewsPageNumber}}).then((function(e){t.reviews=t.reviews.concat(e.data.post.reviews.list),t.hasmoreReviews=e.data.post.reviews.hasmore,t.loadingMoreReviews=!1})).catch((function(e){t.loadingMoreReviews=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeReview:function(t){var e=this;this.$apollo.mutate({mutation:d()(Z()),variables:{hash:t}}).then((function(t){e.$apollo.queries.post.refetch(),e.isReviewModalActive=!1})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},selectUserAsCommenter:function(){this.selectedCommenter={},this.$refs.dropup.toggle()},selectCommenter:function(t){this.selectedCommenter&&this.selectedCommenter.hash&&this.selectedCommenter.hash==t.hash||(this.selectedCommenter=t),this.$refs.dropup.toggle()},loadMoreOwnCollections:function(){var t=this;this.OwnCollectionPageNumber++,this.loadingMoreOwnCollection=!0,this.$apollo.query({query:d()(X()),variables:{page:this.OwnCollectionPageNumber}}).then((function(e){t.ownCollections=t.ownCollections.concat(e.data.listOwnedCollections.list),t.hasmoreOwnCollections=e.data.listOwnedCollections.hasmore,t.loadingMoreOwnCollection=!1})).catch((function(e){t.loadingMoreOwnCollection=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openImageModal:function(t){this.isImageModalActive=!0,this.imagehash=t.hash},logOut:function(){this.$apolloHelpers.onLogout(),this.$cookies.removeAll(),window.location.href=this.local+"logout?redirect_uri="+this.currentUrl},closeReserveModal:function(){this.coins=0,this.itemPickUpDuration=1,this.itemQuantity=1,this.contact=null},decreaseNcomments:function(){this.ncomments--,this.offset--},openLocktoCollectionDialog:function(){var t=this;this.$dialog.confirm({title:"Lock Post to Collection",message:"Are you sure you want to <b>lock</b> this post to collection?",cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("locked_to_collection")}})},openPrivatePrivacyDialog:function(){var t=this;this.$dialog.confirm({title:"Make post private",message:"This post has been collectedin ".concat(this.post.ncollected," collections. Are you sure you want to make this post <b>private</b>?"),cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("private")}})},postPrivacy:function(t){var e=this;1==this.post.permissions.write&&null!=this.$store.state.user&&this.$apollo.mutate({mutation:d()(K()),variables:{hash:this.post.hash,privacy:t}}).then((function(t){t.data.changePostPrivacy.success&&e.$apollo.queries.post.refetch()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},getCollections:function(){var t=this;this.$apollo.query({query:d()(J()),variables:{q:this.collectionName}}).then((function(e){t.collections=[],e.data.searchCollections&&e.data.searchCollections.list.length>0?e.data.searchCollections.list.forEach((function(e){return t.collections.push(e)})):e.data.searchCollections&&0==e.data.searchCollections.list.length&&(t.collections=[])})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addToCollection:function(){var t=this,e=this.selected.hash,s=this.post.hash;this.$apollo.mutate({mutation:d()(W()),variables:{hash:s,collectionhash:e}}).then((function(e){e.data.addPostToCollection.success&&t.$toast.open({message:"Post has been Added",type:"is-success"}),t.isAddPostToCollectionModalActive=!1,t.collectionName="",t.$apollo.queries.post.refetch()})).catch((function(e){t.isAddPostToCollectionModalActive=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"The collection may not be available. Please select from the list",type:"is-danger",position:"is-bottom"}):"GraphQL error: collection access denied"==e.message?t.$toast.open({message:"Access Denied",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRemovePostDialog:function(){var t=this;this.$dialog.confirm({title:"Remove Post",message:"Are you sure you want to <b>delete</b> this post?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removePost()}})},removePost:function(){var t=this;this.$apollo.mutate({mutation:d()(V()),variables:{hash:this.post.hash}}).then((function(e){e.data.removePost.success&&(t.deleted=!0,t.$router.go(-1))})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagPost:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:d()(B()),variables:{hash:this.post.hash,type:this.flagType,documenttype:"post"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Post has been successfully flagged!!",type:"is-success"}),t.isFlagPostModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this post",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},increaseItemQuantity:function(){this.itemQuantity++},decreaseItemQuantity:function(){this.itemQuantity>1&&this.itemQuantity--},openReserveModal:function(){var t=this;this.$apollo.query({query:d()(H())}).then((function(e){t.wallet=e.data.wallet;var s=t.post.themedata.discount/100*t.post.themedata.total,a=Math.floor(s/e.data.wallet.rates.coins);e.data.wallet.coins<a?t.usableCoins=e.data.wallet.coins:t.usableCoins=a,t.isReserveItemModalActive=!0})).catch((function(e){t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},reserveItem:function(){var t=this,e=this.post.hash;this.contact&&this.contact.length>0?this.$apollo.mutate({mutation:d()(E()),variables:{hash:e,quantity:this.itemQuantity,daysuntilpickup:this.itemPickUpDuration,coins:this.coins,phone:this.contact}}).then((function(e){t.isReserveItemModalActive=!1,t.$toast.open({message:"Item has been successfully reserved",type:"is-success"}),t.$store.state.domain?window.location.href=t.local+"transaction/"+e.data.reserveProduct.hash:t.$router.push({name:"transaction",params:{hash:e.data.reserveProduct.hash}})})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?(t.isReserveItemModalActive=!1,t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})):"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"Enter the Fields correctly and Re-try!",type:"is-danger",position:"is-bottom"}):(t.isReserveItemModalActive=!1,t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}))})):this.$toast.open({message:"Contact number is mandatory.",type:"is-danger",position:"is-bottom"})},addOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(Y()),variables:{hash:e,discount:this.discount,daysuntiloffer:this.daysUntillOffer}}).then((function(e){e.data.addOffer.success&&(t.isOfferModalActive=!1,t.$toast.open({message:"Offer has been placed",type:"is-success"}),t.$apollo.queries.post.refetch(),t.discount=0,t.daysUntillOffer=null)})).catch((function(e){t.isOfferModalActive=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(G()),variables:{hash:e}}).then((function(e){e.data.removeOffer.success&&(t.$toast.open({message:"Offer has been removed",type:"is-success"}),t.$apollo.queries.post.refetch())})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},stockToggle:function(){var t=this;if("No"==this.inStockToggle)var e=!0;else e=!1;var s=this.post.hash;this.$apollo.mutate({mutation:d()(F()),variables:{hash:s,instock:e}}).then((function(t){})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(){this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.$route.params.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.post.comments.list,o=s.post.comments.hasmore,i=s.post.title,n=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,p=s.post.nlikes,m=s.post.liked,h=s.post.ncomments,u=s.post.permissions,d=s.post.author,g=s.post.collection,v=s.post.theme,f=s.post.themedata,b=s.post.ncollected,_=s.post.attachments,y=s.post.privacy;return s?{post:{__typename:t.post.__typename,title:i,status:n,fullstatus:r,timestamp:c,hash:l,nlikes:p,liked:m,ncomments:h,permissions:u,author:d,collection:g,theme:v,themedata:f,ncollected:b,privacy:y,attachments:_,comments:{__typename:t.post.comments.__typename,list:t.post.comments.list.concat(a),hasmore:o}}}:t}})},refreshQuery:function(){this.$apollo.queries.post.refetch()},submitComment:function(){var t=this;this.disable=!0;var e,s=((e=this.commentContent)||(e=""),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:d()(D()),variables:{posthash:this.$route.params.hash,content:s,aliashash:this.selectedCommenter.hash}}).then((function(e){e.data.addComment&&(t.commentContent="",t.ncomments++,t.offset++,t.comments=[e.data.addComment].concat(t.comments),t.disable=!1)})).catch((function(e){t.disable=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):"GraphQL error: you are banned from using this feature until Invalid Date"==e.message?t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},youtubeEmbed:function(t){if(t.match(/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/)){var e=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(e&&e.length&&e[2]){var s=e[2];return"<div class='embed-container'><iframe src=\"https://www.youtube.com/embed/".concat(s,'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>')}return""}return""},like:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(U()),variables:{hash:e}}).then((function(e){e.data.addLike.success&&(t.liked=!0,t.nlikes++)})).catch((function(e){t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},unlike:function(){var t=this;this.$apollo.mutate({mutation:d()(j()),variables:{hash:this.post.hash}}).then((function(e){e.data.removeLike.success&&(t.liked=!1,t.nlikes--)})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},editPost:function(){this.post.author.hash,window.location.href=this.local+"edit/"+this.post.hash},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},created:function(){},mounted:function(){if(this.currentUrl=window.location.href,this.$store.state.user&&(this.currentUser=this.$store.state.user.username),this.$store.state.servertime){new Date(this.$store.state.servertime).getTime(),Date.now();var t=this.$store.state.servertime;this.$moment.now=function(){return t}}(this.currentUrl=window.location.href,self=this,"undefined"!=typeof postRobot)&&(postRobot.on("getUserInformation",{window:deferredIframe.contentWindow},(function(t){var e=self.$store.state.token,s=t.data.token;return e||(e=null),s||(s=null),e!=s&&(s?(self.$cookies.set("apollo-token",s,{path:"/",maxAge:2592e3}),self.$cookies.set("user",t.data.user,{path:"/",maxAge:2592e3}),self.$store.commit("setToken",s),self.$store.commit("setUser",t.data.user)):(self.$apolloHelpers.onLogout(),self.$cookies.removeAll(),self.$store.commit("removeToken"),self.$store.commit("removeUser")),self.$emit("changeRouteVariable","entered"),this.$apollo.queries.conversations.refetch(),this.$apollo.queries.inbox.refetch()),{success:1}})),document.getElementById("deferredIframe").src=this.local+"authenticator")}},Object(o.a)(q,"created",(function(){})),Object(o.a)(q,"components",{"app-comment":p.a,"app-logo":Q.a,StarRating:h.a}),q),ct=(s(355),Object(N.a)(rt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("no-ssr",[t.post&&t.post.domain&&t.post.domain.url?s("nav",{staticClass:"navbar is-transparent has-background-white-biss border-bottom-1-px-f8f8f8 z-index-5 width-100-percent"},[s("div",{staticClass:"navbar-brand"},[s("app-logo",{staticClass:"margin-left-10-px margin-right-0-px",attrs:{header:!0,domain:!0}}),t._v(" "),s("a",{staticClass:"navbar-item naya-logo has-background-none margin-left-10-px margin-right-10-px",attrs:{href:"http://"+t.post.domain.url,title:t.post.collection&&t.post.collection.name}},[s("span",{staticClass:"logo has-background-white",style:{"background-image":"url('"+(t.post.collection.logo&&t.post.collection.logo.hash?t.server+"attachments.img/md/"+t.post.collection.logo.hash:t.server+"public/images/md/empty_cl.png")+"')","background-size":"cover","background-position":"center center"}},[t._v("  ")])]),t._v(" "),this.$store.state.user?s("div",{staticClass:"navbar-item"},[s("b-dropdown",{ref:"dropdown"},[s("button",{staticClass:"button is-text navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[s("span",[t.messageNumber||t.notiNumber?s("b-icon",{staticClass:"badge has-badge-rounded has-badge-info has-badge-small",attrs:{icon:"bell-outline","data-badge":""}}):s("b-icon",{attrs:{icon:"bell-outline"}})],1)]),t._v(" "),s("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[s("div",{staticClass:"padding-20-px"},[t.messageNumber||t.notiNumber?s("p",[t._v("\n                           You have "),t.notiNumber?s("span",[s("b",[t._v(t._s(0==t.notiNumber?"0":t.notiNumber))]),t._v(" "+t._s(1==t.notiNumber?"notification":"notifications"))]):t._e(),t.messageNumber&&t.notiNumber?s("span",[t._v(" and ")]):t._e(),t.messageNumber?s("b",[t._v("new messages")]):t._e(),t._v(" on "),s("a",{staticClass:"has-text-primary has-text-weight-bold",attrs:{href:t.local}},[t._v("naya")]),t._v(".\n                        ")]):s("p",{staticClass:"has-text-grey-light"},[t._v("\n                           No new notifications or messages\n                        ")])])]),t._v(" "),t.messageNumber||t.notiNumber?s("hr",{staticClass:"margin-bottom-0-px-imp dropdown-divider"}):t._e(),t._v(" "),t.messageNumber||t.notiNumber?s("b-dropdown-item",{staticClass:"has-text-centered has-background-white-bis border-radius-bottom-5-px",attrs:{custom:""}},[s("a",{attrs:{href:t.local}},[s("div",{staticClass:"padding-5-px"},[s("span",{staticClass:"is-size-6-half has-text-link has-text-weight-bold"},[t._v("check")])])])]):t._e()],1)],1):t._e(),t._v(" "),s("div",{staticClass:"user-options"},[t.$store.state.user?s("div",[s("b-dropdown",{staticClass:"no-overflow",attrs:{position:"is-bottom-left"}},[s("button",{staticClass:"button is-white navbar-item box-shadow-none-imp",attrs:{slot:"trigger"},slot:"trigger"},[s("figure",{staticClass:"image is-24x24 is-pulled-left margin-right-10-px"},[s("img",{staticClass:"is-rounded",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/xs/empty_pp.png"}})]),t._v(" "),s("span",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.$store.state.user.username))]),t._v(" "),s("b-icon",{attrs:{icon:"menu-down-outline",size:"is-small"}})],1),t._v(" "),s("div",{staticClass:"dropdown-inner-content"},[s("b-dropdown-item",{attrs:{custom:""}},[s("div",{staticClass:"padding-15-px"},[s("span",[t._v("Signed in as "),s("b",[t._v(t._s(t.$store.state.user.username))]),s("br"),t._v("via "),s("a",{staticClass:"has-text-link",attrs:{href:t.local,target:"_blank"}},[t._v(t._s(t.local.replace(/(.*):\/\//,"").replace("/","")))])])])]),t._v(" "),s("hr",{staticClass:"dropdown-divider"}),t._v(" "),s("b-dropdown-item",[s("a",{attrs:{href:t.local+"@"+t.$store.state.user.username}},[s("div",{staticClass:"media"},[s("b-icon",{staticClass:"media-left",attrs:{icon:"account-box"}}),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                       My profile\n                                    ")])],1)])]),t._v(" "),s("b-dropdown-item",[s("a",{attrs:{href:t.local+"settings"}},[s("div",{staticClass:"media"},[s("b-icon",{staticClass:"media-left",attrs:{icon:"account-settings"}}),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                       Settings\n                                    ")])],1)])]),t._v(" "),s("hr",{staticClass:"dropdown-divider"}),t._v(" "),s("b-dropdown-item",[s("a",{on:{click:t.logOut}},[s("div",{staticClass:"media"},[s("b-icon",{staticClass:"media-left",attrs:{icon:"logout-variant"}}),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                    Logout\n                                 ")])],1)])])],1)])],1):s("div",[s("b-dropdown",{staticClass:"no-overflow",attrs:{position:"is-bottom-left"}},[s("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{icon:"menu-down-outline",size:"is-small"}}),s("span",{staticClass:"is-size-7"},[t._v("Log in")])],1),t._v(" "),s("div",{staticClass:"dropdown-inner-content"},[s("b-dropdown-item",{attrs:{custom:""}},[s("div",{staticClass:"padding-15-px"},[s("span",[t._v("You can easily sign on to this website using "),s("br"),s("a",{staticClass:"has-text-link",attrs:{href:t.local,target:"_blank"}},[t._v(t._s(t.local.replace(/(.*):\/\//,"").replace("/","")))])])])]),t._v(" "),s("b-dropdown-item",[s("a",{attrs:{href:t.local+"login?redirect_uri="+t.currentUrl}},[s("div",{staticClass:"media"},[s("b-icon",{staticClass:"media-left",attrs:{icon:"login-variant"}}),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                    Login\n                                 ")])],1)])]),t._v(" "),s("b-dropdown-item",[s("a",{attrs:{href:t.local+"register"}},[s("div",{staticClass:"media"},[s("b-icon",{staticClass:"media-left",attrs:{icon:"account-plus"}}),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                 Register\n                              ")])],1)])])],1)])],1)])],1)]):t._e()]),t._v(" "),s("div",{attrs:{id:"naya-content"}},[t.post&&t.post.author?s("section",{staticClass:"hero is-medium"},[s("div",{staticClass:"hero-body padding-RL-0-px"},[s("div",{staticClass:"columns is-gapless"},[s("div",{staticClass:"column is-1 is-hidden-mobile"}),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"columns"},["shop"==t.post.theme?s("div",{staticClass:"column is-two-fifths"},[s("no-ssr",[s("carousel",{attrs:{perPage:1,scrollPerPage:!0}},t._l(t.post.attachments,(function(e,a){return s("slide",{key:a},[s("figure",{staticClass:"image is-square",on:{click:function(s){return t.openImageModal(e)}}},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+e.hash}})])])})),1)],1)],1):t._e(),t._v(" "),s("article",{staticClass:"column",class:t.post.theme&&"article"!=t.post.theme?"":"is-article"},[s("h1",{staticClass:"is-size-3 is-size-4-mobile has-text-weight-bold margin-bottom-15-px"},[t._v(t._s(t.post.title))]),t._v(" "),"shop"==t.post.theme&&t.post.themedata?s("div",{staticClass:"margin-top-20-px"},[s("p",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Rs. "),s("b",{staticClass:"has-text-danger"},[t._v(t._s(t.post.themedata.total.toLocaleString("en-IN")))])]),t._v(" "),t.post.themedata.tax?s("p",{staticClass:"has-text-grey"},[t._v("Includes "),s("span",{staticClass:"has-text-grey-dark"},[t._v(t._s(t.post.themedata.tax)+"%")]),t._v(" tax")]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t.post.themedata.instock||1==t.post.permissions.write?t._e():s("div",{staticClass:"has-text-danger has-text-weight-bold"},[t._v("Out of stock")]),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("div",[t._v("\n                                 In Stock:\n                                 "),s("b-switch",{attrs:{"true-value":"Yes","false-value":"No"},nativeOn:{click:function(e){return t.stockToggle(e)}},model:{value:t.inStockToggle,callback:function(e){t.inStockToggle=e},expression:"inStockToggle"}},[t._v("\n                                    "+t._s(t.inStockToggle)+"\n                                 ")])],1):t._e()]),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime?s("div",{staticClass:"margin-top-20-px"},[s("span",[t._v("Discount offer of upto "),s("b",[t._v(t._s(t.post.themedata.discount)+"%")])]),s("br"),t._v(" "),s("span",{staticClass:"has-text-link"},[t._v("(ends "+t._s(t._f("moment")(t.post.themedata.discountuntil,"from","now"))+")")]),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("span",{staticClass:"tag is-danger margin-left-10-px"},[t._v("\n                                 Remove\n                                 "),s("button",{staticClass:"delete is-small",on:{click:t.removeOffer}})]):t._e()]):t._e(),t._v(" "),t.post.themedata.instock&&1!=t.post.permissions.write?s("div",{staticClass:"margin-top-20-px"},[s("button",{staticClass:"button is-link",on:{click:function(e){null!=t.$store.state.user?t.openReserveModal():t.loginMessage()}}},[t._v("Reserve")]),t._v(" "),"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.price?s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReserveItemModalActive,width:350,scroll:"keep",onCancel:t.closeReserveModal},on:{"update:active":function(e){t.isReserveItemModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("b",[t._v(t._s(t.post.title))]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("p",[s("span",[t._v("Quantity: ")]),t._v(" "),s("span",{staticClass:"select-quantity"},[s("span",{on:{click:t.decreaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"minus-circle-outline"}})],1),t._v(" "+t._s(t.itemQuantity)+"\n                                          "),s("span",{on:{click:t.increaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"plus-circle-outline"}})],1)])]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("span",{attrs:{set:t.$discount=0}}),t._v(" "),s("span",{attrs:{set:t.$tax=0}}),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$price=t.itemQuantity*t.post.themedata.price}},[s("span",[t._v("Price : ")]),t._v(" "),s("b",[t._v(t._s(t.itemQuantity)+" x "+t._s(t.post.themedata.price.toLocaleString("en-IN")))])]),t._v(" "),t.coins>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$discount=t.coins*this.wallet.rates.coins}},[s("span",[t._v("Discount : ")]),t._v(" "),s("b",[t._v(t._s(t.$discount.toLocaleString("en-IN"))+" ")]),t._v(" "),s("span",{staticClass:"margin-left-10-px is-size-7 has-text-grey"},[t._v("("+t._s(t.coins)+" coins)")])]):t._e(),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$total=t.$price-t.$discount|0}},[s("span",[t._v("Total : ")]),t._v(" "),s("b",[t._v(t._s(t.$total.toLocaleString("en-IN")))])]),t._v(" "),t.post.themedata.tax?s("p",{staticClass:"is-size-5",attrs:{set:t.$tax=Math.round(t.$total*(0|t.post.themedata.tax)/100)}},[s("span",[t._v("Tax : ")]),t._v(" "),s("b",[t._v(t._s(t.$tax.toLocaleString("en-IN")))])]):t._e(),t._v(" "),t.coins>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$grandtotal=t.$total+t.$tax|0}},[s("b",[t._v("Grand total : ")]),t._v(" "),s("b",[t._v(t._s(t.$grandtotal.toLocaleString("en-IN"))+" ")])]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       By when can you pick the product up from the shop?\n                                       "),t._v(" "),s("b-select",{attrs:{placeholder:"Select pick up duration"},model:{value:t.itemPickUpDuration,callback:function(e){t.itemPickUpDuration=e},expression:"itemPickUpDuration"}},t._l(14,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v("\n                                                "+t._s(e)+" days\n                                             ")])})),0)],1),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       Use coins to claim discounts?"),s("br"),t._v(" "),s("i",[t._v("You can use total of "+t._s(t.usableCoins)+" coins for this product")]),s("br"),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"coins","currency-symbol-position":"suffix",placeholder:"... coins","empty-value":0,precision:0,separator:",",min:0,max:t.usableCoins},model:{value:t.coins,callback:function(e){t.coins=t._n(e)},expression:"coins"}})],1):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[s("b-field",{attrs:{label:"Contact number:"}},[s("b-input",{staticClass:"inline has-text-dark has-text-weight-bold width-80-percent",attrs:{type:"tel",placeholder:"ex. 98510..."},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1)],1),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("button",{staticClass:"button is-dark is-fullwidth margin-bottom-20-px",on:{click:t.reserveItem}},[t._v("Confirm")])])]):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"is-divider margin-top-20-px margin-bottom-10-px"}),t._v(" "),t.post.themedata.stars&&t.post.themedata.stars.rating?s("div",[s("div",{attrs:{itemtype:"http://schema.org/Product",itemscope:""}},[s("meta",{attrs:{itemprop:"mpn",content:t.post.hash}}),t._v(" "),s("meta",{attrs:{itemprop:"name",content:t.post.title}}),t._v(" "),t._l(t.post.attachments,(function(e,a){return s("link",{key:a,attrs:{itemprop:"image",href:t.server+"attachments.img/sm/"+e.hash}})})),t._v(" "),s("meta",{attrs:{itemprop:"description",content:t.post.status}}),t._v(" "),s("div",{attrs:{itemprop:"aggregateRating",itemtype:"http://schema.org/AggregateRating",itemscope:""}},[s("meta",{attrs:{itemprop:"reviewCount",content:t.post.themedata.stars.n}}),t._v(" "),s("meta",{attrs:{itemprop:"ratingValue",content:t.post.themedata.stars.rating}})]),t._v(" "),s("meta",{attrs:{itemprop:"sku",content:t.post.hash}})],2)]):t._e(),t._v(" "),t.post.themedata.stars&&t.post.themedata.stars.rating?s("no-ssr",[s("div",{staticClass:"pointer has-text-grey-light margin-top-10-px margin-bottom-20-px",on:{click:function(e){t.isReviewModalActive=!0}}},[s("star-rating",{attrs:{"star-size":18,"read-only":!0,"show-rating":!1,"active-color":"gold",padding:-2,rating:t.post.themedata.stars.rating}}),t._v(" Rated "+t._s(t.post.themedata.stars.rating)+" "+t._s(1==t.post.themedata.stars.rating?"star":"stars")+" by "+t._s(t.post.themedata.stars.n)+" "+t._s(1==t.post.themedata.stars.n?"buyer":"buyers")+"\n                              ")],1)]):t._e()],1):t._e(),t._v(" "),t.post.status&&!t.post.fullstatus?s("div",{staticClass:"is-post-fullview margin-top-10-px is-size-5 is-size-6-mobile",domProps:{innerHTML:t._s(t.post.status)}}):t.post.fullstatus?s("div",{staticClass:"is-post-fullview margin-top-10-px is-size-5 is-size-6-mobile",domProps:{innerHTML:t._s(t.post.fullstatus.replace(/\{\/\/\}/g,t.server+"attachments.img/lg"))}}):t._e(),t._v(" "),"link"==t.post.theme?s("div",{staticClass:"card margin-top-20-px"},[s("div",{staticClass:"card-image has-background-dark",domProps:{innerHTML:t._s(t.youtubeEmbed(t.post.themedata.url))}}),t._v(" "),s("div",{staticClass:"card-content has-background-white-bis"},[s("a",{attrs:{href:t.post.themedata.url,target:"_blank"}},[s("p",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                                    "+t._s(t.post.themedata.title)+"\n                                 ")]),t._v(" "),s("p",{staticClass:"is-size-5 is-size-6-mobile margin-top-5-px"},[t._v("\n                                    "+t._s(t.post.themedata.description)+"\n                                 ")])])])]):t._e()])]),t._v(" "),t.post.theme&&"status"!=t.post.theme?t._e():s("div",[t.post.attachments&&t.post.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.post.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.post.attachments,(function(e,a){return s("div",{key:a,class:"grid-item "+(0===a&&(t.post.attachments.length>2||1===t.post.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[0===a&&(t.post.attachments.length>2||1===t.post.attachments.length)?s("figure",{staticClass:"image",on:{click:function(s){return t.openImageModal(e)}}},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/lg/"+e.hash}})]):s("figure",{staticClass:"image border-radius-5-px is-square",style:{"background-image":"url('"+t.server+"attachments.img/md/"+e.hash+"')","background-size":"cover","background-position":"center"},on:{click:function(s){return t.openImageModal(e)}}})])}))],2):t._e()]),t._v(" "),s("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},t._l(t.post.tags,(function(e,a){return s("nuxt-link",{key:a,attrs:{set:t.$linkparams="shop"==t.post.theme?{tag:e,theme:"shop"}:{tag:e},to:{name:"popular",query:t.$linkparams}}},[s("b-tag",{staticClass:"padding-10-px margin-right-5-px has-text-grey",attrs:{type:"is-light"}},[s("b-icon",{attrs:{icon:"tag-outline",size:"is-small"}}),t._v(" "+t._s(e))],1)],1)})),1),t._v(" "),s("div",{staticClass:"clear-both"}),t._v(" "),s("div",{staticClass:"margin-top-50-px clear-both"},[t.liked?s("button",{staticClass:"button margin-left--5-px-imp is-white has-text-danger",on:{click:function(e){null!=t.$store.state.user?t.unlike():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-marked",size:""}}),t._v(" "),s("span",[t._v("Liked")])],1):s("button",{staticClass:"button margin-left--5-px-imp is-white has-text-grey-dark",on:{click:function(e){null!=t.$store.state.user?t.like():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-blank",size:""}}),t._v(" "),s("span",[t._v("Like")])],1),t._v(" "),s("button",{staticClass:"button is-white has-text-grey-dark no-action"},[s("b-icon",{attrs:{icon:"heart",size:""}}),t._v(" "),s("span",[t._v(t._s(t.nlikes))])],1),t._v(" "),s("div",{staticClass:"is-pulled-right"},[s("no-ssr",[s("b-dropdown",{staticClass:"is-right"},[s("button",{staticClass:"button is-white has-text-grey",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{icon:"dots-horizontal"}})],1),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{attrs:{custom:""}},[s("div",{staticClass:"padding-15-px"},[t.post.collection?t._e():s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"private"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){0==t.post.ncollected?t.postPrivacy("private"):t.openPrivatePrivacyDialog()}}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"private"==t.post.privacy?"has-text-weight-bold":""},[t._v("Only me")])]),t._v(" "),t.post.collection?s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"locked_to_collection"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:t.openLocktoCollectionDialog}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"locked_to_collection"==t.post.privacy?"has-text-weight-bold":""},[t._v("Locked to Collection")])]):t._e()])]):t._e(),t._v(" "),1==t.post.permissions.write?s("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.editPost}},[s("a",[s("b-icon",{attrs:{icon:"square-edit-outline",size:"is-small"}}),t._v(" Edit")],1)]):t._e(),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.openRemovePostDialog}},[s("a",[s("b-icon",{attrs:{icon:"delete",size:"is-small"}}),t._v(" Delete")],1)]):t._e(),t._v(" "),t.post.permissions&&1==t.post.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isSocialShareModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"share-variant",size:"is-small"}}),t._v(" Share")],1)]):t._e(),t._v(" "),1==t.post.permissions.write&&"shop"==t.post.theme&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isOfferModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"tag ",size:"is-small"}}),t._v(" Add Offer")],1)]):t._e(),t._v(" "),0==t.post.permissions.write?s("b-dropdown-item",{on:{click:function(e){null!=t.$store.state.user?t.isFlagPostModalActive=!0:t.loginMessage()}}},[s("a",[s("b-icon",{attrs:{icon:"flag",size:"is-small"}}),t._v(" Flag")],1)]):t._e()],1)],1)],1),t._v(" "),t.$store.state.user&&t.post&&"public"==t.post.privacy?s("button",{staticClass:"button is-text is-pulled-right",on:{click:function(e){t.isAddPostToCollectionModalActive=!0}}},[s("b-icon",{attrs:{icon:"bookmark-plus has-text-grey-light"}})],1):t._e(),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isAddPostToCollectionModalActive,width:300,scroll:"keep"},on:{"update:active":function(e){t.isAddPostToCollectionModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-20-px"},[t._v("\n                              Enter the collection you want to add this post to, select from the dropdown list and press "),s("span",{staticClass:"tag"},[t._v("+ Add")])]),t._v(" "),s("b-autocomplete",{attrs:{data:t.collections,field:"name",placeholder:"Enter Collection Name"},on:{input:t.getCollections,select:function(e){return t.selected=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[e.option&&e.option.name?s("div",{staticClass:"media padding-5-px"},[s("figure",{staticClass:"image media-left is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:e.option.logo&&e.option.logo.hash?t.server+"attachments.img/xs/"+e.option.logo.hash:t.server+"public/images/xs/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                       "+t._s(e.option.name)+"  \n                                    ")])]):t._e()]}}],null,!1,809104614),model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}}),t._v(" "),s("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:t.addToCollection}},[s("b-icon",{attrs:{icon:"plus",size:"is-small"}}),t._v(" Add")],1),t._v(" "),s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:function(e){t.isAddPostToCollectionModalActive=!1}}},[t._v("Cancel")])])],1)]),t._v(" "),s("div",{staticClass:"is-divider margin-top-50-px"}),t._v(" "),s("div",{staticClass:"media margin-top-50-px"},[s("figure",{staticClass:"media-left"},[s("a",{staticClass:"image is-64x64",attrs:{href:t.post.author.hash?t.local+"collection/"+t.post.author.hash:t.local+"@"+t.post.author.username}},[s("img",{staticClass:"is-rounded padding-8-px border-1-px-eee has-background-white",attrs:{src:t.post.author&&t.post.author.image?t.server+"attachments.img/sm/"+t.post.author.image.hash:t.post.author.hash?t.server+"public/images/sm/empty_cl.png":t.server+"public/images/sm/empty_pp.png"}})])]),t._v(" "),s("div",{staticClass:"media-content margin-top-5-px margin-left-10-px"},[s("div",{staticClass:"content"},[s("div",{staticClass:"is-size-5 is-size-6-mobile"},[s("a",{attrs:{href:t.post.author.hash?t.local+"collection/"+t.post.author.hash:t.local+"@"+t.post.author.username}},[s("b",[t._v(t._s(t.post.author.name))]),t._v(" "),t.post.author.username?s("span",{staticClass:"margin-left-5-px"},[t._v("@"+t._s(t.post.author.username))]):t._e()])]),t._v(" "),s("span",{staticClass:"has-text-grey-light is-size-7"},[t._v(t._s(t._f("moment")(t.post.timestamp,"MMMM Do YYYY"))+" ")]),t._v(" "),s("span",{staticClass:"has-text-grey-light"},[s("b-tooltip",{attrs:{label:"private"==t.post.privacy?"only me":"locked_to_collection"==t.post.privacy?"only collection members":"public",position:"is-top",type:"is-info"}},[s("b-icon",{attrs:{icon:"private"==t.post.privacy?"lock":"locked_to_collection"==t.post.privacy?"account-multiple":"earth",size:"is-small"}})],1)],1)])])]),t._v(" "),s("no-ssr",[s("div",{staticClass:"margin-top-50-px"},[t.ncomments?s("p",{staticClass:"margin-bottom-10-px has-text-weight-bold is-size-6-half has-text-grey-light"},[t._v("Comments ("+t._s(t.ncomments)+")")]):t._e(),t._v(" "),t.$store.state.user?s("b-dropdown",{ref:"dropup",staticClass:"is-up is-right is-pulled-right dropdown-no-headers margin-bottom-5-px"},[s("button",{staticClass:"button is-text is-small",attrs:{slot:"trigger"},slot:"trigger"},[t.selectedCommenter&&t.selectedCommenter.hash?s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.selectedCommenter.logo&&t.selectedCommenter.logo.hash?t.server+"attachments.img/xs/"+t.selectedCommenter.logo.hash:t.server+"public/images/md/empty_cl.png"}})]):s("div",{staticClass:"is-pulled-left"},[s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("span",{staticClass:"margin-left-5-px"},[t._v("@"+t._s(t.$store.state.user.username))])]),t._v(" "),s("b-icon",{attrs:{icon:"menu-up-outline",size:"is-small"}})],1),t._v(" "),s("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[s("div",[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("\n                                          Comment as:\n                                       ")])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp",on:{click:t.selectUserAsCommenter}},[s("div",{staticClass:"has-background-white-bis border-bottom-1-px-f8f8f8 padding-10-px pointer"},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&!t.selectedCommenter.hash?"sender-selected":"",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&!t.selectedCommenter.hash?"has-text-weight-bold":""},[t._v("\n                                                   @"+t._s(t.$store.state.user.username)+"\n                                                ")])])])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp"},[t._l(t.ownCollections,(function(e,a){return s("div",{key:a,staticClass:"border-bottom-1-px-f8f8f8 padding-10-px pointer",on:{click:function(s){return t.selectCommenter(e)}}},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&e.logo&&t.selectedCommenter.logo&&t.selectedCommenter.logo.hash==e.logo.hash?"sender-selected":"",attrs:{src:e.logo&&e.logo.hash?t.server+"attachments.img/xs/"+e.logo.hash:t.server+"public/images/md/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&t.selectedCommenter.hash==e.hash?"has-text-weight-bold":""},[t._v("\n                                                "+t._s(e.name)+"\n                                             ")])])])})),t._v(" "),1==t.hasmoreOwnCollections?s("div",{staticClass:"has-text-centered padding-10-px margin-top-10-px margin-bottom-10-px"},[s("a",{staticClass:"button is-rounded is-small",class:t.loadingMoreOwnCollection?"is-loading":"",on:{click:t.loadMoreOwnCollections}},[t._v("load more")])]):t._e()],2)])])],1):t._e(),t._v(" "),t.$store.state.user?s("span",{staticClass:"is-pulled-right margin-top-5-px is-size-7 has-text-grey-light"},[t._v("comment as:")]):t._e(),t._v(" "),s("textarea-autosize",{ref:"comment",staticClass:"textarea",attrs:{rows:"2",placeholder:"Write a comment ...",maxlength:"1000"},model:{value:t.commentContent,callback:function(e){t.commentContent="string"==typeof e?e.trim():e},expression:"commentContent"}}),t._v(" "),t.commentContent.length>0?s("div",{staticClass:"margin-top-20-px has-text-right"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.$store.state.user?t.submitComment():t.loginMessage()}}},[t._v("Submit")])]):t._e(),t._v(" "),t.comments?s("div",{staticClass:"margin-top-20-px"},t._l(t.comments,(function(e){return s("div",{key:e.hash},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1)})),0):t._e(),t._v(" "),t.post.comments&&1==t.post.comments.hasmore?s("center",[s("button",{staticClass:"button is-clear is-small",on:{click:t.loadMore}},[t._v("LOAD MORE")])]):t._e()],1)])],1)]),t._v(" "),s("div",{staticClass:"column is-1 is-hidden-mobile"})])])]):s("div",{staticClass:"hero is-medium"},[s("div",{staticClass:"hero-body padding-RL-0-px"},[s("div",{staticClass:"columns is-gapless"},[s("div",{staticClass:"column is-1 is-hidden-mobile"}),t._v(" "),s("div",{staticClass:"column"},[s("content-placeholders",{staticClass:"is-half-width",attrs:{rounded:!0}},[s("content-placeholders-img"),t._v(" "),s("content-placeholders-heading",{attrs:{img:!0}}),t._v(" "),s("content-placeholders-text",{attrs:{lines:0}})],1),t._v(" "),s("content-placeholders",{attrs:{rounded:!0}},[s("content-placeholders-heading"),t._v(" "),s("content-placeholders-text",{attrs:{lines:3}})],1)],1),t._v(" "),s("div",{staticClass:"column is-1 is-hidden-mobile"})])])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagPostModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagPostModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Flagging post\n            ")]),t._v("\n            You are about to flag a post. Please select a category.\n         ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagPost}},[t._v("Done")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReviewModalActive,width:500,scroll:"keep"},on:{"update:active":function(e){t.isReviewModalActive=e}}},[t.post&&t.post.reviews&&t.post.reviews.list&&t.post.reviews.list.length>0?s("section",{staticClass:"width-auto"},[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),t._l(t.reviews,(function(e,a){return s("div",{key:a,staticClass:"margin-top-20-px"},[s("div",{staticClass:"padding-10-px"},[null!=t.$store.state.user&&e.author.username==t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.removeReview(e.hash)}}},[s("b-icon",{attrs:{icon:"delete"}})],1):t._e(),t._v(" "),null!=t.$store.state.user&&e.author.username!=t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.openProductReviewFlagModal(e.hash)}}},[s("b-icon",{attrs:{icon:"flag"}})],1):t._e(),t._v(" "),s("no-ssr",[s("star-rating",{attrs:{"star-size":24,"show-rating":!1,"active-color":"#4da6ff",padding:-2,"read-only":!0,rating:e.stars}})],1),t._v(" "),s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-top-10-px"},[t._v("\n                  "+t._s(e.content)+"\n               ")]),t._v(" "),s("div",{staticClass:"margin-top-10-px is-size-7 is-italic"},[s("span",{staticClass:"is-pulled-left margin-right-5-px"},[t._v("By:")]),t._v(" "),s("nuxt-link",{attrs:{to:{name:"user",params:{username:e.author.username}}}},[s("b",[t._v(t._s(e.author.name))])])],1)],1)])})),t._v(" "),1==t.hasmoreReviews?s("center",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear",class:t.loadingMoreReviews?"is-loading":"",on:{click:t.loadMoreReviews}},[t._v("load more")])]):t._e()],2):s("section",[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),s("p",{staticClass:"has-text-grey margin-top-20-px"},[t._v("No Reviews Yet")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isSocialShareModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isSocialShareModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Share your post\n            ")])]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("p",{staticClass:"margin-top-10-px has-text-centered"},[s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://www.facebook.com/sharer/sharer.php?u="+t.currentUrl}},[s("b-icon",{attrs:{icon:"facebook has-text-link",size:"is-large"}})],1),t._v(" "),s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://twitter.com/intent/tweet?url="+t.currentUrl}},[s("b-icon",{attrs:{icon:"twitter has-text-info",size:"is-large"}})],1)])])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagProductReviewModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagProductReviewModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n               Flagging Product Review\n            ")]),t._v("\n            You are about to flag a product review. Please select a category.\n         ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Review is explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagProductReview}},[t._v("Done")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isOfferModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isOfferModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",[s("b",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Adding offer to:")]),t._v(" "),t.post?s("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.post.title))]):t._e()]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("span",{staticClass:"margin-right-10-px"},[t._v("How much discount do you want to offer?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"%","currency-symbol-position":"suffix",placeholder:"... %","empty-value":0,precision:0,separator:",",min:0,max:100},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}}),t._v(" "),s("p",{staticClass:"margin-top-20-px"},[s("span",{staticClass:"margin-right-10-px"},[t._v("How many days do you want this offer to be valid for?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"days","currency-symbol-position":"suffix",placeholder:"... days","empty-value":0,precision:0,separator:",",min:0,max:30},model:{value:t.daysUntillOffer,callback:function(e){t.daysUntillOffer=t._n(e)},expression:"daysUntillOffer"}})],1)],1),t._v(" "),s("button",{staticClass:"button is-dark margin-top-30-px margin-bottom-20-px",on:{click:t.addOffer}},[t._v("Done")])])]),t._v(" "),s("b-modal",{attrs:{active:t.isImageModalActive},on:{"update:active":function(e){t.isImageModalActive=e}}},[s("div",{staticClass:"image-modal-container"},[s("div",{staticClass:"image-box",style:{background:"url('"+t.server+"attachments.img/lg/"+t.imagehash+"')","background-repeat":"no-repeat","background-size":"contain","background-position":"center"},on:{click:function(e){t.isImageModalActive=!1}}})])]),t._v(" "),s("script",{attrs:{src:"https://unpkg.com/post-robot@10.0.18/dist/post-robot.js"}}),t._v(" "),s("iframe",{staticClass:"is-hidden",attrs:{id:"deferredIframe",src:"about:blank"}})],1)}),[],!1,null,"df7d3cc0",null).exports);function lt(){var t=Object(i.a)(["\n            mutation removeLike($hash: String!) {\n              removeLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return lt=function(){return t},t}function pt(){var t=Object(i.a)(["\n            mutation addLike($hash: String!) {\n              addLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return pt=function(){return t},t}function mt(){var t=Object(i.a)(["\n            mutation addComment($posthash: String!, $content: String!) {\n              addComment(posthash: $posthash, content: $content) {\n                nupvotes\n                nreplies\n                hash\n                content\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return mt=function(){return t},t}function ht(){var t=Object(i.a)(["\n            mutation toggleInstock($hash: String!, $instock: Boolean!) {\n              toggleInstock(hash: $hash, instock: $instock) {\n                success\n              }\n            }\n          "]);return ht=function(){return t},t}function ut(){var t=Object(i.a)(["\n            mutation removeOffer($hash: String!) {\n              removeOffer(hash: $hash) {\n                success\n              }\n            }\n          "]);return ut=function(){return t},t}function dt(){var t=Object(i.a)(["\n            mutation addOffer(\n              $hash: String!\n              $discount: Percentage!\n              $daysuntiloffer: Int!\n            ) {\n              addOffer(\n                hash: $hash\n                discount: $discount\n                daysuntiloffer: $daysuntiloffer\n              ) {\n                success\n              }\n            }\n          "]);return dt=function(){return t},t}function gt(){var t=Object(i.a)(["\n            mutation reserveProduct(\n              $hash: String!\n              $quantity: Int!\n              $daysuntilpickup: Int!\n              $coins: Int\n            ) {\n              reserveProduct(\n                hash: $hash\n                quantity: $quantity\n                daysuntilpickup: $daysuntilpickup\n                coins: $coins\n              ) {\n                pin\n                hash\n              }\n            }\n          "]);return gt=function(){return t},t}function vt(){var t=Object(i.a)(["\n               query wallet {\n               wallet{\n                  coins\n                  rates\n               }\n               }\n            "]);return vt=function(){return t},t}function ft(){var t=Object(i.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return ft=function(){return t},t}function bt(){var t=Object(i.a)(["\n            mutation removePost($hash: String!) {\n              removePost(hash: $hash) {\n                success\n              }\n            }\n          "]);return bt=function(){return t},t}function _t(){var t=Object(i.a)(["\n            mutation addPostToCollection(\n              $collectionhash: String!\n              $hash: String!\n            ) {\n              addPostToCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return _t=function(){return t},t}function yt(){var t=Object(i.a)(["\n            query searchCollections($page: Int, $q: String!) {\n              searchCollections(page: $page, q: $q) {\n                hasmore\n                list {\n                  name\n                  hash\n                }\n              }\n            }\n          "]);return yt=function(){return t},t}function Ct(){var t=Object(i.a)(["\n              mutation changePostPrivacy(\n                $hash: String!\n                $privacy: PostPrivacy!\n              ) {\n                changePostPrivacy(hash: $hash, privacy: $privacy) {\n                  success\n                }\n              }\n            "]);return Ct=function(){return t},t}n.default.use(c.a);var $t=(nt={data:function(){return{domainHash:this.$store.state.domain,server:"https://api.naya.com.np/",hash:this.$route.params.hash,post:{},liked:null,nlikes:null,commentContent:"",comments:[],ncomments:null,offset:0,currentUser:null,pageNumber:1,isReserveItemModalActive:!1,itemQuantity:1,itemPickUpDuration:1,isOfferModalActive:!1,discount:0,daysUntillOffer:null,inStockToggle:"Yes",discountDate:null,interval:null,isFlagPostModalActive:!1,flagType:null,collectionName:"",collections:[],selected:{},wallet:{},coins:0,usableCoins:null,isAddPostToCollectionModalActive:!1,routeEnter:null}},beforeRouteEnter:function(t,e,s){s((function(t){null!=e.name&&(t.routeEnter=e.name)}))},methods:{changeRouteVariable:function(t){this.routeEnter=t},closeReserveModal:function(){this.coins=0,this.itemPickUpDuration=1,this.itemQuantity=1},decreaseNcomments:function(){this.ncomments--,this.offset--},openLocktoCollectionDialog:function(){var t=this;this.$dialog.confirm({title:"Lock Post to Collection",message:"Are you sure you want to <b>lock</b> this post to collection?",cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("locked_to_collection")}})},postPrivacy:function(t){var e=this;1==this.post.permissions.write&&null!=this.currentUser&&this.$apollo.mutate({mutation:d()(Ct()),variables:{hash:this.post.hash,privacy:t}}).then((function(t){t.data.changePostPrivacy.success&&e.$apollo.queries.post.refetch()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},getCollections:function(){var t=this;this.$apollo.query({query:d()(yt()),variables:{q:this.collectionName}}).then((function(e){t.collections=[],e.data.searchCollections&&e.data.searchCollections.list.length>0?e.data.searchCollections.list.forEach((function(e){return t.collections.push(e)})):e.data.searchCollections&&0==e.data.searchCollections.list.length&&(t.collections=[])})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addToCollection:function(){var t=this,e=this.selected.hash,s=this.post.hash;this.$apollo.mutate({mutation:d()(_t()),variables:{hash:s,collectionhash:e}}).then((function(e){e.data.addPostToCollection.success&&t.$toast.open({message:"Post has been Added",type:"is-success"}),t.isAddPostToCollectionModalActive=!1,t.collectionName=""})).catch((function(e){t.isAddPostToCollectionModalActive=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"The collection may not be available. Please select from the list",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRemovePostDialog:function(){var t=this;this.$dialog.confirm({title:"Remove Post",message:"Are you sure you want to <b>delete</b> this post?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removePost()}})},removePost:function(){var t=this;this.$apollo.mutate({mutation:d()(bt()),variables:{hash:this.post.hash}}).then((function(e){e.data.removePost.success&&(t.deleted=!0,t.$router.go(-1))})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagPost:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:d()(ft()),variables:{hash:this.post.hash,type:this.flagType,documenttype:"post"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Post has been successfully flagged!!",type:"is-success"}),t.isFlagPostModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this post",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},increaseItemQuantity:function(){this.itemQuantity++},decreaseItemQuantity:function(){this.itemQuantity>1&&this.itemQuantity--},openReserveModal:function(){var t=this;this.$apollo.query({query:d()(vt())}).then((function(e){t.wallet=e.data.wallet;var s=t.post.themedata.discount/100*t.post.themedata.total,a=Math.floor(s/e.data.wallet.rates.coins);e.data.wallet.coins<a?t.usableCoins=e.data.wallet.coins:t.usableCoins=a,t.isReserveItemModalActive=!0})).catch((function(e){t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},reserveItem:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(gt()),variables:{hash:e,quantity:this.itemQuantity,daysuntilpickup:this.itemPickUpDuration,coins:this.coins}}).then((function(e){t.isReserveItemModalActive=!1,t.$toast.open({message:"Item has been successfully reserved",type:"is-success"}),t.$router.push({name:"transaction",params:{hash:e.data.reserveProduct.hash}})})).catch((function(e){t.isReserveItemModalActive=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(dt()),variables:{hash:e,discount:this.discount,daysuntiloffer:this.daysUntillOffer}}).then((function(e){e.data.addOffer.success&&(t.isOfferModalActive=!1,t.$toast.open({message:"Offer has been placed",type:"is-success"}),t.$apollo.queries.post.refetch(),t.discount=0,t.daysUntillOffer=null)})).catch((function(e){t.isOfferModalActive=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(ut()),variables:{hash:e}}).then((function(e){e.data.removeOffer.success&&(t.$toast.open({message:"Offer has been removed",type:"is-success"}),t.$apollo.queries.post.refetch())})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},stockToggle:function(){var t=this;if("No"==this.inStockToggle)var e=!0;else e=!1;var s=this.post.hash;this.$apollo.mutate({mutation:d()(ht()),variables:{hash:s,instock:e}}).then((function(t){})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(){this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.$route.params.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.post.comments.list,o=s.post.comments.hasmore,i=s.post.title,n=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,p=s.post.nlikes,m=s.post.liked,h=s.post.ncomments,u=s.post.permissions,d=s.post.author,g=s.post.collection,v=s.post.theme,f=s.post.themedata,b=s.post.ncollected,_=s.post.attachments,y=s.post.privacy;return s?{post:{__typename:t.post.__typename,title:i,status:n,fullstatus:r,timestamp:c,hash:l,nlikes:p,liked:m,ncomments:h,permissions:u,author:d,collection:g,theme:v,themedata:f,ncollected:b,privacy:y,attachments:_,comments:{__typename:t.post.comments.__typename,list:t.post.comments.list.concat(a),hasmore:o}}}:t}})},refreshQuery:function(){this.$apollo.queries.post.refetch()},submitComment:function(){var t,e=this,s=((t=this.commentContent)||(t=""),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:d()(mt()),variables:{posthash:this.$route.params.hash,content:s}}).then((function(t){t.data.addComment&&(e.commentContent="",e.ncomments++,e.offset++,e.comments=[t.data.addComment].concat(e.comments))})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},like:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:d()(pt()),variables:{hash:e}}).then((function(e){e.data.addLike.success&&(t.liked=!0,t.nlikes++)})).catch((function(e){t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},unlike:function(){var t=this;this.$apollo.mutate({mutation:d()(lt()),variables:{hash:this.post.hash}}).then((function(e){e.data.removeLike.success&&(t.liked=!1,t.nlikes--)})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},editPost:function(){this.post.author.hash?this.$router.push({name:"editPost",params:{username:this.post.author.name,hash:this.post.hash,post:this.post}}):this.$router.push({name:"editPost",params:{username:this.post.author.username,hash:this.post.hash,post:this.post}})},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},created:function(){},mounted:function(){if(this.$store.state.user&&(this.currentUser=this.$store.state.user.username),this.$store.state.servertime){new Date(this.$store.state.servertime).getTime(),Date.now();var t=this.$store.state.servertime;this.$moment.now=function(){return t}}}},Object(o.a)(nt,"created",(function(){})),Object(o.a)(nt,"components",{"app-singlepost":I,"app-domainpost":ct}),nt),wt=(s(356),Object(N.a)($t,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.post?s("div",[t.domainHash?s("app-domainpost",{attrs:{postHash:t.$route.params.hash,routeEnter:t.routeEnter},on:{changeRouteVariable:function(e){return t.changeRouteVariable(e)}}}):s("app-singlepost",{attrs:{postHash:t.$route.params.hash,routeEnter:t.routeEnter}})],1):t._e()}),[],!1,null,"7ce49673",null));e.default=wt.exports},292:function(t,e,s){"use strict";s(97);var a=s(96),o=s(95),i=s.n(o);function n(){var t=Object(a.a)(["\n            mutation addReply($commenthash: String!, $content: String!, $aliashash: String) {\n              addReply(commenthash: $commenthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                timestamp\n                nreplies\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return n=function(){return t},t}function r(){var t=Object(a.a)(["\n            mutation removeUpvote($hash: String!) {\n              removeUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return r=function(){return t},t}function c(){var t=Object(a.a)(["\n            mutation addUpvote($hash: String!) {\n              addUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return c=function(){return t},t}function l(){var t=Object(a.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return l=function(){return t},t}function p(){var t=Object(a.a)(["\n            mutation removeComment($hash: String!) {\n              removeComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return p=function(){return t},t}function m(){var t=Object(a.a)(["\n        query comment($hash: String!, $page: Int, $offset : Int) {\n          comment(hash: $hash) {\n            replies(page: $page, offset : $offset) {\n              hasmore\n              list {\n                timestamp\n                nupvotes\n                nreplies\n                hash\n                content\n                upvoted\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return m=function(){return t},t}var h={apollo:{commentR:{query:i()(m()),prefetch:!1,variables:function(){return{hash:this.comment.hash,page:1,offset:0}},skip:function(){return this.skipQuery},update:function(t){return t.comment&&t.comment.replies&&t.comment.replies.list&&t.comment.replies.list.length>0&&(this.replies=t.comment.replies.list),t.comment.replies}}},data:function(){return{server:"https://api.naya.com.np/",currentUser:null,upvoted:this.comment.upvoted,nupvotes:this.comment.nupvotes,replyActive:!1,replyingActive:!1,replyFirstFetch:!1,replyContent:"",replies:[],nreplies:this.comment.nreplies,offset:0,skipQuery:!0,pageNumber:1,isFlagCommentModalActive:!1,flagType:null,deleted:!1,disable:!1}},props:{comment:{type:Object,required:!0},selectedCommenter:{type:Object}},name:"app-comment",methods:{decreaseNcomments:function(){this.nreplies--,this.offset--},loadMore:function(){this.pageNumber++,this.$apollo.queries.commentR.fetchMore({variables:{hash:this.comment.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.comment.replies.list,o=s.comment.replies.hasmore;return s?{comment:{__typename:t.comment.__typename,replies:{__typename:t.comment.replies.__typename,list:t.comment.replies.list.concat(a),hasmore:o}}}:t}})},openRemoveCommentDialogBox:function(){var t=this;this.$dialog.confirm({title:"Remove Comment",message:"Are you sure you want to <b>delete</b> this comment?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removeComment()}})},removeComment:function(){var t=this;this.$apollo.mutate({mutation:i()(p()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeComment.success&&(t.deleted=!0,t.$emit("decreaseNcomments"))})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagComment:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:i()(l()),variables:{hash:this.comment.hash,type:this.flagType,documenttype:"comment"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Comment has been successfully flagged!!",type:"is-success"}),t.isFlagCommentModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this Comment",type:"is-danger"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagCommentModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},upvoteComment:function(){var t=this;this.$apollo.mutate({mutation:i()(c()),variables:{hash:this.comment.hash}}).then((function(e){e.data.addUpvote.success&&(t.upvoted=!0,t.nupvotes++)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},downvoteComment:function(){var t=this;this.$apollo.mutate({mutation:i()(r()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeUpvote.success&&(t.upvoted=!1,t.nupvotes--)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},submitReply:function(t){var e=this;this.disable=!0;var s,a=((s=this.replyContent)||(s=""),s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:i()(n()),variables:{commenthash:t,content:a,aliashash:this.selectedCommenter.hash}}).then((function(t){t.data.addReply&&(e.replyContent="",e.replyActive=!0,e.nreplies++,e.offset++,e.replies=[t.data.addReply].concat(e.replies),e.disable=!1)})).catch((function(t){e.disable=!1,"GraphQL error: you are banned from using this feature until Invalid Date"==t.message?e.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},replyToggle:function(t){var e=this;if("onlyreplies"==t){this.$apollo.queries.commentR.skip=!1,this.replyActive=!this.replyActive,this.replyActive||(this.replyingActive=!1);var s=document.getElementsByClassName("reply-text-box");for(a=0;a<s.length;a++)s[a].id==="reply-"+this.comment.hash?s[a].className=s[a].className.replace(/is-hidden/g,"").trim():(s[a].className=s[a].className.replace(/is-hidden/g,"").trim(),s[a].className?s[a].className+=" is-hidden":s[a].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}else{this.$apollo.queries.commentR.skip=!1,this.replyActive=!0,this.replyingActive=!0;var a;s=document.getElementsByClassName("reply-text-box");for(a=0;a<s.length;a++)s[a].id==="reply-"+this.comment.hash?s[a].className=s[a].className.replace(/is-hidden/g,"").trim():(s[a].className=s[a].className.replace(/is-hidden/g,"").trim(),s[a].className?s[a].className+=" is-hidden":s[a].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}},gotoUser:function(){this.comment.author.hash?this.$router.push({name:"singleCollection",params:{hash:this.comment.author.hash}}):this.$router.push({name:"user",params:{username:this.comment.author.username}})},refreshQuery:function(){this.replyToggle(),this.$emit("refreshQuery")},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},mounted:function(){this.$store.state.user&&(this.currentUser=this.$store.state.user.username)},components:{"app-comment":g}},u=s(22),d=Object(u.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.deleted?t._e():s("div",[t.comment.author?s("div",[s("div",{staticClass:"media margin-bottom-20-px"},[s("div",{staticClass:"media-left"},[s("figure",{staticClass:"image is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:t.comment.author&&t.comment.author.image?t.server+"attachments.img/sm/"+t.comment.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"pointer has-text-centered is-size-7 margin-top-5-px"},[t.upvoted?t._e():s("span",{on:{click:function(e){null!=t.currentUser?t.upvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1),t._v(" "),t.upvoted?s("span",{staticClass:"has-text-danger",on:{click:function(e){null!=t.currentUser?t.downvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1):t._e(),t._v(" "),t.nupvotes?s("p",{staticClass:"margin-top--5-px"},[s("b",[t._v(t._s(t.nupvotes))])]):t._e()])]),t._v(" "),s("div",{staticClass:"media-content"},[t.comment.permissions&&1==t.comment.permissions.write&&null!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:t.openRemoveCommentDialogBox}},[s("b-icon",{attrs:{icon:"delete",size:"is-small"}})],1):t._e(),t._v(" "),t.comment.permissions&&0==t.comment.permissions.write&&t.comment.author.username!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:function(e){null!=t.currentUser?t.isFlagCommentModalActive=!0:t.loginMessage()}}},[s("b-icon",{attrs:{icon:"flag",size:"is-small"}})],1):t._e(),t._v(" "),s("div",{staticClass:"display-block"},[s("nuxt-link",{attrs:{to:this.comment.author.hash?{name:"singleCollection",params:{hash:this.comment.author.hash}}:{name:"user",params:{username:this.comment.author.username}}}},[s("strong",{staticClass:"is-size-6-half pointer"},[t._v(t._s(t.comment.author.name))])]),t._v(" "),s("p",{staticClass:"has-text-grey is-size-7 "},[t._v(t._s(t._f("moment")(t.comment.timestamp,"from","now")))])],1),t._v(" "),s("div",{staticClass:"is-size-6-half margin-top-5-px",domProps:{innerHTML:t._s(t.comment.content)}}),t._v(" "),s("div",[s("p",{staticClass:"is-size-7 margin-top-5-px"},[t.nreplies?s("span",{staticClass:"pointer  margin-right-10-px ",on:{click:function(e){return t.replyToggle("onlyreplies")}}},[s("b",[t._v(t._s(t.nreplies))]),s("span",[t._v(" replies")])]):t._e(),t._v(" "),s("span",{staticClass:"pointer has-text-weight-bold",on:{click:function(e){return t.replyToggle("replieswithtextbox")}}},[t._v("reply")])]),t._v(" "),s("div",[t.replyingActive?s("div",{staticClass:"reply-text-box margin-top-10-px",attrs:{id:"reply-"+t.comment.hash}},[s("textarea-autosize",{ref:"comment",staticClass:"textarea box-shadow-none",attrs:{rows:"2",placeholder:"Write a reply ...",maxlength:"1000"},model:{value:t.replyContent,callback:function(e){t.replyContent="string"==typeof e?e.trim():e},expression:"replyContent"}}),t._v(" "),t.replyContent.length>0?s("div",{staticClass:"margin-top-10-px"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.currentUser?t.submitReply(t.comment.hash):t.loginMessage()}}},[t._v("Submit")]),t._v(" \n                     ")]):t._e()],1):t._e(),t._v(" "),t.replyActive?s("div",[t._l(t.replies,(function(e){return t.replies?s("div",{key:e.hash,staticClass:"margin-top-10-px"},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1):t._e()})),t._v(" "),t.commentR&&1==t.commentR.hasmore?s("div",{staticClass:"has-text-centered margin-top-20-px"},[s("button",{staticClass:"button is-clear is-small is-rounded",on:{click:t.loadMore}},[t._v("load more")])]):t._e()],2):t._e()])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagCommentModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagCommentModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                     Flagging comment\n                  ")]),t._v("\n                  You are about to flag a comment. Please select a category.\n               ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagComment}},[t._v("Done")])])])],1)]):t._e()])}),[],!1,null,null,null),g=e.a=d.exports},311:function(t,e,s){},312:function(t,e,s){},313:function(t,e,s){},354:function(t,e,s){"use strict";var a=s(311);s.n(a).a},355:function(t,e,s){"use strict";var a=s(312);s.n(a).a},356:function(t,e,s){"use strict";var a=s(313);s.n(a).a}}]);