(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{283:function(t,s,n){"use strict";var e=n(96),a=n(95),i=n.n(a);function o(){var t=Object(e.a)(["\n                           mutation markInboxAsRead($hash: String!) {\n            markInboxAsRead(hash: $hash) {\n               success\n            }\n                           }\n                           "]);return o=function(){return t},t}var r={props:{inbox:{type:Object,required:!0},loadingMoreInbox:{type:Boolean}},watch:{inbox:function(t){}},data:function(){return{userLoggedIn:null,server:"https://api.naya.com.np/"}},methods:{activeSeen:function(t,s){0==s&&this.$apollo.mutate({mutation:i()(o()),variables:{hash:t}}).then((function(t){t.data.markInboxAsRead.success})).catch((function(t){}))},gotoPost:function(t){this.$router.push({name:"post",params:{hash:this.inbox.list.list[t].origin.post}})},gotoCollection:function(t){this.$router.push({name:"singleCollection",params:{hash:this.inbox.list.list[t].origin.collection}})},gotoTransaction:function(t){this.$router.push({name:"transaction",params:{hash:this.inbox.list.list[t].detail.transactionhash}})},loadMore:function(){this.$emit("loadMore")},gotoUser:function(t){null==this.inbox.list.list[t].sender.hash?this.$router.push({name:"user",params:{username:this.inbox.list.list[t].sender.username}}):this.inbox.list[t].sender.hash&&this.$router.push({name:"singleCollection",params:{hash:this.inbox.list.list[t].sender.hash}})},userinfo:function(){this.userLoggedIn=localStorage.getItem("userLoggedIn")}},mounted:function(){this.userinfo()}},c=(n(344),n(22)),l=Object(c.a)(r,(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t.inbox&&t.inbox.ninbox?n("a",{staticClass:"button is-small is-outlined noti-count cursor-normal",attrs:{disabled:""}},[t._v(t._s(t.inbox.ninbox.notifications))]):t._e(),t._v(" Notifications\n        ")])]),t._v(" "),t.inbox&&t.inbox.list?n("div",{staticClass:"dropdown-inner-content"},[t._l(t.inbox.list.list,(function(s,e){return n("div",{key:e,staticClass:"list-pad-bot-border",class:{notseen:!s.seen}},[n("article",{staticClass:"media"},[n("figure",{staticClass:"media-left"},[n("p",{staticClass:"image is-32x32"},[n("img",{staticClass:"is-rounded responsive",attrs:{src:s.sender.image&&null!=s.sender.image?t.server+"attachments.img/sm/"+s.sender.image.hash:t.server+"public/images/sm/empty_pp.png",alt:"Placeholder image"}})])]),t._v(" "),n("div",{staticClass:"media-content",class:{seen:s.seen},on:{"~mouseover":function(n){return t.activeSeen(s.hash,s.seen)}}},[n("div",["like"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" liked your "),n("strong",[n("span",{on:{click:function(s){return t.gotoPost(e)}}},[t._v("post")])])]):t._e(),t._v(" "),"comment"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" commented on your "),n("strong",[n("span",{on:{click:function(s){return t.gotoPost(e)}}},[t._v("post")])])]):t._e(),t._v(" "),"follow"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" followed you")]):t._e(),t._v(" "),"reply"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" replied to your comment in "),n("strong",[n("span",{on:{click:function(s){return t.gotoPost(e)}}},[t._v("post")])])]):t._e(),t._v(" "),"collection_review"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" reviewed your "),n("strong",[n("span",{on:{click:function(s){return t.gotoCollection(e)}}},[t._v("collection")])]),t._v(" ("),n("strong",[t._v(t._s(s.detail.stars))]),t._v(" "),n("b-icon",{staticClass:"has-text-warning",attrs:{icon:"star",size:"is-small"}}),t._v(")")],1):t._e(),t._v(" "),"post_shop_review"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" reviewed your "),n("strong",[n("span",{on:{click:function(s){return t.gotoPost(e)}}},[t._v("product")])]),t._v(" ("),n("strong",[t._v(t._s(s.detail.stars))]),t._v(" "),n("b-icon",{staticClass:"has-text-warning",attrs:{icon:"star",size:"is-small"}}),t._v(")")],1):t._e(),t._v(" "),"reserve"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" reserved your "),n("strong",[n("span",{on:{click:function(s){return t.gotoTransaction(e)}}},[t._v("product")])])]):t._e(),t._v(" "),"transaction_complete"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" completed your "),n("strong",[n("span",{on:{click:function(s){return t.gotoTransaction(e)}}},[t._v("transaction")])])]):t._e(),t._v(" "),"coins_earned"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" sent you "),n("strong",[t._v(t._s(s.detail.coins))]),t._v(" "),n("b-icon",{staticClass:"has-text-warning",attrs:{icon:"coins",size:"is-small"}}),t._v(" after completing a "),n("strong",[n("span",{on:{click:function(s){return t.gotoTransaction(e)}}},[t._v("transaction")])])],1):t._e(),t._v(" "),"gems_earned"==s.type?n("span",{staticClass:"pointer"},[n("strong",[n("span",{on:{click:function(s){return t.gotoUser(e)}}},[t._v(t._s(s.sender.name))])]),t._v(" "),s.count&&s.count>1?n("span",[t._v(" and "+t._s(s.count-1)+" others have")]):n("span",[t._v(" has")]),t._v(" sent you "),n("strong",[t._v(t._s(s.detail.gems))]),t._v(" "),n("b-icon",{staticClass:"has-text-danger",attrs:{icon:"diamond",size:"is-small"}}),t._v(" after completing a "),n("strong",[n("span",{on:{click:function(s){return t.gotoTransaction(e)}}},[t._v("transaction")])])],1):t._e()])])])])})),t._v(" "),1==t.inbox.list.hasmore?n("div",{staticClass:"has-text-centered padding-10-px margin-top-10-px margin-bottom-10-px"},[n("a",{staticClass:"button is-rounded is-small",class:t.loadingMoreInbox?"is-loading":"",on:{click:t.loadMore}},[t._v("load more")])]):n("div",{staticClass:"has-text-centered padding-10-px margin-bottom-10-px"},[t.inbox.list.list&&t.inbox.list.list.length?n("p",[t._v("...")]):n("p",{staticClass:"has-text-grey-light"},[t._v("Your inbox is empty!")])])],2):t._e()])}),[],!1,null,"7918c0c3",null).exports,u=n(285),d=n(282),m=n.n(d);function v(){var t=Object(e.a)(["\n                  mutation markMessageAsRead($hash: String!, $aliashash :  String) {\n                     markMessageAsRead(hash: $hash, aliashash : $aliashash) {\n                        success\n                     }\n                  }\n               "]);return v=function(){return t},t}function p(){var t=Object(e.a)(["\n            query wallet {\n               wallet {\n                  coins\n                  gems\n                  card\n               }\n            }\n         "]);return p=function(){return t},t}function h(){var t=Object(e.a)(["\n               subscription conversation {\n                  conversation {\n                     hash\n                     seen\n                     messages (total: 1) {\n                        hasmore\n                        list {\n                           timestamp\n                           hash\n                           content\n                           author {\n                              name\n                           }\n                        }\n                     }\n                     members {\n                        hasmore\n                        list {\n                           name\n                        }\n                     }\n                     activemembers {\n                        image{\n                           hash\n                        }\n                     }\n                  }\n               }\n            "]);return h=function(){return t},t}function g(){var t=Object(e.a)(["\n            query conversations($page: Int) {\n               conversations(page: $page) {\n                  hasmore\n                  list {\n                  hash\n                  seen\n                  messages (total: 1) {\n                     hasmore\n                     list {\n                        timestamp\n                        hash\n                        content\n                        author {\n                        name\n                        }\n                     }\n                  }\n                  members {\n                     hasmore\n                     list {\n                        name\n                     }\n                  }\n                  activemembers {\n                        image{\n                           hash\n                        }\n                  }\n                  }\n               }\n            }\n            "]);return g=function(){return t},t}function _(){var t=Object(e.a)(["\n               subscription inboxitem {\n                  inboxitem {\n                  type\n                  origin\n                  hash\n                  detail\n                  count\n                  sender {\n                     username\n                     name\n                     hash\n                     image {\n                        hash\n                     }\n                  }\n                  seen\n                  }\n               }\n            "]);return _=function(){return t},t}function b(){var t=Object(e.a)(["\n            query inbox($page: Int) {\n               inbox {\n                  nunseen\n                  list(page: $page) {\n                  hasmore\n                  list {\n                     type\n                     origin\n                     hash\n                     detail\n                     count\n                     sender {\n                        username\n                        name\n                        hash\n                        image {\n                           hash\n                        }\n                     }\n                     seen\n                  }\n                  }\n               }\n            }\n            "]);return b=function(){return t},t}var f={apollo:{inbox:{query:i()(b()),prefetch:!1,skip:function(){return null==this.$store.state.user},subscribeToMore:{document:i()(_()),prefetch:!1,updateQuery:function(t,s){var n=s.subscriptionData;self.notiNumber++;var e=t.inbox.list.hasmore,a=t.inbox.nunseen;return{inbox:{__typename:t.inbox.__typename,nunseen:a,list:{__typename:t.inbox.list.__typename,hasmore:e,list:[n.data.inboxitem].concat(t.inbox.list.list)}}}}},update:function(t){return t&&t.inbox&&t.inbox.nunseen&&(this.notiNumber=t.inbox.nunseen),t.inbox}},conversations:{query:i()(g()),prefetch:!1,skip:function(){return null==this.$store.state.user},subscribeToMore:{document:i()(h()),prefetch:!1,updateQuery:function(t,s){var n=s.subscriptionData,e=null;try{e=n.data.conversation.messages.list[0].hash}catch(t){e=null}e&&(document.getElementById(e)||(self.messageNumber=!0));for(var a=[],i=t.conversations.hasmore,o=0;o<t.conversations.list.length;o++)t.conversations.list[o].hash!=n.data.conversation.hash&&a.push(t.conversations.list[o]);return{conversations:{__typename:t.conversations.__typename,hasmore:i,list:[n.data.conversation].concat(a)}}}},update:function(t){return this.messageIconUpdateFromFirstLoad||(t&&t.conversations&&t.conversations.list&&t.conversations.list.length>0&&(t.conversations.list[0].seen||(this.messageNumber=!0)),this.messageIconUpdateFromFirstLoad=!0),t.conversations}},wallet:{query:i()(p()),prefetch:!1,skip:function(){return null==this.$store.state.user},update:function(t){return t.wallet}}},props:{},data:function(){return{server:"https://api.naya.com.np/",self:null,userLoggedIn:null,username:null,inbox:{},pageNumber:1,messagePageNumber:1,messageIconUpdateFromFirstLoad:!1,searchItem:"post",postSearchContent:null,collectionSearchContent:null,userSearchContent:null,skipQuery:!0,notiNumber:null,messageNumber:!1,conversations:{},wallet:{},burgerTarget:"",loadingMoreMessages:!1,loadingMoreInbox:!1,truncate:m.a}},methods:{activeSeen:function(t,s){0==s&&this.$apollo.mutate({mutation:i()(v()),variables:{hash:t}}).then((function(t){t.data.markInboxAsRead.success})).catch((function(t){}))},toggleBurger:function(){this.burgerTarget?this.burgerTarget="":this.burgerTarget="is-active"},gotoWallet:function(){this.$router.push({name:"wallet"})},openConversation:function(t){this.$router.push({name:"messages",params:{hash:t}})},search:function(t){"post"==t?this.$router.push({name:"searchPost",params:{q:this.postSearchContent}}):"collection"==t?this.$router.push({name:"searchCollection",params:{q:this.collectionSearchContent}}):"user"==t&&this.$router.push({name:"searchUsers",params:{q:this.userSearchContent}})},loadMore:function(){var t=this;this.pageNumber++,this.loadingMoreInbox=!0,this.$apollo.queries.inbox.fetchMore({variables:{page:this.pageNumber},updateQuery:function(t,s){var n=s.fetchMoreResult,e=n.inbox.list.list,a=n.inbox.nunseen,i=n.inbox.list.hasmore;return n?{inbox:{__typename:t.inbox.__typename,nunseen:a,list:{__typename:t.inbox.list.__typename,list:t.inbox.list.list.concat(e),hasmore:i}}}:t}}).then((function(s){t.loadingMoreInbox=!1})).catch((function(s){t.loadingMoreInbox=!1,s&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMoreMessages:function(){var t=this;this.messagePageNumber++,this.loadingMoreMessages=!0,this.$apollo.queries.conversations.fetchMore({variables:{page:this.messagePageNumber},updateQuery:function(t,s){var n=s.fetchMoreResult,e=n.conversations.list,a=n.conversations.hasmore;return n?{conversations:{__typename:t.conversations.__typename,hasmore:a,list:t.conversations.list.concat(e)}}:t}}).then((function(s){t.loadingMoreMessages=!1})).catch((function(s){t.loadingMoreMessages=!1,s&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},gotoMessages:function(){this.$router.push({name:"messages"})},logOut:function(){this.$router.push({name:"logout"})},userinfo:function(){this.userLoggedIn=localStorage.getItem("userLoggedIn"),this.username=localStorage.getItem("username")}},components:{"app-notification":l,"app-logo":u.a},created:function(){},beforeMount:function(){this.userinfo()},beforeDestroy:function(){},mounted:function(){this.notiNumber=0,this.messageNumber=0,this.$store.state.token&&this.$apollo.queries.conversations.refetch(),self=this},destroyed:function(){},filters:{"to-uppercase":function(t){return t.toUpperCase()}}},C=(n(345),Object(c.a)(f,(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"is-hidden-print"},[n("nav",{staticClass:"navbar is-transparent has-background-white-biss border-bottom-1-px-f8f8f8 z-index-5"},[n("div",{staticClass:"navbar-brand"},[n("div",{staticClass:"navbar-item dropdown-is-small padding-RL-5-px"},[n("div",[n("b-dropdown",{staticClass:"no-overflow"},[n("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[n("b-icon",{attrs:{icon:"menu-down-outline",size:"is-small"}})],1),t._v(" "),n("div",{staticClass:"dropdown-inner-content"},[n("b-dropdown-item",{staticClass:"is-hidden-tablet"},[n("nuxt-link",{attrs:{to:{name:"search"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"magnify"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Search\n                           ")])],1)])],1),t._v(" "),this.$store.state.user?n("hr",{staticClass:"dropdown-divider is-hidden-tablet"}):t._e(),t._v(" "),this.$store.state.user?n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"newsFeed"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-multiple"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Newsfeed\n                           ")])],1)])],1):t._e(),t._v(" "),n("hr",{staticClass:"dropdown-divider",class:this.$store.state.user?"":"is-hidden-tablet"}),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"popular"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"chevron-double-up"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Explore\n                           ")])],1)])],1),t._v(" "),n("hr",{staticClass:"dropdown-divider"}),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"collections"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"tag-heart"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Collections\n                           ")])],1)])],1),t._v(" "),this.$store.state.user?n("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),this.$store.state.user?n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"transactions",query:{type:"buyer"}}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"cart"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Transactions\n                           ")])],1)])],1):t._e(),t._v(" "),this.$store.state.user?n("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),this.$store.state.user?n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"userFollowers",query:{username:t.$store.state.user.username}}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-group"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Followers\n                           ")])],1)])],1):t._e(),t._v(" "),this.$store.state.user?n("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),this.$store.state.user?n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"userFollowing",query:{username:t.$store.state.user.username}}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-star"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Following\n                           ")])],1)])],1):t._e(),t._v(" "),n("hr",{staticClass:"dropdown-divider"}),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"domains"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"earth"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                              Domains\n                           ")])],1)])],1)],1)])],1)]),t._v(" "),n("app-logo",{staticClass:"margin-right-15-px",attrs:{header:!0}}),t._v(" "),this.$store.state.user?n("div",{staticClass:"navbar-item dropdown-is-medium rt-dropdown"},[n("b-dropdown",{ref:"dropdown",on:{"active-change":function(s){t.notiNumber=0}}},[n("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[n("span",[t.notiNumber?n("b-icon",{staticClass:"badge has-badge-rounded has-badge-danger",attrs:{icon:"bell-outline","data-badge":t.notiNumber}}):n("b-icon",{attrs:{icon:"bell-outline"}})],1)]),t._v(" "),n("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[n("app-notification",{attrs:{inbox:t.inbox,loadingMoreInbox:t.loadingMoreInbox},on:{loadMore:function(s){return t.loadMore(s)}}})],1)],1)],1):t._e(),t._v(" "),this.$store.state.user?n("div",{staticClass:"navbar-item dropdown-is-medium rt-dropdown"},[n("b-dropdown",{ref:"dropdownMessage"},[n("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[n("span",[t.messageNumber?n("b-icon",{staticClass:"badge has-badge-rounded has-badge-warning has-badge-small",attrs:{icon:"email-open-outline","data-badge":""}}):n("b-icon",{attrs:{icon:"email-open-outline"}})],1)]),t._v(" "),n("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[n("div",[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t.inbox&&t.inbox.ninbox?n("a",{staticClass:"button is-small is-outlined msg-count cursor-normal",attrs:{disabled:""}},[t._v(t._s(t.messageNumber))]):t._e(),t._v("\n                              Messages\n                              ")])]),t._v(" "),t.conversations?n("div",{staticClass:"dropdown-inner-content"},[t._l(t.conversations.list,(function(s,e){return n("div",{key:e,staticClass:"list-pad-bot-border",class:{notseen:!s.seen},on:{click:function(n){return t.openConversation(s.hash)}}},[n("article",{staticClass:"media position-relative"},[t._l(s.activemembers,(function(s,e){return n("figure",{key:e,class:e<1?"media-left z-index-1":"stacked-images"},[n("p",{staticClass:"image is-32x32"},[n("img",{staticClass:"border-radius-5-px responsive",attrs:{src:s.image?t.server+"attachments.img/sm/"+s.image.hash:t.server+"public/images/sm/empty_pp.png",alt:"Placeholder image"}})])])})),t._v(" "),n("div",{staticClass:"media-content margin-left-10-px"},[t._l(s.members.list,(function(s,e){return e<2?n("span",{key:e},[n("strong",[e>0?n("span",[t._v(", ")]):t._e(),t._v(t._s(s.name))])]):t._e()})),t._v(" "),s.members.list.length>2?n("span",[t._v(", "),n("span",{staticClass:"has-text-weight-bold is-size-7 has-text-grey-light"},[t._v("[+"+t._s(s.members.list.length-2)+" more]")])]):t._e(),n("br"),t._v(" "),s.messages&&s.messages.list&&s.messages.list.length>0?n("div",{domProps:{innerHTML:t._s(t.truncate(s.messages.list[0].content?s.messages.list[0].content.replace(/<br>/g," ").replace(/\n/g,""):"",75).text)}}):t._e()],2)],2)])})),t._v(" "),1==t.conversations.hasmore?n("div",{staticClass:"has-text-centered padding-10-px margin-top-10-px margin-bottom-10-px"},[n("a",{staticClass:"button is-rounded is-small",class:t.loadingMoreMessages?"is-loading":"",on:{click:t.loadMoreMessages}},[t._v("load more")])]):n("div",{staticClass:"has-text-centered padding-10-px margin-bottom-10-px"},[t.conversations.list&&t.conversations.list.length?n("p",[t._v("...")]):n("p",{staticClass:"has-text-grey-light"},[t._v("No messages yet!")])])],2):t._e()])])],1)],1):t._e(),t._v(" "),n("nuxt-link",{staticClass:"navbar-item is-hidden-mobile",attrs:{to:{name:"search"}}},[n("button",{staticClass:"button is-white navbar-item"},[n("b-icon",{staticClass:"margin-top--3-px",attrs:{icon:"magnify"}})],1)]),t._v(" "),n("div",{staticClass:"user-options"},[this.$store.state.user?n("div",[n("b-dropdown",{staticClass:"no-overflow",attrs:{position:"is-bottom-left"}},[n("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[n("figure",{staticClass:"image is-24x24 is-pulled-left margin-right-10-px"},[n("img",{staticClass:"is-rounded",attrs:{src:t.$store.state.profileImageHash?t.server+"attachments.img/xs/"+t.$store.state.profileImageHash:t.server+"public/images/xs/empty_pp.png"}})]),t._v(" "),n("span",{staticClass:"is-hidden-mobile"},[t._v(t._s(t.$store.state.user.username))]),t._v(" "),n("b-icon",{attrs:{icon:"menu-down-outline",size:"is-small"}})],1),t._v(" "),n("div",{staticClass:"dropdown-inner-content"},[t.wallet?n("b-dropdown-item",{staticClass:"has-text-centered padding-20-px-important is-size-6",on:{click:t.gotoWallet}},[n("b-icon",{attrs:{icon:"coins has-text-warning",size:"is-small"}}),t._v(" "+t._s(t.wallet.coins)+"\n                           "),n("b-icon",{staticClass:"margin-left-5-px has-text-danger",attrs:{icon:"diamond",size:"is-small"}}),t._v(" "+t._s(t.wallet.gems)+"\n                           "),n("b-icon",{staticClass:"margin-left-5-px has-text-grey",attrs:{icon:"wallet",size:"is-small"}}),t._v(" "+t._s(t.wallet.card)+"\n                        ")],1):t._e(),t._v(" "),n("hr",{staticClass:"dropdown-divider"}),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"user",params:{username:t.$store.state.user.username}}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-box"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 My profile\n                              ")])],1)])],1),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"settings"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-settings"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 Settings\n                              ")])],1)])],1),t._v(" "),n("hr",{staticClass:"dropdown-divider"}),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"user",params:{username:"naya"}}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"information"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 About us\n                              ")])],1)])],1),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"logout"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"logout-variant"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 Logout\n                              ")])],1)])],1)],1)])],1):n("div",[n("b-dropdown",{staticClass:"no-overflow",attrs:{position:"is-bottom-left"}},[n("button",{staticClass:"button is-white navbar-item",attrs:{slot:"trigger"},slot:"trigger"},[n("b-icon",{attrs:{icon:"menu-down-outline",size:"is-small"}}),n("span",{staticClass:"is-size-7"},[t._v("Log in")])],1),t._v(" "),n("div",{staticClass:"dropdown-inner-content"},[n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"login"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"login-variant"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 Login\n                              ")])],1)])],1),t._v(" "),n("b-dropdown-item",[n("nuxt-link",{attrs:{to:{name:"register"}}},[n("div",{staticClass:"media"},[n("b-icon",{staticClass:"media-left",attrs:{icon:"account-plus"}}),t._v(" "),n("div",{staticClass:"media-content"},[t._v("\n                                 Register\n                              ")])],1)])],1)],1)])],1)])],1)])])}),[],!1,null,"af3e4730",null));s.a=C.exports},285:function(t,s,n){"use strict";n(97),n(153),n(154),n(47);var e=n(96),a=n(95),i=n.n(a);function o(){var t=Object(e.a)(["\n                     mutation analytics {\n                     analytics {\n                        success\n                     }\n                     }\n                  "]);return o=function(){return t},t}var r={props:["header","domain"],data:function(){return{server:"https://api.naya.com.np/",local:"https://naya.com.np/"}},methods:{analytics:function(){this.$apollo.mutate({mutation:i()(o()),context:{headers:{nayahash:this.$cookies.get("nayahash")}}}).then((function(t){})).catch((function(t){}))}},mounted:function(){var t=this;if(null==this.$cookies.get("nayahash")){var s=function t(s){return s?(s^16*Math.random()>>s/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}();this.$cookies.set("nayahash",s,{path:"/",maxAge:2592e3})}setTimeout((function(){t.analytics()}),2e3)}},c=n(22),l=Object(c.a)(r,(function(){var t=this,s=t.$createElement,n=t._self._c||s;return t.header&&t.domain?n("a",{staticClass:"navbar-item naya-logo",attrs:{href:t.local}},[t._m(0)]):t.header?n("nuxt-link",{staticClass:"navbar-item naya-logo",attrs:{to:{name:"index"}}},[n("span",{staticClass:"logo"},[t._v("\n      n"),n("span",{staticClass:"is-hidden-mobile"},[t._v("aya")])])]):n("div",{staticClass:"naya-logo"},[n("nuxt-link",{attrs:{to:{name:"index"}}},[n("span",{staticClass:"logo"},[t._v("naya")])])],1)}),[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"logo"},[this._v("\n      n"),s("span",{staticClass:"is-hidden-mobile"},[this._v("aya")])])}],!1,null,null,null);s.a=l.exports},301:function(t,s,n){},302:function(t,s,n){},344:function(t,s,n){"use strict";var e=n(301);n.n(e).a},345:function(t,s,n){"use strict";var e=n(302);n.n(e).a}}]);