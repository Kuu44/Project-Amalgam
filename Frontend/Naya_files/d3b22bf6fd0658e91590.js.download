/*! For license information please see d3b22bf6fd0658e91590.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1214:function(t,e,i){"use strict";i.r(e);i(98),i(99),i(70),i(153),i(154),i(47),i(38);var a=i(10),n=(i(69),i(97),i(96)),s=i(291),o=i(283),l=i(100),r=i.n(l),c=i(102),h=i.n(c),u=i(95),m=i.n(u),p=i(286),d=i.n(p),v=i(290),g=i(287),f=i.n(g);function b(){var t=Object(n.a)(["\n            query collection($hash: String!, $status : ApprovalStatus, $page: Int, $offset : Int, $sortby : SortBy) {\n            collection(hash: $hash) {\n                posts(page: $page, offset : $offset, sortby : $sortby, status : $status) {\n                    hasmore\n                    list {\n                        title\n                        status\n                        fullstatus\n                        hash\n                        nlikes\n                        timestamp\n                        truncated\n                        ncollected\n                        privacy\n                        liked\n                        permissions\n                        ncomments\n                        theme\n                        themedata\n                        collection {\n                         hash\n                        }\n                        attachments {\n                            hash\n                        }\n                        comments {\n                            hasmore\n                            list {\n                                hash\n                                content\n                            }\n                        }\n                        author {\n                            username\n                            name\n                            hash\n                            image {\n                                hash\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        "]);return b=function(){return t},t}function y(){var t=Object(n.a)(["\n            query collection($hash: String!, $page: Int) {\n            collection(hash: $hash) {\n                 reviews(page : $page) {\n                     hasmore\n                         list {\n                             hash\n                             stars\n                             content\n                             timestamp\n                             author {\n                                 username\n                                 name\n                             }   \n                         }\n                 }\n            }\n        }\n        "]);return y=function(){return t},t}function _(){var t=Object(n.a)(["\n            mutation removeCollectionReview($hash: String!) {\n              removeCollectionReview(hash: $hash) {\n                success\n              }\n            }\n          "]);return _=function(){return t},t}function w(){var t=Object(n.a)(["\n            mutation addCollectionReview(\n              $hash: String!\n              $content: String\n              $stars: Stars!\n            ) {\n              addCollectionReview(\n                hash: $hash\n                content: $content\n                stars: $stars\n              ) {\n                hash\n                stars\n                content\n                timestamp,\n                newavg\n                author {\n                  username\n                  name\n                }\n              }\n            }\n          "]);return w=function(){return t},t}function C(){var t=Object(n.a)(["\n            mutation setNewCollectionDescription(\n              $hash: String!\n              $description: String!\n            ) {\n              setNewCollectionDescription(\n                hash: $hash\n                description: $description\n              ) {\n                success\n              }\n            }\n          "]);return C=function(){return t},t}function $(){var t=Object(n.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return $=function(){return t},t}function x(){var t=Object(n.a)(["\n            mutation setCollectionTheme($hash: String!, $theme: Theme!) {\n              setCollectionTheme(hash: $hash, theme: $theme) {\n                success\n              }\n            }\n          "]);return x=function(){return t},t}function k(){var t=Object(n.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return k=function(){return t},t}function T(){var t=Object(n.a)(["\n            mutation createConversation(\n              $aliashash: String\n              $collectionhash: String\n            ) {\n              createConversation(\n                aliashash: $aliashash\n                collectionhash: $collectionhash\n              ) {\n                hash\n              }\n            }\n          "]);return T=function(){return t},t}function A(){var t=Object(n.a)(["\n            mutation removeCollectionLogo($hash: String!) {\n              removeCollectionLogo(hash: $hash) {\n                  success\n              }\n            }\n          "]);return A=function(){return t},t}function S(){var t=Object(n.a)(["\n            mutation setNewCollectionLogo($hash: String!, $collectionhash : String!) {\n              setNewCollectionLogo(hash: $hash, collectionhash : $collectionhash) {\n               hash\n              }\n            }\n          "]);return S=function(){return t},t}function M(){var t=Object(n.a)(["\n            mutation addPost(\n              $title: String\n              $status: String\n              $privacy: PostPrivacy!\n              $hidefromprofile: NoYes!\n              $attachments: [String!]\n              $customfield: String\n              $collectionhash: String\n              $aliashash: String\n              $theme: Theme!\n              $themedata_link: ThemeLinkData\n              $themedata_shop: ThemeShopData\n            ) {\n              addPost(\n                title: $title\n                status: $status\n                privacy: $privacy\n                hidefromprofile: $hidefromprofile\n                attachments: $attachments\n                customfield: $customfield\n                collectionhash: $collectionhash\n                aliashash: $aliashash\n                theme: $theme\n                themedata_link: $themedata_link\n                themedata_shop: $themedata_shop\n              ) {\n                title\n                status\n                fullstatus\n                hash\n                nlikes\n                timestamp\n                truncated\n                ncollected\n                privacy\n                liked\n                permissions\n                ncomments\n                theme\n                themedata\n                collection {\n                  hash\n                }\n                attachments {\n                  hash\n                }\n                comments {\n                  hasmore\n                  list {\n                    hash\n                    content\n                  }\n                }\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return M=function(){return t},t}function R(){var t=Object(n.a)(["\n        query collection($hash: String!, $page: Int, $status : ApprovalStatus, $sortby : SortBy, $name : String!) {\n          collection(hash: $hash) {\n            name\n            description\n            privacy\n            hash\n            type\n            contact\n            location\n            requireapproval\n            permissions\n            enablesmartapproval\n            stars\n            theme\n            nitems\n            npending\n            domain { \n               hash\n               url\n            }\n            symlink(name : $name){\n               name\n               reference\n            }\n            logo{\n                hash\n            }\n            reviews {\n              hasmore\n              list {\n                hash\n                stars\n                content\n                timestamp,\n                newavg\n                author {\n                  username\n                  name\n                }\n              }\n            }\n            publicwrite\n            members {\n              hasmore\n              list {\n                name\n              }\n            }\n            posts(page: $page, status : $status, sortby : $sortby) {\n              hasmore\n              list {\n                title\n                status\n                fullstatus\n                hash\n                nlikes\n                timestamp\n                truncated\n                ncollected\n                privacy\n                liked\n                permissions\n                ncomments\n                theme\n                themedata\n                domain{\n                   hash\n                   url\n                }\n                collection {\n                  hash\n                }\n                attachments {\n                  hash\n                }\n                comments {\n                  hasmore\n                  list {\n                    hash\n                    content\n                  }\n                }\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return R=function(){return t},t}var O,L={apollo:{collection:{query:m()(R()),variables:function(){return{hash:this.$route.params.hash,name:"shop",page:parseInt(this.$route.query.page),status:this.$route.query.status,sortby:this.$route.query.sortby}},update:function(t){return t.collection&&(this.description=t.collection.description,t.collection.symlink&&(this.symlink=t.collection.symlink),t.collection.reviews&&t.collection.reviews.list&&(this.reviews=t.collection.reviews.list,this.hasmoreReviews=t.collection.reviews.hasmore),t.collection.posts&&t.collection.posts.list&&(this.posts=t.collection.posts.list,this.hasmore=t.collection.posts.hasmore),t.collection.logo&&(this.collectionLogoHash=t.collection.logo.hash),t.collection.stars&&(this.rating=t.collection.stars.rating)),t.collection},error:function(t){t.message=="GraphQL error: could not find collection/"+this.$route.params.hash&&this.$router.replace({name:"error404"})}}},data:function(){var t=this;return{infiniteLoadTrigger:!1,collectionLogoHash:null,profileImageDeleted:!1,publicWrite:!1,rating:0,files:[],description:"",isLoadingDes:!1,isLoadingName:!1,name:"",editDesShow:!1,nameChangeShow:!1,id:null,collection:{},posts:[],offset:0,hasmore:null,hash:this.$route.params.hash,currentUser:null,isRateModalActive:!1,review:"",pageNumber:this.$route.query.page?this.$route.query.page:1,prevPageQuery:function(){var e=JSON.parse(JSON.stringify(t.$route.query))||{},i=parseInt(t.pageNumber);return i>1?e.page=i-1:e.page&&delete e.page,e},nextPageQuery:function(){var e=JSON.parse(JSON.stringify(t.$route.query))||{},i=parseInt(t.pageNumber);return i>=1?e.page=i+1:e.page&&delete e.page,e},sortbyQuery:function(e){var i=JSON.parse(JSON.stringify(t.$route.query))||{};return i.page&&delete i.page,i.sortby=e,i},isFlagCollectionModalActive:!1,flagType:null,collectionTheme:null,isThemeModalActive:!1,reviews:[],reviewsPageNumber:1,hasmoreReviews:0,isReviewModalActive:!1,isFlagReviewModalActive:!1,reviewhash:null,isImageUploadModalActive:!1,server:"https://api.naya.com.np/",hideFromProfile:!1,privacy:"public",dropFiles:[],attachedImages:[],disabled:!1,loadingMoreReviews:!1,symlink:null,uploading:!1,routeEnter:null}},beforeRouteEnter:function(t,e,i){i((function(t){null!=e.name&&(t.routeEnter=e.name,t.$apollo.queries.collection.refetch())}))},head:function(){return{title:this.collection?this.collection.name:"Naya",meta:[{hid:"description",name:"description",content:this.collection&&this.collection.description?this.collection.description.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:title",property:"og:title",content:this.collection?this.collection.name:"Naya"},{hid:"og:description",property:"og:description",content:this.collection&&this.collection.description?this.collection.description.replace(/<[^>]*>?/gm,""):"Naya"},{hid:"og:image",property:"og:image",content:this.collectionLogoHash?this.server+"attachments.img/lg/"+this.collectionLogoHash:this.server+"public/images/lg/empty_cl.png"}]}},methods:{decreaseOffset:function(){this.offset--},removeAddedImage:function(t){this.attachedImages.splice(t,1)},addImageToModal:(O=Object(a.a)(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,l,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(t){return new Promise((function(e){new f.a(t,{quality:.98,maxWidth:1200,maxHeight:1200,success:function(t){e(t)},error:function(i){e(t)}})}))},e=new FormData,this.uploading=!0,t.next=6,i(this.dropFiles[0]);case 6:if(a=t.sent,this.dropFiles.length){for(n=0;n<1;n++)e.append("attachments",a,a.name);s=document.querySelector("#uploaded-collection-logo"),o="image-loader-"+Math.random().toString(36).substr(2,9),l='\n               <figure id="'.concat(o,'" class="image is-square bg-cover has-background-grey-lighter border-radius-3-px overflow-hidden">\n                  <div class="loader-wave"></div>\n               </figure>\n            '),s.insertAdjacentHTML("beforeend",l),h()({method:"post",url:"".concat(this.server,"upload"),data:e,headers:{"Content-Type":"multipart/form-data; boundary=${imageData._boundary}",authorization:this.$store.state.token},onUploadProgress:function(t){var e=t.loaded,i=t.total;if(i){var a=Math.ceil(e/i*100);document.querySelector("#".concat(o," > .loader-wave")).style.height=a+"%"}}}).then((function(t){t.data.success?r.attachedImages=r.attachedImages.concat(t.data.attachments):"Only jpeg, jpg or png formats are supported"==t.data.error.message?r.$toast.open({message:"Only jpeg, jpg or png formats are supported",type:"is-danger",position:"is-bottom"}):"File too large"==t.data.error.message?r.$toast.open({message:"File size is too large",type:"is-danger",position:"is-bottom"}):r.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),r.uploading=!1,r.dropFiles=[];var e=document.querySelector("#".concat(o));e.parentNode.removeChild(e)})).catch((function(t){this.uploading=!1,this.dropFiles=[];var e=document.querySelector("#".concat(o));e.parentNode.removeChild(e)}))}case 9:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)}),changeLogoImage:function(){var t=this;this.disabled=!0;var e="public"==this.collection.privacy?"public":"locked_to_collection",i=this.collection.hash,a=this.collection.hash,n=[],s=!0,o=!1,l=void 0;try{for(var r,c=this.attachedImages[Symbol.iterator]();!(s=(r=c.next()).done);s=!0){var h=r.value;n.push(h.filename)}}catch(t){o=!0,l=t}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}this.$apollo.mutate({mutation:m()(M()),variables:{privacy:e,hidefromprofile:"yes",attachments:n,theme:"status",collectionhash:i,aliashash:a,status:""}}).then((function(e){t.offset++,t.posts=[e.data.addPost].concat(t.posts),t.setCollectionLogo(e.data.addPost.attachments[0].hash),t.isImageUploadModalActive=!1,t.attachedImages=[],t.disabled=!1})).catch((function(e){t.attachedImages=[],t.disabled=!1,"GraphQL error: you are banned from using this feature until Invalid Date"==e.message&&t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"})}))},setCollectionLogo:function(t){var e=this;this.$apollo.mutate({mutation:m()(S()),variables:{hash:t,collectionhash:this.collection.hash}}).then((function(t){e.collectionLogoHash=t.data.setNewCollectionLogo.hash})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeCollectionLogo:function(){var t=this;this.$apollo.mutate({mutation:m()(A()),variables:{hash:this.collection.hash}}).then((function(e){t.collectionLogoHash=null,t.profileImageDeleted=!0,t.isImageUploadModalActive=!1})).catch((function(e){t.isImageUploadModalActive=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},sendMessage:function(){var t=this;this.$apollo.mutate({mutation:m()(T()),variables:{collectionhash:this.$route.params.hash}}).then((function(e){t.$router.push({name:"messages",params:{hash:e.data.createConversation.hash}})})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openReviewFlagModal:function(t){this.reviewhash=t,this.isFlagReviewModalActive=!0},flagReview:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:m()(k()),variables:{hash:this.reviewhash,type:this.flagType,documenttype:"collection_review"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Review has been successfully flagged!!",type:"is-success"}),t.isFlagReviewModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this Review",type:"is-danger"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagReviewModalActive=!1,t.flagType=null})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},setCollectionTheme:function(){var t=this,e=this.hash;this.$apollo.mutate({mutation:m()(x()),variables:{hash:e,theme:this.collectionTheme}}).then((function(e){t.isThemeModalActive=!1,t.$apollo.queries.collection.refetch(),t.name=""})).catch((function(e){t.isThemeModalActive=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagCollection:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:m()($()),variables:{hash:this.$route.params.hash,type:this.flagType,documenttype:"collection"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Collection has been successfully flagged!!",type:"is-success"}),t.isFlagCollectionModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this Collection",type:"is-danger"}):"GraphQL error: cannot flag your own document, use delete instead"==e.message?t.$toast.open({message:"Cannot flag your own Collection, use delete instead",type:"is-danger"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagCollectionModalActive=!1,t.flagType=null})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},gotoCollectionSettings:function(){this.$router.push({name:"collectionSettings",params:{collection:this.collection,hash:this.collection.hash}})},setDescription:function(){var t=this,e=this.description,i=this.hash;this.isLoadingDes=!0,this.$apollo.mutate({mutation:m()(C()),variables:{hash:i,description:e}}).then((function(e){t.isLoadingDes=!1,t.editDesShow=!1,t.$apollo.queries.collection.refetch(),t.description=""})).catch((function(e){t.isLoadingDes=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRateModal:function(t){this.rating=t,this.isRateModalActive=!0},setRating:function(){var t=this,e=this.rating,i=this.review,a=this.hash;this.$apollo.mutate({mutation:m()(w()),variables:{hash:a,content:i,stars:e}}).then((function(e){t.isRateModalActive=!1,t.reviews=[e.data.addCollectionReview].concat(t.reviews),e.data.addCollectionReview.stars&&(t.rating=e.data.addCollectionReview.newavg.rating),t.review=""})).catch((function(e){"GraphQL error: you are banned from using this feature until Invalid Date"==e.message?t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeReview:function(t){var e=this;this.$apollo.mutate({mutation:m()(_()),variables:{hash:t}}).then((function(t){e.$apollo.queries.collection.refetch(),e.isReviewModalActive=!1})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMoreReviews:function(){var t=this;this.reviewsPageNumber++,this.loadingMoreReviews=!0,this.$apollo.query({query:m()(y()),variables:{hash:this.$route.params.hash,page:this.reviewsPageNumber}}).then((function(e){t.reviews=t.reviews.concat(e.data.collection.reviews.list),t.hasmoreReviews=e.data.collection.reviews.hasmore,t.loadingMoreReviews=!1})).catch((function(e){t.loadingMoreReviews=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadmore:function(){var t=this;this.pageNumber++,this.$apollo.query({query:m()(b()),variables:{hash:this.$route.params.hash,page:this.pageNumber,offset:this.offset,status:this.$route.query.status,sortby:this.$route.query.sortby}}).then((function(e){t.posts=t.posts.concat(e.data.collection.posts.list),t.hasmore=e.data.collection.posts.hasmore})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(t){var e=this;this.pageNumber++,this.$apollo.queries.collection.fetchMore({variables:{hash:this.$route.params.hash,page:this.pageNumber},updateQuery:function(t,e){var i=e.fetchMoreResult,a=i.collection.posts.list,n=i.collection.posts.hasmore,s=i.collection.description,o=i.collection.name,l=i.collection.privacy,r=i.collection.hash,c=i.collection.type,h=i.collection.contact,u=i.collection.requireapproval,m=i.collection.permissions,p=i.collection.stars,d=i.collection.members,v=i.collection.enablesmartapproval,g=i.collection.publicwrite;return i?{collection:{__typename:t.collection.__typename,name:o,description:s,privacy:l,hash:r,type:c,contact:h,requireapproval:u,permissions:m,enablesmartapproval:v,publicwrite:g,stars:p,members:d,posts:{__typename:t.collection.posts.__typename,list:t.collection.posts.list.concat(a),hasmore:n}}}:t}}).then((function(e){t.loaded()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},refreshQuery:function(){this.$apollo.queries.collection.refetch()},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},created:function(){this.collection.stars&&(this.rating=this.collection.stars.rating)},mounted:function(){this.$store.state.user&&(this.currentUser=this.$store.state.user.username)},components:{"app-post":s.a,"app-header":o.a,StarRating:d.a,InfiniteLoading:r.a,"app-addpost":v.a}},U=(i(349),i(22)),D=Object(U.a)(L,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("no-ssr",[i("app-header")],1),t._v(" "),i("div",{staticClass:"margin-top-0-px-imp",attrs:{id:"naya-content"}},[i("div",{staticClass:"columns is-gapless margin-bottom-0-px-imp"},[i("div",{staticClass:"column"}),t._v(" "),i("div",{staticClass:"column is-four-fifths is-full-mobile"},[i("section",{staticClass:"hero is-medium"},[i("div",{staticClass:"hero-body padding-RL-0-px"},[t.collection&&t.collection.hash?i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-one-third"},[i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-hidden-tablet"}),t._v(" "),i("div",{staticClass:"column is-5-mobile"},[i("figure",{staticClass:"image is-3by4"},[i("img",{staticClass:"border-radius-5-px",style:{"background-image":"url('"+(null!=t.collectionLogoHash?t.server+"attachments.img/md/"+t.collectionLogoHash:t.server+"public/images/md/empty_cl.png")+"')","background-size":"cover","background-position":"center center"},attrs:{src:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}}),t._v(" "),null!=t.currentUser&&t.collection.permissions&&2==t.collection.permissions.level?i("b-dropdown",{staticClass:"is-up logo-options-button"},[i("button",{staticClass:"button is-white has-text-primary",attrs:{slot:"trigger"},slot:"trigger"},[i("b-icon",{attrs:{icon:"pencil-circle"}})],1),t._v(" "),i("b-dropdown-item",{on:{click:function(e){t.isImageUploadModalActive=!0}}},[i("a",[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"file-upload-outline"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                Upload new logo\n                                             ")])],1)])]),t._v(" "),null!=t.collectionLogoHash?i("b-dropdown-item",{on:{click:t.removeCollectionLogo}},[i("a",[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"delete-outline"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                Remove logo\n                                             ")])],1)])]):t._e()],1):t._e()],1)]),t._v(" "),i("div",{staticClass:"column is-hidden-tablet"})])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"has-text-centered-mobile"},[i("div",{staticClass:"is-uppercase is-size-7"},[t._v("\n                              collection /\n                              "),i("b",[t._v(t._s(t.collection.type))])]),t._v(" "),i("h1",{staticClass:"title is-size-2 is-size-3-mobile padding-right-10-px"},[t._v(t._s(t.collection.name))])]),t._v(" "),t.editDesShow?i("div",{staticClass:"margin-top-10-px margin-bottom-20-px"},[i("textarea-autosize",{ref:"description",staticClass:"textarea inline margin-bottom-10-px background-aliceblue is-size-4 is-size-5-mobile",attrs:{rows:"2",placeholder:"Write something about this collection here ...",maxlength:"225"},nativeOn:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},model:{value:t.description,callback:function(e){t.description="string"==typeof e?e.trim():e},expression:"description"}}),t._v(" "),i("button",{staticClass:"button is-dark",class:t.isLoadingDes?"is-loading":"",on:{click:t.setDescription}},[t._v("Save")]),t._v(" "),t.isLoadingDes?t._e():i("button",{staticClass:"button is-clear margin-left-5-px",on:{click:function(e){t.editDesShow=!1}}},[t._v("Cancel")])],1):i("div",{staticClass:"is-size-5 is-size-6-mobile margin-top-10-px"},[t.collection.description&&t.collection.description.trim().length?i("span",[t._v(t._s(t.collection.description))]):t.collection.permissions&&2==t.collection.permissions.level?i("span",{staticClass:"has-text-grey"},[t._v("You are yet to write something about this collection.")]):t._e(),t._v(" "),t.collection.permissions&&2==t.collection.permissions.level?i("button",{staticClass:"button is-clear is-small is-rounded",on:{click:function(e){t.editDesShow=!0}}},[i("span",{staticClass:"is-size-7"},[t._v("EDIT")])]):t._e()]),t._v(" "),i("no-ssr",[i("div",{staticClass:"columns is-mobile margin-top-10-px"},[t.currentUser?i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-white",on:{click:t.sendMessage}},[i("b-icon",{staticClass:"has-text-grey-light margin-top-3-px",attrs:{icon:"message-text-outline"}})],1)]):t._e(),t._v(" "),t.currentUser&&t.collection.permissions&&(2==t.collection.permissions.level||1==t.collection.permissions.level)?i("div",{staticClass:"column is-narrow"},[i("b-dropdown",{staticClass:"is-up no-overflow"},[i("button",{staticClass:"button is-white",attrs:{slot:"trigger"},slot:"trigger"},[i("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"dots-horizontal-circle-outline"}})],1),t._v(" "),i("div",{staticClass:"dropdown-inner-content"},[2==t.collection.permissions.level?i("b-dropdown-item",{on:{click:function(e){t.isImageUploadModalActive=!0}}},[i("a",[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"file-upload-outline"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                   Upload new logo\n                                                ")])],1)])]):t._e(),t._v(" "),null!=t.collectionLogoHash&&2==t.collection.permissions.level?i("b-dropdown-item",{on:{click:t.removeCollectionLogo}},[i("a",[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"delete-outline"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                   Remove current logo\n                                                ")])],1)])]):t._e(),t._v(" "),null!=t.collectionLogoHash&&2==t.collection.permissions.level?i("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),2==t.collection.permissions.level?i("b-dropdown-item",{on:{click:function(e){t.editDesShow=!0}}},[i("a",[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"text"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                   Set description\n                                                ")])],1)])]):t._e(),t._v(" "),2==t.collection.permissions.level?i("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),i("b-dropdown-item",[i("nuxt-link",{attrs:{to:{name:"collectionSettings",params:{collection:t.collection,hash:t.collection.hash}}}},[i("div",{staticClass:"media"},[i("b-icon",{staticClass:"media-left",attrs:{icon:"settings"}}),t._v(" "),i("div",{staticClass:"media-content"},[t._v("\n                                                   More settings\n                                                ")])],1)])],1)],1)])],1):t.currentUser?i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-white",on:{click:function(e){t.isFlagCollectionModalActive=!0}}},[i("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"flag-outline"}})],1)]):t._e(),t._v(" "),t.$store.state.user&&"admin"==t.$store.state.user.level?i("div",{staticClass:"column is-narrow"},[i("button",{staticClass:"button is-white",on:{click:function(e){t.isThemeModalActive=!0}}},[i("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"eye-settings-outline"}})],1)]):t._e()])])],1)]):i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-2"}),t._v(" "),i("div",{staticClass:"column is-one-third"},[i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-hidden-tablet"}),t._v(" "),i("div",{staticClass:"column is-5-mobile"},[i("content-placeholders",{attrs:{rounded:!0}},[i("content-placeholders-img"),t._v(" "),i("content-placeholders-heading")],1)],1),t._v(" "),i("div",{staticClass:"column is-hidden-tablet"})])]),t._v(" "),i("div",{staticClass:"column"},[i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column is-1 is-hidden-tablet"}),t._v(" "),i("div",{staticClass:"column"},[i("content-placeholders",{attrs:{rounded:!0}},[i("content-placeholders-text",{attrs:{lines:3}})],1)],1),t._v(" "),i("div",{staticClass:"column is-1 is-hidden-tablet"})])]),t._v(" "),i("div",{staticClass:"column is-2"})])])])]),t._v(" "),i("div",{staticClass:"column"})]),t._v(" "),t.collection&&t.collection.hash?i("div",{staticClass:"columns is-gapless"},[i("div",{staticClass:"column"}),t._v(" "),i("div",{staticClass:"column is-four-fifths"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-one-third"},[i("div",{staticClass:"margin-bottom-20-px"},[i("no-ssr",[i("star-rating",{attrs:{"star-size":24,"read-only":!((!t.collection.permissions||2!=t.collection.permissions.level)&&t.currentUser),"show-rating":!1,"active-color":"gold",padding:-2,rating:t.rating},on:{"rating-selected":t.openRateModal}})],1),t._v(" "),t.reviews&&t.reviews.length>0?i("a",{staticClass:"has-text-grey-light",on:{click:function(e){t.isReviewModalActive=!0}}},[i("i",[t._v("view reviews")])]):i("span",{staticClass:"has-text-grey-light is-italic"},[t._v("no reviews yet")])],1),t._v(" "),t.collection.domain&&t.collection.domain.hash?i("div",{staticClass:"margin-top-30-px margin-bottom-30-px"},[i("a",{staticClass:"has-text-link has-text-weight-bold",attrs:{href:"http://"+t.collection.domain.url}},[t._v(t._s(t.collection.domain.url))]),t._v(" is currently synced to this collection "),i("b-icon",{attrs:{icon:"crown has-text-warning"}})],1):t._e(),t._v(" "),t.collection&&"business"==t.collection.type&&(t.collection.permissions&&2==t.collection.permissions.level||1==t.collection.permissions.level)&&t.symlink?i("div",{staticClass:"margin-top-50-px margin-bottom-50-px"},[i("nuxt-link",{attrs:{to:{name:"compose",query:{hash:t.symlink.reference,theme:"shop"}}}},[i("button",{staticClass:"button is-small is-info is-pulled-left"},[i("b-icon",{attrs:{icon:"plus",size:"is-small"}})],1),t._v(" "),i("span",{staticClass:"margin-left-10-px"},[t._v("Add product")])])],1):t._e(),t._v(" "),t.currentUser&&t.collection.permissions&&(2==t.collection.permissions.level||1==t.collection.permissions.level)&&t.collection.npending>0&&"pending"!=t.$route.query.status?i("div",{staticClass:"margin-bottom-20-px"},[i("b",{staticClass:"tag is-warning"},[t._v(t._s(t.collection.npending))]),t._v(" "),i("span",{staticClass:"margin-left-5-px is-size-6"},[i("b",[t._v("Pending")]),t._v(" "),i("span",{staticClass:"has-text-link pointer margin-left-5-px",on:{click:function(e){return t.$router.push({query:{status:"pending"}})}}},[t._v("[show]")])])]):t._e()]),t._v(" "),i("div",{staticClass:"column"},[i("no-ssr",["pending"!=t.$route.query.status?i("app-addpost",{staticClass:"margin-bottom-5-px",attrs:{hash:t.collection.hash,name:t.collection.name,theme:t.collection.theme,collectionPermissions:t.collection.permissions,publicWrite:t.collection.publicwrite,from:"collection"},on:{refreshQuery:function(e){return t.refreshQuery(e)}}}):i("div",[i("b",{staticClass:"tag is-warning"},[t._v(t._s(t.collection.npending))]),t._v(" "),i("span",{staticClass:"margin-left-5-px is-size-6"},[i("b",[t._v("Pending")])]),t._v(" "),"pending"==t.$route.query.status?i("button",{staticClass:"button is-white margin-left-10-px margin-top--5-px",on:{click:function(e){return t.$router.push({query:null})}}},[i("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"close-box"}})],1):t._e()]),t._v(" "),i("div",{staticClass:"is-size-7 margin-bottom-20-px has-text-grey-light"},[i("b",{staticClass:"has-text-grey"},[t._v(t._s(t.collection.publicwrite?"Everyone":"Only members"))]),t._v(" can post to this collection.\n                        \n                        \n                        "),t.currentUser&&t.collection.permissions&&(2==t.collection.permissions.level||1==t.collection.permissions.level)?i("nuxt-link",{staticClass:"has-text-link",attrs:{to:{name:"collectionSettings",params:{collection:t.collection,hash:t.collection.hash}}}},[i("span",[t._v("Edit")])]):t.collection.permissions&&1==t.collection.permissions.write?i("span",[t._v("You have access.")]):t._e()],1)],1),t._v(" "),i("no-ssr",[i("p",{staticClass:"margin-bottom-10-px has-text-right"},[i("b-dropdown",{staticClass:"has-text-left is-right"},[i("button",{staticClass:"button is-text is-small margin-top-10-px",attrs:{slot:"trigger"},slot:"trigger"},[i("span",[t._v("Sort")]),t._v(" "),i("b-icon",{attrs:{icon:"unfold-more-horizontal",size:"is-small"}})],1),t._v(" "),i("b-dropdown-item",[i("nuxt-link",{attrs:{to:{query:this.sortbyQuery("popular")}}},[t._v("Popular")])],1),t._v(" "),i("b-dropdown-item",[i("nuxt-link",{attrs:{to:{query:this.sortbyQuery("trending")}}},[t._v("Trending")])],1),t._v(" "),i("b-dropdown-item",[i("nuxt-link",{attrs:{to:{query:this.sortbyQuery("latest")}}},[t._v("Latest")])],1)],1)],1)]),t._v(" "),t.collection&&t.collection.posts?i("div",[t._l(t.posts,(function(e,a){return i("div",{key:a,staticClass:"margin-bottom-50-px"},[i("app-post",{attrs:{routeEnter:t.routeEnter,from:t.$route.query.status,postObject:e,profileImageDeleted:t.profileImageDeleted,collectionLogoHash:t.collectionLogoHash,collectionPermissions:t.collection.permissions,collectionhash:t.collection.hash},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseOffset:function(e){return t.decreaseOffset(e)}}})],1)})),t._v(" "),1==t.hasmore?i("center",[i("button",{staticClass:"button is-clear",on:{click:t.loadmore}},[t._v("load more")])]):t._e(),t._v(" "),this.pageNumber>1?i("nuxt-link",{staticClass:"is-hidden",attrs:{to:{query:this.prevPageQuery()}}},[t._v("page "+t._s(parseInt(this.pageNumber)-1))]):t._e(),t._v(" "),1==t.hasmore?i("nuxt-link",{staticClass:"is-hidden",attrs:{to:{query:this.nextPageQuery()}}},[t._v("page "+t._s(parseInt(this.pageNumber)+1))]):t._e()],2):t._e()],1)])]),t._v(" "),i("div",{staticClass:"column"})]):t._e(),t._v(" "),t.collection.contact&&(t.collection.contact.phone||t.collection.contact.mobile)||t.collection.location?i("div",{staticClass:"margin-top-50-px"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column"}),t._v(" "),i("div",{staticClass:"column is-four-fifths"},[i("div",{staticClass:"is-divider"}),t._v(" "),i("div",{staticClass:"columns is-size-6-half"},[i("div",{staticClass:"column padding-bottom-0-px"},[i("b",[t._v(t._s(t.collection.name))])]),t._v(" "),i("div",{staticClass:"column padding-top-0-px has-text-right has-text-left-mobile"},[t.collection.location?i("span",[t._v(t._s(t.collection.location)),i("br")]):t._e(),t._v(" "),t.collection.contact&&t.collection.contact.mobile?i("span",[i("b-icon",{attrs:{icon:"cellphone-iphone",size:"is-small"}}),t._v(" "+t._s(t.collection.contact.mobile)),i("br")],1):t._e(),t._v(" "),t.collection.contact&&t.collection.contact.landline?i("span",[i("b-icon",{attrs:{icon:"phone",size:"is-small"}}),t._v(" "+t._s(t.collection.contact.landline)),i("br")],1):t._e()])])]),t._v(" "),i("div",{staticClass:"column"})])]):t._e(),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isImageUploadModalActive,width:300,scroll:"keep"},on:{"update:active":function(e){t.isImageUploadModalActive=e}}},[i("section",{staticClass:"width-auto"},[i("div",[t._v("\n               This image represents your collection. Please keep it clean and make sure it "),i("b",[t._v("does not contain text")]),t._v("!\n            ")]),t._v(" "),i("div",{staticClass:"is-divider",attrs:{"data-content":"SELECT FILE AND UPLOAD"}}),t._v(" "),i("div",{staticClass:"has-text-centered margin-top-10-px"},[t.attachedImages&&0==t.attachedImages.length?i("b-upload",{ref:"file",attrs:{accept:"image/*",multiple:""},on:{input:t.addImageToModal},model:{value:t.dropFiles,callback:function(e){t.dropFiles=e},expression:"dropFiles"}},[i("div",{staticClass:"button is-primary",class:t.uploading?"is-loading":""},[i("span",{staticClass:"margin-right-5-px"},[t._v("Upload")]),t._v(" "),i("b-icon",{attrs:{icon:"upload"}})],1)]):t._e()],1),t._v(" "),i("div",{staticClass:"margin-top-20-px",attrs:{id:"uploaded-collection-logo"}},t._l(t.attachedImages,(function(e,a){return i("figure",{key:a,staticClass:"image is-square bg-cover has-background-white-ter border-radius-3-px overflow-hidden",style:"background: url("+t.server+e.destination+e.filename+")"},[i("button",{staticClass:"button is-white logo-options-button",on:{click:function(e){return t.removeAddedImage(a)}}},[t._v("x")])])})),0),t._v(" "),t.attachedImages&&t.attachedImages.length>0?i("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},[i("div",{staticClass:"is-divider",attrs:{"data-content":"CONFIRM ?"}}),t._v(" "),i("button",{staticClass:"button is-dark",on:{click:t.changeLogoImage}},[t._v("Yes")]),t._v(" "),i("button",{staticClass:"button is-clear margin-left-5-px",on:{click:function(e){t.isImageUploadModalActive=!1}}},[t._v("No")])]):t._e()])]),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReviewModalActive,width:500,scroll:"keep"},on:{"update:active":function(e){t.isReviewModalActive=e}}},[t.collection&&t.collection.reviews?i("section",{staticClass:"width-auto"},[i("div",[i("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),i("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),t._l(t.reviews,(function(e,a){return i("div",{key:a,staticClass:"margin-top-20-px"},[i("div",{staticClass:"padding-10-px"},[null!=t.currentUser&&e.author.username==t.currentUser?i("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(i){return t.removeReview(e.hash)}}},[i("b-icon",{attrs:{icon:"delete"}})],1):t._e(),t._v(" "),null!=t.currentUser&&e.author.username!=t.currentUser?i("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(i){return t.openReviewFlagModal(e.hash)}}},[i("b-icon",{attrs:{icon:"flag"}})],1):t._e(),t._v(" "),i("no-ssr",[i("star-rating",{attrs:{"star-size":24,"show-rating":!1,"active-color":"#4da6ff",padding:-2,"read-only":!0,rating:e.stars}})],1),t._v(" "),i("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-top-10-px"},[t._v("\n                     "+t._s(e.content)+"\n                  ")]),t._v(" "),i("div",{staticClass:"margin-top-10-px is-size-7 is-italic"},[i("span",{staticClass:"is-pulled-left margin-right-5-px"},[t._v("By:")]),t._v(" "),i("nuxt-link",{attrs:{to:{name:"user",params:{username:e.author.username}}}},[i("b",[t._v(t._s(e.author.name))])])],1)],1)])})),t._v(" "),1==t.hasmoreReviews?i("center",{staticClass:"margin-top-20-px margin-bottom-20-px"},[i("button",{staticClass:"button is-clear",class:t.loadingMoreReviews?"is-loading":"",on:{click:t.loadMoreReviews}},[t._v("load more")])]):t._e()],2):t._e()]),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagReviewModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagReviewModalActive=e}}},[i("section",{staticClass:"width-auto"},[i("div",{staticClass:"margin-bottom-10-px"},[i("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                  Flagging review\n               ")]),t._v("\n               You are about to flag a review. Please select a category.\n            ")]),t._v(" "),i("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[i("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Review is a spam")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Review used for harrassment")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Review contains hateful content")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v("Sexually explicit")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Review contains violent content")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Review promotes crime or violence")])])],1),t._v(" "),i("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:function(e){return t.flagReview(t.review.hash)}}},[t._v("Done")])])]),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isRateModalActive,width:300,scroll:"keep"},on:{"update:active":function(e){t.isRateModalActive=e}}},[i("section",{staticClass:"width-auto"},[t._v("\n            You rated:\n            "),i("no-ssr",{staticClass:"margin-top-10-px"},[i("star-rating",{attrs:{"star-size":30,"show-rating":!1,"active-color":"gold",padding:-2,rating:t.rating},on:{"rating-selected":function(e){t.rating=e}}})],1),t._v(" "),i("textarea-autosize",{ref:"review",staticClass:"textarea inline margin-top-20-px margin-bottom-20-px border-bottom is-size-5 is-size-6-mobile",attrs:{rows:"2",placeholder:"You can also add your review here ...",maxlength:"225"},nativeOn:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},model:{value:t.review,callback:function(e){t.review="string"==typeof e?e.trim():e},expression:"review"}}),t._v(" "),i("button",{staticClass:"button is-clear margin-top-10-px",on:{click:function(e){t.$store.state.user?t.setRating():t.loginMessage()}}},[t._v("Confirm")])],1)]),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isThemeModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isThemeModalActive=e}}},[i("section",{staticClass:"width-auto"},[i("div",{staticClass:"margin-bottom-10-px"},[i("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                     Select collection theme\n                  ")]),t._v("\n                  This feature is only accessible to superadmins.\n               ")]),t._v(" "),i("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[i("b-radio",{attrs:{"native-value":"none"},model:{value:t.collectionTheme,callback:function(e){t.collectionTheme=e},expression:"collectionTheme"}},[i("span",[t._v("None")])]),t._v(" "),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"status"},model:{value:t.collectionTheme,callback:function(e){t.collectionTheme=e},expression:"collectionTheme"}},[i("span",[t._v("Status")])]),t._v(" "),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"article"},model:{value:t.collectionTheme,callback:function(e){t.collectionTheme=e},expression:"collectionTheme"}},[i("span",[t._v("Article")])]),t._v(" "),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"link"},model:{value:t.collectionTheme,callback:function(e){t.collectionTheme=e},expression:"collectionTheme"}},[i("span",[t._v("Link")])]),t._v(" "),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"shop"},model:{value:t.collectionTheme,callback:function(e){t.collectionTheme=e},expression:"collectionTheme"}},[i("span",[t._v("Shop")])]),t._v(" "),i("br")],1),t._v(" "),i("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.setCollectionTheme}},[t._v("Done")])])]),t._v(" "),i("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagCollectionModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagCollectionModalActive=e}}},[i("section",{staticClass:"width-auto"},[i("div",{staticClass:"margin-bottom-10-px"},[i("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                  Flagging collection\n               ")]),t._v("\n               You are about to flag a collection. Please select a category.\n            ")]),t._v(" "),i("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[i("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Collection is a spam")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Collection used for harrassment")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Collection contains hateful content")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v("Sexually explicit")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Collection contains violent content")])]),i("br"),t._v(" "),i("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[i("span",[t._v(" Collection promotes crime or violence")])])],1),t._v(" "),i("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagCollection}},[t._v("Done")])])])],1)],1)}),[],!1,null,"3d78bbf0",null);e.default=D.exports},284:function(t,e,i){},287:function(t,e,i){t.exports=function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function n(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?a(Object(n),!0).forEach((function(i){e(t,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){"undefined"!=typeof window&&function(e){var i=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,a=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=a&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),s=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,l=(a||s)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,i,l,r,c,h,u,m,p;if(!(e=t.match(o)))throw new Error("invalid data URI");for(i=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),l=!!e[4],r=t.slice(e[0].length),c=l?atob(r):decodeURIComponent(r),h=new ArrayBuffer(c.length),u=new Uint8Array(h),m=0;m<c.length;m+=1)u[m]=c.charCodeAt(m);return a?new Blob([n?u:h],{type:i}):((p=new s).append(h),p.getBlob(i))};e.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(t,e,a){var n=this;setTimeout((function(){a&&i.toDataURL&&l?t(l(n.toDataURL(e,a))):t(n.mozGetAsFile("blob",e))}))}:i.toDataURL&&l&&(i.toBlob=function(t,e,i){var a=this;setTimeout((function(){t(l(a.toDataURL(e,i)))}))})),t.exports?t.exports=l:e.dataURLtoBlob=l}(window)})),o={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,quality:.8,mimeType:"auto",convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},l="undefined"!=typeof window&&void 0!==window.document?window:{},r=Array.prototype.slice,c=/^image\/.+$/;function h(t){return c.test(t)}var u=String.fromCharCode,m=l.btoa;function p(t){var e,i=new DataView(t);try{var a,n,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,l=2;l+1<o;){if(255===i.getUint8(l)&&225===i.getUint8(l+1)){n=l;break}l+=1}if(n){var r=n+10;if("Exif"===function(t,e,i){var a,n="";for(i+=e,a=e;a<i;a+=1)n+=u(t.getUint8(a));return n}(i,n+4,4)){var c=i.getUint16(r);if(((a=18761===c)||19789===c)&&42===i.getUint16(r+2,a)){var h=i.getUint32(r+4,a);h>=8&&(s=r+h)}}}if(s){var m,p,d=i.getUint16(s,a);for(p=0;p<d;p+=1)if(m=s+12*p+2,274===i.getUint16(m,a)){m+=8,e=i.getUint16(m,a),i.setUint16(m,1,a);break}}}catch(t){e=1}return e}var d=/\.\d*(?:0|9){12}\d*$/;function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return d.test(t)?Math.round(t*e)/e:t}var g=l.ArrayBuffer,f=l.FileReader,b=l.URL||l.webkitURL,y=/\.\w+$/,_=l.Compressor;return function(){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.image=new Image,this.options=n({},o,{},i),this.aborted=!1,this.result=null,this.init()}var a,c,d;return a=e,d=[{key:"noConflict",value:function(){return window.Compressor=_,e}},{key:"setDefaults",value:function(t){i(o,t)}}],(c=[{key:"init",value:function(){var t=this,e=this.file,a=this.options;if(n=e,"undefined"!=typeof Blob&&(n instanceof Blob||"[object Blob]"===Object.prototype.toString.call(n))){var n,s=e.type;if(h(s))if(b&&f)if(g||(a.checkOrientation=!1),b&&!a.checkOrientation)this.load({url:b.createObjectURL(e)});else{var o=new f,l=a.checkOrientation&&"image/jpeg"===s;this.reader=o,o.onload=function(a){var n=a.target.result,o={};if(l){var c=p(n);c>1||!b?(o.url=function(t,e){for(var i,a=[],n=new Uint8Array(t);n.length>0;)a.push(u.apply(null,(i=n.subarray(0,8192),Array.from?Array.from(i):r.call(i)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(m(a.join("")))}(n,s),c>1&&i(o,function(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}(c))):o.url=b.createObjectURL(e)}else o.url=n;t.load(o)},o.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},o.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},o.onloadend=function(){t.reader=null},l?o.readAsArrayBuffer(e):o.readAsDataURL(e)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(t){var e=this,i=this.file,a=this.image;a.onload=function(){e.draw(n({},t,{naturalWidth:a.naturalWidth,naturalHeight:a.naturalHeight}))},a.onabort=function(){e.fail(new Error("Aborted to load the image."))},a.onerror=function(){e.fail(new Error("Failed to load the image."))},l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent)&&(a.crossOrigin="anonymous"),a.alt=i.name,a.src=t.url}},{key:"draw",value:function(t){var e=this,i=t.naturalWidth,a=t.naturalHeight,n=t.rotate,o=void 0===n?0:n,l=t.scaleX,r=void 0===l?1:l,c=t.scaleY,u=void 0===c?1:c,m=this.file,p=this.image,d=this.options,g=document.createElement("canvas"),f=g.getContext("2d"),b=i/a,y=Math.abs(o)%180==90,_=Math.max(d.maxWidth,0)||1/0,w=Math.max(d.maxHeight,0)||1/0,C=Math.max(d.minWidth,0)||0,$=Math.max(d.minHeight,0)||0,x=Math.max(d.width,0)||i,k=Math.max(d.height,0)||a;if(y){var T=[w,_];_=T[0],w=T[1];var A=[$,C];C=A[0],$=A[1];var S=[k,x];x=S[0],k=S[1]}_<1/0&&w<1/0?w*b>_?w=_/b:_=w*b:_<1/0?w=_/b:w<1/0&&(_=w*b),C>0&&$>0?$*b>C?$=C/b:C=$*b:C>0?$=C/b:$>0&&(C=$*b),k*b>x?k=x/b:x=k*b;var M=-(x=Math.floor(v(Math.min(Math.max(x,C),_))))/2,R=-(k=Math.floor(v(Math.min(Math.max(k,$),w))))/2,O=x,L=k;if(y){var U=[k,x];x=U[0],k=U[1]}g.width=x,g.height=k,h(d.mimeType)||(d.mimeType=m.type);var D="transparent";if(m.size>d.convertSize&&"image/png"===d.mimeType&&(D="#fff",d.mimeType="image/jpeg"),f.fillStyle=D,f.fillRect(0,0,x,k),d.beforeDraw&&d.beforeDraw.call(this,f,g),!this.aborted&&(f.save(),f.translate(x/2,k/2),f.rotate(o*Math.PI/180),f.scale(r,u),f.drawImage(p,M,R,O,L),f.restore(),d.drew&&d.drew.call(this,f,g),!this.aborted)){var P=function(t){e.aborted||e.done({naturalWidth:i,naturalHeight:a,result:t})};g.toBlob?g.toBlob(P,d.mimeType,d.quality):P(s(g.toDataURL(d.mimeType,d.quality)))}}},{key:"done",value:function(t){var e,i,a=t.naturalWidth,n=t.naturalHeight,s=t.result,o=this.file,l=this.image,r=this.options;if(b&&!r.checkOrientation&&b.revokeObjectURL(l.src),s)if(r.strict&&s.size>o.size&&r.mimeType===o.type&&!(r.width>a||r.height>n||r.minWidth>a||r.minHeight>n))s=o;else{var c=new Date;s.lastModified=c.getTime(),s.lastModifiedDate=c,s.name=o.name,s.name&&s.type!==o.type&&(s.name=s.name.replace(y,(e=s.type,"jpeg"===(i=h(e)?e.substr(6):"")&&(i="jpg"),".".concat(i))))}else s=o;this.result=s,r.success&&r.success.call(this,s)}},{key:"fail",value:function(t){var e=this.options;if(!e.error)throw t;e.error.call(this,t)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&t(a.prototype,c),d&&t(a,d),e}()}()},289:function(t,e,i){"use strict";var a=i(284);i.n(a).a},290:function(t,e,i){"use strict";var a=i(96),n=i(95),s=i.n(n);function o(){var t=Object(a.a)(["\n            mutation addPost(\n              $title: String\n              $status: String\n              $privacy: PostPrivacy!\n              $hidefromprofile: NoYes!\n              $attachments: [Upload]\n              $customfield: String\n              $collectionhash: String\n              $aliashash: String\n              $theme: Theme!\n              $themedata_link: ThemeLinkData\n              $themedata_shop: ThemeShopData\n            ) {\n              addPost(\n                title: $title\n                status: $status\n                privacy: $privacy\n                hidefromprofile: $hidefromprofile\n                attachments: $attachments\n                customfield: $customfield\n                collectionhash: $collectionhash\n                aliashash: $aliashash\n                theme: $theme\n                themedata_link: $themedata_link\n                themedata_shop: $themedata_shop\n              ) {\n                status\n              }\n            }\n          "]);return o=function(){return t},t}var l={props:{hash:{type:String},theme:{type:String},name:{type:String},from:{type:String},collectionPermissions:{type:Object},publicWrite:{type:Boolean}},data:function(){return{status:""}},methods:{gotoAddPost:function(t){this.$store.state.user?"collection"==this.from?this.collectionPermissions&&1==this.collectionPermissions.write?this.$router.push({name:"compose",query:{hash:this.hash,theme:t}}):this.$toast.open({message:"Access Denied!",type:"is-danger",position:"is-bottom"}):this.$router.push({name:"compose",query:{theme:t}}):this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})},submit:function(){var t=this,e=this.status;this.privacy;if(this.$route.params)var i=this.$route.params.hash;if(this.$route.params)var a=this.$route.params.hash;var n=this.dropFiles;if(1==this.hideFromProfile);else;this.$apollo.mutate({mutation:s()(o()),variables:{status:e,privacy:"public",hidefromprofile:"no",attachments:n,collectionhash:i,aliashash:a,theme:"status"}}).then((function(e){t.$emit("refreshQuery"),t.status=""})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}},mounted:function(){}},r=(i(289),i(22)),c=Object(r.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-tabs",{staticClass:"write-post",attrs:{type:"is-boxed",animated:!1}},[null==t.theme||"status"==t.theme?i("b-tab-item",[i("template",{slot:"header"},[i("b-icon",{attrs:{icon:"text-short"}}),t._v(" "),i("span",[t._v(" Status ")])],1),t._v(" "),i("p",{staticClass:"has-text-grey-light pointer border-radius-5-px write-post-input is-size-5 is-size-6-mobile",on:{click:function(e){return t.gotoAddPost("status")}}},[t._v("Post a short update ...")])],2):t._e(),t._v(" "),null==t.theme||"article"==t.theme?i("b-tab-item",[i("template",{slot:"header"},[i("b-icon",{attrs:{icon:"text-subject"}}),t._v(" "),i("span",[t._v(" Article ")])],1),t._v(" "),i("p",{staticClass:"has-text-grey-light pointer border-radius-5-px write-post-input is-size-5 is-size-6-mobile",on:{click:function(e){return t.gotoAddPost("article")}}},[t._v("Compose an article ...")])],2):t._e(),t._v(" "),null==t.theme||"link"==t.theme?i("b-tab-item",[i("template",{slot:"header"},[i("b-icon",{attrs:{icon:"link"}}),t._v(" "),i("span",[t._v(" Link ")])],1),t._v(" "),i("p",{staticClass:"has-text-grey-light pointer border-radius-5-px write-post-input is-size-5 is-size-6-mobile",on:{click:function(e){return t.gotoAddPost("link")}}},[t._v("Share a link ...")])],2):t._e(),t._v(" "),"shop"==t.theme?i("b-tab-item",[i("template",{slot:"header"},[i("b-icon",{attrs:{icon:"shopping"}}),t._v(" "),i("span",[t._v(" Product ")])],1),t._v(" "),i("p",{staticClass:"has-text-grey-light pointer border-radius-5-px write-post-input is-size-5 is-size-6-mobile",on:{click:function(e){return t.gotoAddPost("shop")}}},[t._v("Post a product ...")])],2):t._e()],1)],1)}),[],!1,null,"2a35c10a",null);e.a=c.exports},307:function(t,e,i){},349:function(t,e,i){"use strict";var a=i(307);i.n(a).a}}]);