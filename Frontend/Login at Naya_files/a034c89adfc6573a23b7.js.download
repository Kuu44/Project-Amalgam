(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{291:function(t,e,s){"use strict";var a,o=s(101),n=(s(97),s(155),s(69),s(153),s(154),s(47),s(96)),i=s(2),r=s(288),c=s.n(r),l=s(286),m=s.n(l),p=s(95),h=s.n(p),u=s(292),d=s(282),v=s.n(d);function g(){var t=Object(n.a)(["\n              mutation changePostPrivacy(\n                $hash: String!\n                $privacy: PostPrivacy!\n              ) {\n                changePostPrivacy(hash: $hash, privacy: $privacy) {\n                  success\n                }\n              }\n            "]);return g=function(){return t},t}function b(){var t=Object(n.a)(["\n            mutation declinePostFromCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              declinePostFromCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return b=function(){return t},t}function f(){var t=Object(n.a)(["\n            mutation approvePostInCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              approvePostInCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return f=function(){return t},t}function _(){var t=Object(n.a)(["\n            mutation removePostFromCollection(\n              $hash: String!\n              $collectionhash: String!\n            ) {\n              removePostFromCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return _=function(){return t},t}function y(){var t=Object(n.a)(["\n            mutation addComment($posthash: String!, $content: String!, $aliashash: String) {\n              addComment(posthash: $posthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                nreplies\n                hash\n                content\n                author {\n                  username\n                  name\n                  hash\n                  image{\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return y=function(){return t},t}function C(){var t=Object(n.a)(["\n            mutation removeUpvote($hash: String!) {\n              removeUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return C=function(){return t},t}function $(){var t=Object(n.a)(["\n            mutation addUpvote($hash: String!) {\n              addUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return $=function(){return t},t}function x(){var t=Object(n.a)(["\n            mutation flagComment($hash: String!) {\n              flagComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return x=function(){return t},t}function O(){var t=Object(n.a)(["\n            mutation removeComment($hash: String!) {\n              removeComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return O=function(){return t},t}function w(){var t=Object(n.a)(["\n            mutation addComment($posthash: String!, $content: String!, $aliashash: String) {\n              addComment(posthash: $posthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                nreplies\n                timestamp\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image { \n                      hash\n                  }\n                 }\n              }\n            }\n          "]);return w=function(){return t},t}function k(){var t=Object(n.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return k=function(){return t},t}function j(){var t=Object(n.a)(["\n            mutation removePost($hash: String!) {\n              removePost(hash: $hash) {\n                success\n              }\n            }\n          "]);return j=function(){return t},t}function P(){var t=Object(n.a)(["\n            mutation removeLike($hash: String!) {\n              removeLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return P=function(){return t},t}function T(){var t=Object(n.a)(["\n            mutation addLike($hash: String!) {\n              addLike(hash: $hash) {\n                success\n              }\n            }\n          "]);return T=function(){return t},t}function S(){var t=Object(n.a)(["\n            mutation addPostToCollection(\n              $collectionhash: String!\n              $hash: String!\n            ) {\n              addPostToCollection(\n                hash: $hash\n                collectionhash: $collectionhash\n              ) {\n                success\n              }\n            }\n          "]);return S=function(){return t},t}function M(){var t=Object(n.a)(["\n            query searchCollections($page: Int, $q: String!) {\n              searchCollections(page: $page, q: $q) {\n                hasmore\n                list {\n                  name\n                  hash\n                  logo{\n                     hash\n                  }\n                }\n              }\n            }\n          "]);return M=function(){return t},t}function z(){var t=Object(n.a)(["\n            mutation toggleInstock($hash: String!, $instock: Boolean!) {\n              toggleInstock(hash: $hash, instock: $instock) {\n                success\n              }\n            }\n          "]);return z=function(){return t},t}function R(){var t=Object(n.a)(["\n            mutation removeOffer($hash: String!) {\n              removeOffer(hash: $hash) {\n                success\n              }\n            }\n          "]);return R=function(){return t},t}function A(){var t=Object(n.a)(["\n            mutation addOffer(\n              $hash: String!\n              $discount: Percentage!\n              $daysuntiloffer: Int!\n            ) {\n              addOffer(\n                hash: $hash\n                discount: $discount\n                daysuntiloffer: $daysuntiloffer\n              ) {\n                success\n              }\n            }\n          "]);return A=function(){return t},t}function q(){var t=Object(n.a)(["\n            mutation reserveProduct(\n              $hash: String!\n              $quantity: Int!\n              $daysuntilpickup: Int!\n              $coins: Int\n              $phone: Phonenumber!\n            ) {\n              reserveProduct(\n                hash: $hash\n                quantity: $quantity\n                daysuntilpickup: $daysuntilpickup\n                coins: $coins\n                phone: $phone\n              ) {\n                pin\n                hash\n              }\n            }\n          "]);return q=function(){return t},t}function L(){var t=Object(n.a)(["\n               query wallet {\n               wallet{\n                  coins\n                  rates\n               }\n               }\n            "]);return L=function(){return t},t}function N(){var t=Object(n.a)(["\n                     query listOwnedCollections($page: Int, $sortby: SortBy ) {\n                        listOwnedCollections(page: $page, sortby : $sortby) {\n                           hasmore\n                           list {\n                           name\n                           hash\n                           logo{\n                                 hash\n                           }\n                           }\n                        }\n                     }\n                     "]);return N=function(){return t},t}function I(){var t=Object(n.a)(["\n            mutation removeProductReview($hash: String!) {\n              removeProductReview(hash: $hash) {\n                success\n              }\n            }\n          "]);return I=function(){return t},t}function F(){var t=Object(n.a)(["\n            query post($hash: String!, $page: Int) {\n               post(hash: $hash) {\n                 reviews(page : $page) {\n                     hasmore\n                         list {\n                             hash\n                             stars\n                             content\n                             timestamp\n                             author {\n                                 username\n                                 name\n                             }   \n                         }\n                 }\n            }\n        }\n        "]);return F=function(){return t},t}function Q(){var t=Object(n.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return Q=function(){return t},t}function U(){var t=Object(n.a)(["\n            query listOwnedCollections($page: Int, $sortby: SortBy ) {\n               listOwnedCollections(page: $page, sortby : $sortby) {\n                  hasmore\n                  list {\n                     name\n                     hash\n                     logo{\n                           hash\n                     }\n                  }\n               }\n            }\n         "]);return U=function(){return t},t}function D(){var t=Object(n.a)(["\n            query post($hash: String!, $page: Int, $total: Int, $offset : Int) {\n               post(hash: $hash) {\n                  title\n                  status\n                  fullstatus\n                  timestamp\n                  hash\n                  truncated\n                  nlikes\n                  ncollected\n                  liked\n                  ncomments\n                  permissions\n                  theme\n                  privacy\n                  themedata\n                  domain { \n                     hash\n                     url\n                  }\n                  attachments {\n                     hash\n                  }\n                  collection {\n                  hash\n                  }\n                  author {\n                  name\n                  username\n                  hash\n                  image{\n                        hash\n                  }\n                  }\n                  reviews{\n                     hasmore\n                     list{\n                        hash\n                        stars\n                        content\n                        permissions\n                        newavg\n                        author{\n                           name\n                           username\n                           hash\n                           image{\n                              hash\n                           }\n                        }\n                     }\n                  }\n                  comments(total: $total, page: $page, offset: $offset) {\n                  hasmore\n                  list {\n                     timestamp\n                     nupvotes\n                     nreplies\n                     hash\n                     content\n                     upvoted\n                     permissions\n                     author {\n                        username\n                        name\n                        hash\n                        image { \n                           hash\n                        }\n                     }\n                     }\n                  }\n               }\n            }\n         "]);return D=function(){return t},t}i.default.use(c.a);var H=(a={apollo:{post:{query:h()(D()),variables:function(){return{hash:this.postObject.hash,page:1,total:2,offset:0}},update:function(t){return t.post&&(this.liked=t.post.liked,this.nlikes=t.post.nlikes,this.ncomments=t.post.ncomments,t.post.reviews&&t.post.reviews.list&&(this.reviews=t.post.reviews.list,this.hasmoreReviews=t.post.reviews.hasmore),t.post.comments&&t.post.comments.list&&t.post.comments.list.length>0?this.comments=t.post.comments.list:this.comments=[]),t.post&&"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.instock?this.inStockToggle="Yes":this.inStockToggle="No",t.post}},usersCollections:{query:h()(U()),skip:function(){return!this.$store.state.user},variables:function(t){return{page:1}},update:function(t){return t.listOwnedCollections&&(this.ownCollections=t.listOwnedCollections.list,this.hasmoreOwnCollections=t.listOwnedCollections.hasmore),!0}}},props:{postObject:{type:Object,required:!0},collectionLogoHash:{type:String},profileImageDeleted:{type:Boolean},username:{type:String},profileImageHash:{type:String},collectionPermissions:{type:Object},collectionhash:{type:String},from:{type:String},domainHash:{type:String},routeEnter:{type:String}},data:function(){return{server:"https://api.naya.com.np/",local:"https://naya.com.np/",pageNumber:0,liked:null,nlikes:0,currentUser:null,commentContent:"",post:{},replyActive:!1,replyContent:"",comments:[],ncomments:null,offset:0,seeMore:!1,deleted:!1,data:[],collectionName:"",collections:[],selected:{},isFlagPostModalActive:!1,flagType:null,itemQuantity:1,isReserveItemModalActive:!1,itemPickUpDuration:1,coins:0,isOfferModalActive:!1,discount:0,daysUntillOffer:null,inStockToggle:"Yes",discountDate:null,interval:null,wallet:{},usableCoins:null,isAddPostToCollectionModalActive:!1,ownCollections:[],OwnCollectionPageNumber:1,hasmoreOwnCollections:!1,selectedCommenter:{},loadingMoreOwnCollection:!1,reviews:[],hasmoreReviews:!1,isReviewModalActive:!1,loadingMoreReviews:!1,reviewsPageNumber:1,isFlagProductReviewModalActive:!1,reviewHash:null,truncate:v.a,disable:!1,contact:null,isSocialShareModalActive:!1,currentUrl:null}},computed:{filteredDataArray:function(){var t=this;return this.data.filter((function(e){return e.toString().toLowerCase().indexOf(t.name.toLowerCase())>=0}))}},methods:{openProductReviewFlagModal:function(t){this.reviewHash=t,this.isFlagProductReviewModalActive=!0},flagProductReview:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:h()(Q()),variables:{hash:this.reviewHash,type:this.flagType,documenttype:"post_shop_review"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Review has been successfully flagged!!",type:"is-success"}),t.isFlagProductReviewModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this review",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},loadMoreReviews:function(){var t=this;this.reviewsPageNumber++,this.loadingMoreReviews=!0,this.$apollo.query({query:h()(F()),variables:{hash:this.postObject.hash,page:this.reviewsPageNumber}}).then((function(e){t.reviews=t.reviews.concat(e.data.post.reviews.list),t.hasmoreReviews=e.data.post.reviews.hasmore,t.loadingMoreReviews=!1})).catch((function(e){t.loadingMoreReviews=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeReview:function(t){var e=this;this.$apollo.mutate({mutation:h()(I()),variables:{hash:t}}).then((function(t){e.$apollo.queries.post.refetch(),e.isReviewModalActive=!1})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},selectUserAsCommenter:function(){this.selectedCommenter={},this.$refs.dropup.toggle()},selectCommenter:function(t){this.selectedCommenter&&this.selectedCommenter.hash&&this.selectedCommenter.hash==t.hash||(this.selectedCommenter=t),this.$refs.dropup.toggle()},loadMoreOwnCollections:function(){var t=this;this.OwnCollectionPageNumber++,this.loadingMoreOwnCollection=!0,this.$apollo.query({query:h()(N()),variables:{page:this.OwnCollectionPageNumber}}).then((function(e){t.ownCollections=t.ownCollections.concat(e.data.listOwnedCollections.list),t.hasmoreOwnCollections=e.data.listOwnedCollections.hasmore,t.loadingMoreOwnCollection=!1})).catch((function(e){t.loadingMoreOwnCollection=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},closeReserveModal:function(){this.coins=0,this.itemPickUpDuration=1,this.itemQuantity=1,this.contact=null},decreaseNcomments:function(){this.ncomments--,this.offset--},increaseItemQuantity:function(){this.itemQuantity++},decreaseItemQuantity:function(){this.itemQuantity>1&&this.itemQuantity--},openReserveModal:function(){var t=this;this.$apollo.query({query:h()(L())}).then((function(e){t.wallet=e.data.wallet;var s=t.post.themedata.discount/100*t.post.themedata.total,a=Math.floor(s/e.data.wallet.rates.coins);e.data.wallet.coins<a?t.usableCoins=e.data.wallet.coins:t.usableCoins=a,t.isReserveItemModalActive=!0})).catch((function(e){t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},reserveItem:function(){var t=this,e=this.post.hash;this.contact&&this.contact.length>0?this.$apollo.mutate({mutation:h()(q()),variables:{hash:e,quantity:this.itemQuantity,daysuntilpickup:this.itemPickUpDuration,coins:this.coins,phone:this.contact}}).then((function(e){t.isReserveItemModalActive=!1,t.$toast.open({message:"Item has been successfully reserved",type:"is-success"}),t.$store.state.domain?window.location.href=t.local+"transaction/"+e.data.reserveProduct.hash:t.$router.push({name:"transaction",params:{hash:e.data.reserveProduct.hash}})})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?(t.isReserveItemModalActive=!1,t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})):"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"Enter the Fields correctly and Re-try!",type:"is-danger",position:"is-bottom"}):(t.isReserveItemModalActive=!1,t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}))})):this.$toast.open({message:"Contact number is mandatory.",type:"is-danger",position:"is-bottom"})},addOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:h()(A()),variables:{hash:e,discount:this.discount,daysuntiloffer:this.daysUntillOffer}}).then((function(e){e.data.addOffer.success&&(t.isOfferModalActive=!1,t.$toast.open({message:"Offer has been placed",type:"is-success"}),t.$apollo.queries.post.refetch(),t.discount=0,t.daysUntillOffer=null)})).catch((function(e){t.isOfferModalActive=!1,e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeOffer:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:h()(R()),variables:{hash:e}}).then((function(e){e.data.removeOffer.success&&(t.$toast.open({message:"Offer has been removed",type:"is-success"}),t.$apollo.queries.post.refetch())})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},stockToggle:function(){var t=this;if("No"==this.inStockToggle)var e=!0;else e=!1;var s=this.post.hash;this.$apollo.mutate({mutation:h()(z()),variables:{hash:s,instock:e}}).then((function(t){})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},loadMore:function(){this.pageNumber<1?(this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.postObject.hash,page:this.pageNumber,total:8},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.post.comments.list,o=s.post.comments.hasmore,n=s.post.title,i=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,m=s.post.truncated,p=s.post.nlikes,h=s.post.ncollected,u=s.post.liked,d=s.post.ncomments,v=s.post.permissions,g=s.post.privacy,b=s.post.attachments,f=s.post.collection,_=s.post.author,y=s.post.theme,C=s.post.themedata;return s?{post:{__typename:t.post.__typename,title:n,status:i,fullstatus:r,timestamp:c,hash:l,truncated:m,nlikes:p,ncollected:h,liked:u,ncomments:d,permissions:v,privacy:g,collection:f,author:_,theme:y,themedata:C,attachments:b,comments:{__typename:t.post.comments.__typename,list:a,hasmore:o}}}:t}})):this.pageNumber>=1&&(this.pageNumber++,this.$apollo.queries.post.fetchMore({variables:{hash:this.postObject.hash,page:this.pageNumber,total:8},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.post.comments.list,o=s.post.comments.hasmore,n=s.post.title,i=s.post.status,r=s.post.fullstatus,c=s.post.timestamp,l=s.post.hash,m=s.post.truncated,p=s.post.nlikes,h=s.post.ncollected,u=s.post.liked,d=s.post.ncomments,v=s.post.permissions,g=s.post.privacy,b=s.post.collection,f=s.post.author,_=s.post.theme,y=s.post.themedata,C=s.post.attachments;return s?{post:{__typename:t.post.__typename,title:n,status:i,fullstatus:r,timestamp:c,hash:l,truncated:m,nlikes:p,ncollected:h,liked:u,ncomments:d,permissions:v,privacy:g,collection:b,author:f,theme:_,themedata:y,attachments:C,comments:{__typename:t.post.comments.__typename,list:t.post.comments.list.concat(a),hasmore:o}}}:t}}))},getCollections:function(){var t=this;this.$apollo.query({query:h()(M()),variables:{q:this.collectionName}}).then((function(e){t.collections=[],e.data.searchCollections&&e.data.searchCollections.list.length>0?e.data.searchCollections.list.forEach((function(e){return t.collections.push(e)})):e.data.searchCollections&&0==e.data.searchCollections.list.length&&(t.collections=[])})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},addToCollection:function(){var t=this,e=this.selected.hash,s=this.post.hash;this.$apollo.mutate({mutation:h()(S()),variables:{hash:s,collectionhash:e}}).then((function(e){e.data.addPostToCollection.success&&t.$toast.open({message:"Post has been Added",type:"is-success"}),t.collectionName="",t.isAddPostToCollectionModalActive=!1,t.$apollo.queries.post.refetch()})).catch((function(e){t.isAddPostToCollectionModalActive=!1,"Network error: Response not successful: Received status code 400"==e.message?t.$toast.open({message:"The collection may not be available. Please select from the list",type:"is-danger",position:"is-bottom"}):"GraphQL error: collection access denied"==e.message?t.$toast.open({message:"Access Denied",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},gotoPost:function(){this.post.domain&&this.post.domain.hash?this.$router.push({name:"domainPost",params:{hash:this.post.domain.hash,posthash:this.post.hash}}):this.$router.push({name:"post",params:{hash:this.post.hash}})},youtubeEmbed:function(t){if(t.match(/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/)){var e=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(e&&e.length&&e[2]){var s=e[2];return"<div class='embed-container'><iframe src=\"https://www.youtube.com/embed/".concat(s,'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>')}return""}return""},like:function(){var t=this,e=this.post.hash;this.$apollo.mutate({mutation:h()(T()),variables:{hash:e}}).then((function(e){e.data.addLike.success&&(t.liked=!0,t.nlikes++)})).catch((function(e){t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},unlike:function(){var t=this;this.$apollo.mutate({mutation:h()(P()),variables:{hash:this.post.hash}}).then((function(e){e.data.removeLike.success&&(t.liked=!1,t.nlikes--)})).catch((function(e){"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openRemovePostDialog:function(){var t=this;this.$dialog.confirm({title:"Remove Post",message:"Are you sure you want to <b>delete</b> this post?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removePost()}})},removePost:function(){var t=this;this.$apollo.mutate({mutation:h()(j()),variables:{hash:this.post.hash}}).then((function(e){e.data.removePost.success&&(t.$emit("decreaseOffset"),t.deleted=!0)})).catch((function(e){(e.graphQLErrors[0].message="shop"==t.post.theme)?t.$toast.open({message:"Cannot remove the post. The product may have been reserved by some buyers.",type:"is-danger",position:"is-bottom"}):(e.graphQLErrors[0].message="error deleting post")?t.$toast.open({message:"Error Deleting Post",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagPost:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:h()(k()),variables:{hash:this.post.hash,type:this.flagType,documenttype:"post"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Post has been successfully flagged!!",type:"is-success"}),t.isFlagPostModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this post",type:"is-danger"}):"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagPostModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},submitComment:function(){var t=this;this.disable=!0;var e,s=((e=this.commentContent)||(e=""),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:h()(w()),variables:{posthash:this.post.hash,content:s,aliashash:this.selectedCommenter.hash}}).then((function(e){e.data.addComment&&(t.commentContent="",t.ncomments++,t.offset++,t.comments=[e.data.addComment].concat(t.comments),t.disable=!1)})).catch((function(e){t.disable=!1,t.liked=!1,"GraphQL error: authorization token was not provided"==e.message?t.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):"GraphQL error: you are banned from using this feature until Invalid Date"==e.message?t.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},removeComment:function(t){var e=this;this.$apollo.mutate({mutation:h()(O()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.removeComment.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagComment:function(t){var e=this;this.$apollo.mutate({mutation:h()(x()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.flagComment.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},upvoteComment:function(t){var e=this;this.$apollo.mutate({mutation:h()($()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.addUpvote.success&&(e.$emit("refreshQuery"),e.$apollo.queries.post.refetch())})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},downvoteComment:function(t){var e=this;this.$apollo.mutate({mutation:h()(C()),variables:{hash:this.post.comments[t].hash}}).then((function(t){t.data.removeUpvote.success&&e.$apollo.queries.post.refetch()})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},submitReply:function(t){var e=this,s=this.replyContent;this.$apollo.mutate({mutation:h()(y()),variables:{posthash:this.$route.params.hash,content:s,aliashash:this.selectedCommenter.hash}}).then((function(t){t.data.addComment&&(e.commentContent="",e.ncomments++,e.offset++,e.comments=[t.data.addComment].concat(e.comments))})).catch((function(t){"GraphQL error: authorization token was not provided"==t.message?e.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},refreshQuery:function(){this.$apollo.queries.post.refetch()},removeFromCollection:function(){var t=this;this.$apollo.mutate({mutation:h()(_()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.removePostFromCollection.success&&(t.$emit("decreaseOffset"),t.deleted=!0)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},approvePostInCollection:function(){var t=this;this.$apollo.mutate({mutation:h()(f()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.approvePostInCollection.success&&t.$emit("refreshQuery")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},declinePostInCollection:function(){var t=this;this.$apollo.mutate({mutation:h()(b()),variables:{hash:this.post.hash,collectionhash:this.collectionhash}}).then((function(e){e.data.declinePostFromCollection.success&&t.$emit("refreshQuery")})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},openLocktoCollectionDialog:function(){var t=this;this.$dialog.confirm({title:"Lock Post to Collection",message:'<p v-if="'.concat(0!=this.post.ncollected,'">This post is collected in ').concat(this.post.ncollected," collections.</p> Are you sure you want to <b>lock</b> this post to current collection?"),cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("locked_to_collection")}})},openPrivatePrivacyDialog:function(){var t=this;this.$dialog.confirm({title:"Make post private",message:"This post has been collected in ".concat(this.post.ncollected," collections. Are you sure you want to make this post <b>private</b>?"),cancelText:"Cancel",confirmText:"Yes",onConfirm:function(e){return t.postPrivacy("private")}})},postPrivacy:function(t){var e=this;this.postObject.permissions&&1==this.post.permissions.write&&null!=this.$store.state.user&&this.$apollo.mutate({mutation:h()(g()),variables:{hash:this.post.hash,privacy:t}}).then((function(t){t.data.changePostPrivacy.success&&e.$apollo.queries.post.refetch()})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},gotoUser:function(){this.post.author.hash?this.$router.push({name:"singleCollection",params:{hash:this.post.author.hash}}):this.$router.push({name:"user",params:{username:this.post.author.username}})},editPost:function(){this.post.author.hash?this.$store.state.domain?window.location.href=this.local+"edit/"+this.post.hash:this.$router.push({name:"editPost",params:{hash:this.post.hash}}):this.$store.state.domain?window.location.href=this.local+"edit/"+this.post.hash:this.$router.push({name:"editPost",params:{username:this.post.author.username,hash:this.post.hash,post:this.post}})},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}}},Object(o.a)(a,"computed",{}),Object(o.a)(a,"watch",{routeEnter:function(t){this.$apollo.queries.post.refetch()}}),Object(o.a)(a,"beforeMount",(function(){})),Object(o.a)(a,"mounted",(function(){if(this.currentUrl=window.location.host,this.$store.state.user&&(this.currentUser=this.$store.state.user.username),this.$store.state.servertime){new Date(this.$store.state.servertime).getTime(),Date.now();var t=this.$store.state.servertime;this.$moment.now=function(){return t}}})),Object(o.a)(a,"beforeDestroy",(function(){})),Object(o.a)(a,"components",{"app-comment":u.a,StarRating:m.a}),a),G=(s(348),s(22)),E=Object(G.a)(H,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return!t.deleted&&t.postObject&&t.postObject.author?s("div",{staticClass:"card border-radius-2-px"},[t.post?s("div",{staticClass:"card-content padding-0-px"},[s("div",{staticClass:"padding-15-px"},[s("article",{staticClass:"is-article-summary"},[s("div",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24 margin-top-3-px"},[t.postObject&&t.postObject.author.hash?s("div",[t.collectionLogoHash?t.collectionLogoHash?s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.hash==t.collectionhash?t.server+"attachments.img/sm/"+t.collectionLogoHash:t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_cl.png"}})]):t._e():s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.hash==t.collectionhash&&t.profileImageDeleted?t.server+"public/images/sm/empty_cl.png":t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_cl.png"}})])]):s("div",[t.profileImageHash?t.profileImageHash?s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.username==t.username?t.server+"attachments.img/sm/"+t.profileImageHash:t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})]):t._e():s("div",[s("img",{staticClass:"is-rounded",attrs:{src:t.postObject&&t.postObject.author&&t.postObject.author.username==t.username&&t.profileImageDeleted?t.server+"public/images/sm/empty_pp.png":t.postObject&&t.postObject.author&&t.postObject.author.image?t.server+"attachments.img/sm/"+t.postObject.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})])])]),t._v(" "),s("div",{staticClass:"media-content"},[this.$store.state.domain?s("a",{attrs:{href:t.postObject.author.hash?t.local+"collection/"+t.postObject.author.hash:t.local+"@"+t.postObject.author.username}},[s("b",[t._v(t._s(t.postObject.author.name))])]):s("nuxt-link",{attrs:{to:t.postObject.author.hash?{name:"singleCollection",params:{hash:t.postObject.author.hash}}:{name:"user",params:{username:t.postObject.author.username}}}},[s("b",[t._v(t._s(t.postObject.author.name))])]),t._v(" "),s("no-ssr",[s("p",{staticClass:"margin-top--3-px has-text-grey-light is-size-7"},[t._v("\n                           "+t._s(t._f("moment")(t.postObject.timestamp,"from","now"))+"\n                           "),s("b-tooltip",{attrs:{label:"private"==t.post.privacy?"only me":"locked_to_collection"==t.post.privacy?"only collection members":"public",position:"is-top",type:"is-info"}},[s("b-icon",{attrs:{icon:"private"==t.post.privacy?"lock":"locked_to_collection"==t.post.privacy?"account-multiple":"earth",size:"is-small"}})],1)],1)])],1),t._v(" "),s("div",{staticClass:"media-right"},[s("no-ssr",[s("b-dropdown",{staticClass:"is-right"},[s("button",{staticClass:"button is-white has-text-grey-dark",attrs:{slot:"trigger"},slot:"trigger"},[s("b-icon",{attrs:{icon:"dots-horizontal"}})],1),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{attrs:{custom:""}},[s("div",{staticClass:"padding-15-px"},[t.postObject.collection?t._e():s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"private"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){0==t.post.ncollected?t.postPrivacy("private"):t.openPrivatePrivacyDialog()}}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"private"==t.post.privacy?"has-text-weight-bold":""},[t._v("Only me")])]),t._v(" "),t.postObject.collection?s("div",[s("span",{staticClass:"has-text-grey"},[t._v("Share with : ")]),t._v(" "),s("br"),t._v(" "),s("span",{class:"public"==t.post.privacy?"has-text-weight-bold":""},[t._v("Public")]),t._v(" "),"locked_to_collection"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:function(e){return t.postPrivacy("public")}}},[s("b-icon",{attrs:{icon:"toggle-switch",size:""}})],1):t._e(),t._v(" "),"public"==t.post.privacy?s("button",{staticClass:"button is-text inline",on:{click:t.openLocktoCollectionDialog}},[s("b-icon",{attrs:{icon:"toggle-switch-off",size:""}})],1):t._e(),t._v(" "),s("span",{class:"locked_to_collection"==t.post.privacy?"has-text-weight-bold":""},[t._v("Locked to Collection")])]):t._e()])]):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write?s("hr",{staticClass:"dropdown-divider"}):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.editPost}},[s("a",[s("b-icon",{attrs:{icon:"square-edit-outline",size:"is-small"}}),t._v(" Edit")],1)]):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.openRemovePostDialog}},[s("a",[s("b-icon",{attrs:{icon:"delete",size:"is-small"}}),t._v(" Delete")],1)]):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isSocialShareModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"share-variant",size:"is-small"}}),t._v(" Share")],1)]):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&"shop"==t.postObject.theme&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:function(e){t.isOfferModalActive=!0}}},[s("a",[s("b-icon",{attrs:{icon:"tag ",size:"is-small"}}),t._v(" Add Offer")],1)]):t._e(),t._v(" "),t.postObject.permissions&&0==t.postObject.permissions.write?s("b-dropdown-item",{on:{click:function(e){null!=t.$store.state.user?t.isFlagPostModalActive=!0:t.loginMessage()}}},[s("a",[s("b-icon",{attrs:{icon:"flag",size:"is-small"}}),t._v(" Flag")],1)]):t._e(),t._v(" "),!t.collectionPermissions||2!=t.collectionPermissions.level&&1!=t.collectionPermissions.level||null==t.$store.state.user?t._e():s("b-dropdown-item",{on:{click:t.removeFromCollection}},[s("a",[s("b-icon",{attrs:{icon:"minus-circle",size:"is-small"}}),t._v(" Remove from Collection")],1)]),t._v(" "),t.collectionPermissions&&(2==t.collectionPermissions.level||1==t.collectionPermissions.level)&&t.from&&"pending"==t.from&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.approvePostInCollection}},[s("a",[s("b-icon",{attrs:{icon:"check",size:"is-small"}}),t._v(" Approve post")],1)]):t._e(),t._v(" "),t.collectionPermissions&&(2==t.collectionPermissions.level||1==t.collectionPermissions.level)&&t.from&&"pending"==t.from&&null!=t.$store.state.user?s("b-dropdown-item",{on:{click:t.declinePostInCollection}},[s("a",[s("b-icon",{attrs:{icon:"close-circle",size:"is-small"}}),t._v(" Decline post")],1)]):t._e()],1)],1)],1)]),t._v(" "),s("div",{staticClass:"margin-top-10-px"},[s("div",{staticClass:"columns is-mobile is-variable is-2"},[("article"==t.postObject.theme||"shop"==t.postObject.theme)&&t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"column is-one-third"},[t.post&&t.post.domain?s("div",{staticClass:"margin-top-10-px"},[null==this.$store.state.domain?s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+t.postObject.attachments[0].hash}})])]):t.post.domain.hash==t.domainHash?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+t.postObject.attachments[0].hash}})])]):s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+t.postObject.attachments[0].hash}})])])],1):s("div",{staticClass:"margin-top-10-px"},[null==this.$store.state.domain?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+t.postObject.attachments[0].hash}})])]):s("a",{attrs:{href:t.local+"post/"+t.postObject.hash}},[s("figure",{staticClass:"image is-square margin-bottom-10-px"},[s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/sm/"+t.postObject.attachments[0].hash}})])])],1)]):t._e(),t._v(" "),s("div",{staticClass:"column"},[t.post&&t.post.domain?s("div",{staticClass:"margin-top-10-px"},[null==this.$store.state.domain?s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-bottom-10-px"},[t._v(t._s(t.postObject.title))]):t._e()]):t.post.domain.hash==t.domainHash?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-bottom-10-px"},[t._v(t._s(t.postObject.title))]):t._e()]):s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-bottom-10-px"},[t._v(t._s(t.postObject.title))]):t._e()])],1):s("div",{staticClass:"margin-top-10-px"},[null==this.$store.state.domain?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-bottom-10-px"},[t._v(t._s(t.postObject.title))]):t._e()]):s("a",{attrs:{href:t.local+"post/"+t.postObject.hash}},[t.postObject.title?s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-bottom-10-px"},[t._v(t._s(t.postObject.title))]):t._e()])],1),t._v(" "),"shop"==t.postObject.theme&&t.postObject.themedata?s("div",{staticClass:"margin-top-20-px"},[s("p",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Rs. "),s("b",{staticClass:"has-text-danger"},[t._v(t._s(t.postObject.themedata.total.toLocaleString("en-IN")))])]),t._v(" "),t.postObject.themedata.tax?s("p",{staticClass:"has-text-grey"},[t._v("Includes "),s("span",{staticClass:"has-text-grey-dark"},[t._v(t._s(t.postObject.themedata.tax)+"%")]),t._v(" tax")]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t.post.themedata&&!t.post.themedata.instock&&t.postObject.permissions&&1!=t.postObject.permissions.write?s("div",{staticClass:"has-text-danger has-text-weight-bold"},[t._v("Out of stock")]):t._e(),t._v(" "),t.postObject.permissions&&1==t.postObject.permissions.write&&null!=t.$store.state.user?s("div",[t._v("\n                                    In Stock:\n                                    "),s("b-switch",{attrs:{"true-value":"Yes","false-value":"No"},nativeOn:{click:function(e){return t.stockToggle(e)}},model:{value:t.inStockToggle,callback:function(e){t.inStockToggle=e},expression:"inStockToggle"}},[t._v("\n                                       "+t._s(t.inStockToggle)+"\n                                    ")])],1):t._e()]),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime?s("div",{staticClass:"margin-top-20-px"},[s("span",[t._v("Discount offer of upto "),s("b",[t._v(t._s(t.post.themedata.discount)+"%")])]),s("br"),t._v(" "),s("no-ssr",[s("span",{staticClass:"has-text-link"},[t._v("(ends "+t._s(t._f("moment")(t.post.themedata.discountuntil,"from","now"))+")")])]),t._v(" "),1==t.post.permissions.write&&null!=t.$store.state.user?s("span",{staticClass:"tag is-danger margin-left-10-px"},[t._v("\n                                    Remove\n                                    "),s("button",{staticClass:"delete is-small",on:{click:t.removeOffer}})]):t._e()],1):t._e(),t._v(" "),t.post.themedata&&t.post.themedata.instock&&t.post.permissions&&1!=t.post.permissions.write?s("div",{staticClass:"margin-top-20-px"},[s("button",{staticClass:"button is-link",on:{click:function(e){null!=t.$store.state.user?t.openReserveModal():t.loginMessage()}}},[t._v("Reserve")]),t._v(" "),"shop"==t.postObject.theme&&t.postObject.themedata&&t.postObject.themedata.price?s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReserveItemModalActive,width:350,scroll:"keep",onCancel:t.closeReserveModal},on:{"update:active":function(e){t.isReserveItemModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("b",[t._v(t._s(t.postObject.title))]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("p",[s("span",[t._v("Quantity: ")]),t._v(" "),s("span",{staticClass:"select-quantity"},[s("span",{on:{click:t.decreaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"minus-circle-outline"}})],1),t._v(" "+t._s(t.itemQuantity)+"\n                                          "),s("span",{on:{click:t.increaseItemQuantity}},[s("b-icon",{staticClass:"has-text-grey-light",attrs:{icon:"plus-circle-outline"}})],1)])]),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("span",{attrs:{set:t.$discount=0}}),t._v(" "),s("span",{attrs:{set:t.$tax=0}}),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$price=t.itemQuantity*t.postObject.themedata.price}},[s("span",[t._v("Price : ")]),t._v(" "),s("b",[t._v(t._s(t.itemQuantity)+" x "+t._s(t.postObject.themedata.price.toLocaleString("en-IN")))])]),t._v(" "),t.coins>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$discount=t.coins*this.wallet.rates.coins}},[s("span",[t._v("Discount : ")]),t._v(" "),s("b",[t._v(t._s(t.$discount.toLocaleString("en-IN"))+" ")]),t._v(" "),s("span",{staticClass:"margin-left-10-px is-size-7 has-text-grey"},[t._v("("+t._s(t.coins)+" coins)")])]):t._e(),t._v(" "),s("p",{staticClass:"is-size-5",attrs:{set:t.$total=t.$price-t.$discount|0}},[s("span",[t._v("Total : ")]),t._v(" "),s("b",[t._v(t._s(t.$total.toLocaleString("en-IN")))])]),t._v(" "),t.postObject.themedata.tax?s("p",{staticClass:"is-size-5",attrs:{set:t.$tax=Math.round(t.$total*(0|t.post.themedata.tax)/100)}},[s("span",[t._v("Tax ("+t._s(t.postObject.themedata.tax)+"%) : ")]),t._v(" "),s("b",[t._v(t._s(t.$tax.toLocaleString("en-IN")))])]):t._e(),t._v(" "),t.$tax&&t.$tax>0&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("p",{staticClass:"is-size-5",attrs:{set:t.$grandtotal=t.$total+t.$tax|0}},[s("b",[t._v("Grand total : ")]),t._v(" "),s("b",[t._v(t._s(t.$grandtotal.toLocaleString("en-IN"))+" ")])]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       By when can you pick the product up from the shop?\n                                       "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"days","currency-symbol-position":"suffix",placeholder:"... days","empty-value":0,precision:0,separator:",",min:0,max:14},model:{value:t.itemPickUpDuration,callback:function(e){t.itemPickUpDuration=t._n(e)},expression:"itemPickUpDuration"}}),t._v(" "),s("b-select",{attrs:{placeholder:"Select pick up duration"},model:{value:t.itemPickUpDuration,callback:function(e){t.itemPickUpDuration=e},expression:"itemPickUpDuration"}},t._l(14,(function(e,a){return s("option",{key:a,domProps:{value:e}},[t._v("\n                                                "+t._s(e)+" days\n                                             ")])})),0)],1),t._v(" "),t.post.themedata&&t.post.themedata.discount&&t.post.themedata.discountuntil>this.$store.state.servertime&&this.wallet&&this.wallet.rates&&this.wallet.rates.coins?s("div",{staticClass:"margin-top-20-px"},[t._v("\n                                       Use coins to claim discounts?"),s("br"),t._v(" "),s("i",[t._v("You can use total of "+t._s(t.usableCoins)+" coins for this product")]),s("br"),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"coins","currency-symbol-position":"suffix",placeholder:"... coins","empty-value":0,precision:0,separator:",",min:0,max:t.usableCoins},model:{value:t.coins,callback:function(e){t.coins=t._n(e)},expression:"coins"}})],1):t._e(),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[s("b-field",{attrs:{label:"Contact number:"}},[s("b-input",{staticClass:"inline has-text-dark has-text-weight-bold width-80-percent",attrs:{type:"tel",placeholder:"ex. 98510..."},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1)],1),t._v(" "),s("div",{staticClass:"is-divider"}),t._v(" "),s("button",{staticClass:"button is-dark is-fullwidth margin-bottom-20-px",on:{click:t.reserveItem}},[t._v("Confirm")])])]):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"is-divider margin-top-20-px margin-bottom-10-px"})]):t._e(),t._v(" "),t.postObject.status?s("div",[t.post&&t.post.domain?s("div",[null==this.$store.state.domain?s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.truncate(t.postObject.status?t.postObject.status.replace(/<br>/g," ").replace(/\n/g,""):"",200).text)}})]):t.post.domain.hash==t.domainHash?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.truncate(t.postObject.status?t.postObject.status.replace(/<br>/g," ").replace(/\n/g,""):"",200).text)}})]):s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.truncate(t.postObject.status?t.postObject.status.replace(/<br>/g," ").replace(/\n/g,""):"",200).text)}})])],1):s("div",[null==this.$store.state.domain?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.truncate(t.postObject.status?t.postObject.status.replace(/<br>/g," ").replace(/\n/g,""):"",200).text)}})]):s("a",{attrs:{href:t.local+"post/"+t.postObject.hash}},[s("div",{staticClass:"is-size-6 is-size-6-mobile disable-inner-hyperlinks",domProps:{innerHTML:t._s(t.truncate(t.postObject.status?t.postObject.status.replace(/<br>/g," ").replace(/\n/g,""):"",200).text)}})])],1)]):t._e()])]),t._v(" "),"link"==t.postObject.theme&&t.postObject.themedata?s("div",{staticClass:"card margin-top-10-px"},[s("div",{staticClass:"card-image has-background-dark",domProps:{innerHTML:t._s(t.youtubeEmbed(t.postObject.themedata.url))}}),t._v(" "),s("div",{staticClass:"card-content has-background-white-bis"},[s("a",{attrs:{href:t.postObject.themedata.url,target:"_blank"}},[s("div",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold",domProps:{innerHTML:t._s(t.postObject.themedata.title)}}),t._v(" "),s("div",{staticClass:"margin-top-5-px",domProps:{innerHTML:t._s(t.postObject.themedata.description)}})])])]):t._e(),t._v(" "),t.postObject.theme&&"status"!=t.postObject.theme?t._e():s("div",[t.post&&t.post.domain?s("div",[null==this.$store.state.domain?s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.postObject.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.postObject.attachments,(function(e,a){return a<3?s("div",{key:a,class:"grid-item "+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[s("figure",{staticClass:"image"},[2===a&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()}))],2):t._e()]):t.post.domain.hash==t.domainHash?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.postObject.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.postObject.attachments,(function(e,a){return a<3?s("div",{key:a,class:"grid-item "+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[s("figure",{staticClass:"image"},[2===a&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()}))],2):t._e()]):s("a",{attrs:{href:"http://"+t.post.domain.url+"/post/"+t.postObject.hash}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.postObject.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.postObject.attachments,(function(e,a){return a<3?s("div",{key:a,class:"grid-item "+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[s("figure",{staticClass:"image"},[2===a&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()}))],2):t._e()])],1):s("div",[null==this.$store.state.domain?s("nuxt-link",{attrs:{to:{name:"post",params:{hash:t.postObject.hash}}}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.postObject.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.postObject.attachments,(function(e,a){return a<3?s("div",{key:a,class:"grid-item "+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[s("figure",{staticClass:"image"},[2===a&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()}))],2):t._e()]):s("a",{attrs:{href:t.local+"post/"+t.postObject.hash}},[t.postObject.attachments&&t.postObject.attachments.length>0?s("div",{staticClass:"image-grid"},[2==t.postObject.attachments.length?s("div",{staticClass:"grid-item span-2"}):t._e(),t._v(" "),t._l(t.postObject.attachments,(function(e,a){return a<3?s("div",{key:a,class:"grid-item "+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"span-2":"span-1")+" grid-item-"+(a+1)},[s("figure",{staticClass:"image"},[2===a&&t.postObject.attachments.length>3?s("div",{staticClass:"overlay"},[s("p",{staticClass:"overlay-content"},[t._v("+ "+t._s(t.postObject.attachments.length-2)+" more")])]):t._e(),t._v(" "),s("img",{staticClass:"border-radius-5-px",attrs:{src:t.server+"attachments.img/"+(0===a&&(t.postObject.attachments.length>2||1===t.postObject.attachments.length)?"md":"sm")+"/"+e.hash}})])]):t._e()}))],2):t._e()])],1)])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isOfferModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isOfferModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",[s("b",{staticClass:"is-size-4 is-size-5-mobile"},[t._v("Adding offer to:")]),t._v(" "),s("p",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.postObject.title))])]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("span",{staticClass:"margin-right-10-px"},[t._v("How much discount do you want to offer?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"%","currency-symbol-position":"suffix",placeholder:"... %","empty-value":0,precision:0,separator:",",min:0,max:100},model:{value:t.discount,callback:function(e){t.discount=t._n(e)},expression:"discount"}}),t._v(" "),s("p",{staticClass:"margin-top-20-px"},[s("span",{staticClass:"margin-right-10-px"},[t._v("How many days do you want this offer to be valid for?")]),t._v(" "),s("vue-numeric",{staticClass:"inline has-text-dark has-text-weight-bold",attrs:{currency:"days","currency-symbol-position":"suffix",placeholder:"... days","empty-value":0,precision:0,separator:",",min:0,max:30},model:{value:t.daysUntillOffer,callback:function(e){t.daysUntillOffer=t._n(e)},expression:"daysUntillOffer"}})],1)],1),t._v(" "),s("button",{staticClass:"button is-dark margin-top-30-px margin-bottom-20-px",on:{click:t.addOffer}},[t._v("Done")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isSocialShareModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isSocialShareModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                        Share your post\n                     ")])]),t._v(" "),s("div",{staticClass:"is-divider margin-top-15-px"}),t._v(" "),s("div",[s("p",{staticClass:"margin-top-10-px has-text-centered"},[s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://www.facebook.com/sharer/sharer.php?u="+t.currentUrl+"/post/"+t.postObject.hash}},[s("b-icon",{attrs:{icon:"facebook has-text-link",size:"is-large"}})],1),t._v(" "),s("a",{staticClass:"margin-right-20-px",attrs:{target:"_black",href:"https://twitter.com/intent/tweet?url="+t.currentUrl+"/post/"+t.postObject.hash}},[s("b-icon",{attrs:{icon:"twitter has-text-info",size:"is-large"}})],1)])])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagPostModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagPostModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                        Flagging post\n                     ")]),t._v("\n                     You are about to flag a post. Please select a category.\n                  ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Post promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagPost}},[t._v("Done")])])]),t._v(" "),s("div",{staticClass:"margin-top-20-px"},[t.$store.state.user&&t.post&&"public"==t.post.privacy?s("button",{staticClass:"button is-text is-pulled-right",on:{click:function(e){t.isAddPostToCollectionModalActive=!0}}},[s("b-icon",{attrs:{icon:"bookmark-plus has-text-grey-light"}})],1):t._e(),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isAddPostToCollectionModalActive,width:300,scroll:"keep"},on:{"update:active":function(e){t.isAddPostToCollectionModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-20-px"},[t._v("\n                        Enter the collection you want to add this post to, select from the dropdown list and press "),s("span",{staticClass:"tag"},[t._v("+ Add")])]),t._v(" "),s("b-autocomplete",{attrs:{data:t.collections,field:"name",placeholder:"Enter Collection Name"},on:{input:t.getCollections,select:function(e){return t.selected=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[e.option&&e.option.name?s("div",{staticClass:"media padding-5-px"},[s("figure",{staticClass:"image media-left is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:e.option.logo&&e.option.logo.hash?t.server+"attachments.img/xs/"+e.option.logo.hash:t.server+"public/images/xs/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content"},[t._v("\n                                 "+t._s(e.option.name)+"  \n                              ")])]):t._e()]}}],null,!1,1932981990),model:{value:t.collectionName,callback:function(e){t.collectionName=e},expression:"collectionName"}}),t._v(" "),s("div",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:t.addToCollection}},[s("b-icon",{attrs:{icon:"plus",size:"is-small"}}),t._v("Add")],1),t._v(" "),s("button",{staticClass:"button is-clear margin-left-5-px",on:{click:function(e){t.isAddPostToCollectionModalActive=!1}}},[t._v("Cancel")])])],1)]),t._v(" "),t.liked?s("button",{staticClass:"button is-white has-text-danger margin-left--5-px-imp",on:{click:function(e){null!=t.$store.state.user?t.unlike():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-marked",size:"is-small"}}),t._v(" "),s("span",[t._v("Liked")])],1):s("button",{staticClass:"button is-white has-text-grey-dark margin-left--5-px-imp",on:{click:function(e){null!=t.$store.state.user?t.like():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"radiobox-blank",size:"is-small"}}),t._v(" "),s("span",[t._v("Like")])],1),t._v(" "),s("button",{staticClass:"button is-white has-text-grey-dark no-action"},[s("b-icon",{attrs:{icon:"heart",size:"is-small"}}),t._v(" "),s("span",[t._v(t._s(t.nlikes))])],1),t._v(" "),"shop"==t.post.theme&&t.post.themedata&&t.post.themedata.stars?s("button",{staticClass:"button is-white has-text-grey-dark",on:{click:function(e){t.isReviewModalActive=!0}}},[t.post.themedata.stars.rating?s("span",[t._v(t._s(t.post.themedata.stars.rating))]):t._e(),t._v(" "),s("b-icon",{staticClass:"margin-top--2-px",attrs:{icon:"star has-text-warning"}})],1):t._e()],1)],1),t._v(" "),s("div",{staticClass:"padding-15-px has-background-white-bis border-top-1-px-eee"},[t.ncomments?s("b",{staticClass:"is-size-7 has-text-grey-light"},[t._v("Comments ("+t._s(t.ncomments)+")")]):t._e(),t._v(" "),s("no-ssr",[t.$store.state.user?s("b-dropdown",{ref:"dropup",staticClass:"is-up is-right is-pulled-right dropdown-no-headers margin-bottom-5-px"},[s("button",{staticClass:"button is-text is-small",attrs:{slot:"trigger"},slot:"trigger"},[t.selectedCommenter&&t.selectedCommenter.hash?s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.selectedCommenter.logo&&t.selectedCommenter.logo.hash?t.server+"attachments.img/xs/"+t.selectedCommenter.logo.hash:t.server+"public/images/md/empty_cl.png"}})]):s("div",{staticClass:"is-pulled-left"},[s("figure",{staticClass:"image is-16x16 is-pulled-left"},[s("img",{staticClass:"is-rounded",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("span",{staticClass:"margin-left-5-px"},[t._v("@"+t._s(t.$store.state.user.username))])]),t._v(" "),s("b-icon",{attrs:{icon:"menu-up-outline",size:"is-small"}})],1),t._v(" "),s("b-dropdown-item",{attrs:{custom:"",paddingless:""}},[s("div",[s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("\n                              Comment as:\n                           ")])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp",on:{click:t.selectUserAsCommenter}},[s("div",{staticClass:"has-background-white-bis border-bottom-1-px-f8f8f8 padding-10-px pointer"},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&!t.selectedCommenter.hash?"sender-selected":"",attrs:{src:t.$store.state.user&&t.$store.state.user.image&&t.$store.state.user.image.hash?t.server+"attachments.img/xs/"+t.$store.state.user.image.hash:t.server+"public/images/md/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&!t.selectedCommenter.hash?"has-text-weight-bold":""},[t._v("\n                                       @"+t._s(t.$store.state.user.username)+"\n                                    ")])])])]),t._v(" "),s("div",{staticClass:"dropdown-inner-content max-height-200-px-imp"},[t._l(t.ownCollections,(function(e,a){return s("div",{key:a,staticClass:"border-bottom-1-px-f8f8f8 padding-10-px pointer",on:{click:function(s){return t.selectCommenter(e)}}},[s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left image is-24x24"},[s("img",{staticClass:"is-rounded",class:t.selectedCommenter&&e.logo&&t.selectedCommenter.logo&&t.selectedCommenter.logo.hash==e.logo.hash?"sender-selected":"",attrs:{src:e.logo&&e.logo.hash?t.server+"attachments.img/xs/"+e.logo.hash:t.server+"public/images/md/empty_cl.png"}})]),t._v(" "),s("div",{staticClass:"media-content",class:t.selectedCommenter&&t.selectedCommenter.hash==e.hash?"has-text-weight-bold":""},[t._v("\n                                       "+t._s(e.name)+"\n                                 ")])])])})),t._v(" "),1==t.hasmoreOwnCollections?s("div",{staticClass:"has-text-centered padding-10-px margin-top-10-px margin-bottom-10-px"},[s("a",{staticClass:"button is-rounded is-small",class:t.loadingMoreOwnCollection?"is-loading":"",on:{click:t.loadMoreOwnCollections}},[t._v("load more")])]):t._e()],2)])])],1):t._e(),t._v(" "),t.$store.state.user?s("span",{staticClass:"is-pulled-right margin-top-5-px is-size-7 has-text-grey-light"},[t._v("comment as:")]):t._e(),t._v(" "),s("div",{staticClass:"margin-top-5-px"},[s("textarea-autosize",{ref:"comment",staticClass:"textarea box-shadow-none",attrs:{rows:"2",placeholder:"Write a comment ...",maxlength:"1000"},model:{value:t.commentContent,callback:function(e){t.commentContent="string"==typeof e?e.trim():e},expression:"commentContent"}}),t._v(" "),t.commentContent.length>0?s("div",{staticClass:"margin-top-10-px has-text-right"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.$store.state.user?t.submitComment():t.loginMessage()}}},[t._v("Submit")]),t._v("\n                  ")]):t._e()],1),t._v(" "),t.post.comments?s("div",{staticClass:"margin-top-20-px"},t._l(t.comments,(function(e){return s("div",{key:e.hash},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1)})),0):t._e(),t._v(" "),t.post.comments&&1==t.post.comments.hasmore?s("center",{staticClass:"margin-top-20-px"},[s("button",{staticClass:"button is-clear is-small is-rounded",on:{click:t.loadMore}},[t._v("load more")])]):t._e()],1)],1)]):t._e(),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card",attrs:{active:t.isReviewModalActive,width:500,scroll:"keep"},on:{"update:active":function(e){t.isReviewModalActive=e}}},[t.post&&t.post.reviews&&t.post.reviews.list&&t.post.reviews.list.length>0?s("section",{staticClass:"width-auto"},[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),t._l(t.reviews,(function(e,a){return s("div",{key:a,staticClass:"margin-top-20-px"},[s("div",{staticClass:"padding-10-px"},[null!=t.$store.state.user&&e.author.username==t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.removeReview(e.hash)}}},[s("b-icon",{attrs:{icon:"delete"}})],1):t._e(),t._v(" "),null!=t.$store.state.user&&e.author.username!=t.$store.state.user.username?s("span",{staticClass:"pointer is-pulled-right margin-left-10-px has-text-grey-light",on:{click:function(s){return t.openProductReviewFlagModal(e.hash)}}},[s("b-icon",{attrs:{icon:"flag"}})],1):t._e(),t._v(" "),s("no-ssr",[s("star-rating",{attrs:{"star-size":24,"show-rating":!1,"active-color":"#4da6ff",padding:-2,"read-only":!0,rating:e.stars}})],1),t._v(" "),s("p",{staticClass:"is-size-5 is-size-6-mobile has-text-weight-bold margin-top-10-px"},[t._v("\n                     "+t._s(e.content)+"\n                  ")]),t._v(" "),s("div",{staticClass:"margin-top-10-px is-size-7 is-italic"},[s("span",{staticClass:"is-pulled-left margin-right-5-px"},[t._v("By:")]),t._v(" "),s("nuxt-link",{attrs:{to:{name:"user",params:{username:e.author.username}}}},[s("b",[t._v(t._s(e.author.name))])])],1)],1)])})),t._v(" "),1==t.hasmoreReviews?s("center",{staticClass:"margin-top-20-px margin-bottom-20-px"},[s("button",{staticClass:"button is-clear",class:t.loadingMoreReviews?"is-loading":"",on:{click:t.loadMoreReviews}},[t._v("load more")])]):t._e()],2):s("section",[s("p",[s("b",{staticClass:"has-text-grey"},[t._v("Reviews")]),t._v(" "),s("b-icon",{attrs:{icon:"chevron-down",size:"is-small"}})],1),t._v(" "),s("p",{staticClass:"has-text-grey margin-top-20-px"},[t._v("No Reviews Yet")])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagProductReviewModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagProductReviewModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                     Flagging Product Review\n                  ")]),t._v("\n                  You are about to flag a product review. Please select a category.\n               ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v("Review is explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Review promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagProductReview}},[t._v("Done")])])])],1):t._e()}),[],!1,null,"2085678c",null);e.a=E.exports},292:function(t,e,s){"use strict";s(97);var a=s(96),o=s(95),n=s.n(o);function i(){var t=Object(a.a)(["\n            mutation addReply($commenthash: String!, $content: String!, $aliashash: String) {\n              addReply(commenthash: $commenthash, content: $content, aliashash : $aliashash) {\n                nupvotes\n                timestamp\n                nreplies\n                hash\n                content\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          "]);return i=function(){return t},t}function r(){var t=Object(a.a)(["\n            mutation removeUpvote($hash: String!) {\n              removeUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return r=function(){return t},t}function c(){var t=Object(a.a)(["\n            mutation addUpvote($hash: String!) {\n              addUpvote(hash: $hash) {\n                success\n              }\n            }\n          "]);return c=function(){return t},t}function l(){var t=Object(a.a)(["\n              mutation flag(\n                $hash: String!\n                $type: FlagType!\n                $documenttype: FlagDocumentType!\n              ) {\n                flag(hash: $hash, type: $type, documenttype: $documenttype) {\n                  success\n                }\n              }\n            "]);return l=function(){return t},t}function m(){var t=Object(a.a)(["\n            mutation removeComment($hash: String!) {\n              removeComment(hash: $hash) {\n                success\n              }\n            }\n          "]);return m=function(){return t},t}function p(){var t=Object(a.a)(["\n        query comment($hash: String!, $page: Int, $offset : Int) {\n          comment(hash: $hash) {\n            replies(page: $page, offset : $offset) {\n              hasmore\n              list {\n                timestamp\n                nupvotes\n                nreplies\n                hash\n                content\n                upvoted\n                permissions\n                author {\n                  username\n                  name\n                  hash\n                  image {\n                      hash\n                  }\n                }\n              }\n            }\n          }\n        }\n      "]);return p=function(){return t},t}var h={apollo:{commentR:{query:n()(p()),prefetch:!1,variables:function(){return{hash:this.comment.hash,page:1,offset:0}},skip:function(){return this.skipQuery},update:function(t){return t.comment&&t.comment.replies&&t.comment.replies.list&&t.comment.replies.list.length>0&&(this.replies=t.comment.replies.list),t.comment.replies}}},data:function(){return{server:"https://api.naya.com.np/",currentUser:null,upvoted:this.comment.upvoted,nupvotes:this.comment.nupvotes,replyActive:!1,replyingActive:!1,replyFirstFetch:!1,replyContent:"",replies:[],nreplies:this.comment.nreplies,offset:0,skipQuery:!0,pageNumber:1,isFlagCommentModalActive:!1,flagType:null,deleted:!1,disable:!1}},props:{comment:{type:Object,required:!0},selectedCommenter:{type:Object}},name:"app-comment",methods:{decreaseNcomments:function(){this.nreplies--,this.offset--},loadMore:function(){this.pageNumber++,this.$apollo.queries.commentR.fetchMore({variables:{hash:this.comment.hash,page:this.pageNumber,offset:this.offset},updateQuery:function(t,e){var s=e.fetchMoreResult,a=s.comment.replies.list,o=s.comment.replies.hasmore;return s?{comment:{__typename:t.comment.__typename,replies:{__typename:t.comment.replies.__typename,list:t.comment.replies.list.concat(a),hasmore:o}}}:t}})},openRemoveCommentDialogBox:function(){var t=this;this.$dialog.confirm({title:"Remove Comment",message:"Are you sure you want to <b>delete</b> this comment?",cancelText:"Cancel",confirmText:"Yes",type:"is-danger",hasIcon:!0,onConfirm:function(e){return t.removeComment()}})},removeComment:function(){var t=this;this.$apollo.mutate({mutation:n()(m()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeComment.success&&(t.deleted=!0,t.$emit("decreaseNcomments"))})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},flagComment:function(){var t=this;this.flagType?this.$apollo.mutate({mutation:n()(l()),variables:{hash:this.comment.hash,type:this.flagType,documenttype:"comment"}}).then((function(e){e.data.flag.success&&t.$toast.open({message:"Comment has been successfully flagged!!",type:"is-success"}),t.isFlagCommentModalActive=!1,t.flagType=null})).catch((function(e){"GraphQL error: error flagging document"==e.message?t.$toast.open({message:"You have already flagged this Comment",type:"is-danger"}):t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"}),t.isFlagCommentModalActive=!1})):this.$toast.open({message:"Select the flag type",type:"is-danger"})},upvoteComment:function(){var t=this;this.$apollo.mutate({mutation:n()(c()),variables:{hash:this.comment.hash}}).then((function(e){e.data.addUpvote.success&&(t.upvoted=!0,t.nupvotes++)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},downvoteComment:function(){var t=this;this.$apollo.mutate({mutation:n()(r()),variables:{hash:this.comment.hash}}).then((function(e){e.data.removeUpvote.success&&(t.upvoted=!1,t.nupvotes--)})).catch((function(e){e&&t.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},submitReply:function(t){var e=this;this.disable=!0;var s,a=((s=this.replyContent)||(s=""),s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));this.$apollo.mutate({mutation:n()(i()),variables:{commenthash:t,content:a,aliashash:this.selectedCommenter.hash}}).then((function(t){t.data.addReply&&(e.replyContent="",e.replyActive=!0,e.nreplies++,e.offset++,e.replies=[t.data.addReply].concat(e.replies),e.disable=!1)})).catch((function(t){e.disable=!1,"GraphQL error: you are banned from using this feature until Invalid Date"==t.message?e.$toast.open({message:"Banned from using this feature",type:"is-danger",position:"is-bottom"}):e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))},replyToggle:function(t){var e=this;if("onlyreplies"==t){this.$apollo.queries.commentR.skip=!1,this.replyActive=!this.replyActive,this.replyActive||(this.replyingActive=!1);var s=document.getElementsByClassName("reply-text-box");for(a=0;a<s.length;a++)s[a].id==="reply-"+this.comment.hash?s[a].className=s[a].className.replace(/is-hidden/g,"").trim():(s[a].className=s[a].className.replace(/is-hidden/g,"").trim(),s[a].className?s[a].className+=" is-hidden":s[a].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}else{this.$apollo.queries.commentR.skip=!1,this.replyActive=!0,this.replyingActive=!0;var a;s=document.getElementsByClassName("reply-text-box");for(a=0;a<s.length;a++)s[a].id==="reply-"+this.comment.hash?s[a].className=s[a].className.replace(/is-hidden/g,"").trim():(s[a].className=s[a].className.replace(/is-hidden/g,"").trim(),s[a].className?s[a].className+=" is-hidden":s[a].className=" is-hidden");this.replyFirstFetch||this.$apollo.queries.commentR.refetch().then((function(t){e.replyFirstFetch=!0})).catch((function(t){t&&e.$toast.open({message:"Some error occured",type:"is-danger",position:"is-bottom"})}))}},gotoUser:function(){this.comment.author.hash?this.$router.push({name:"singleCollection",params:{hash:this.comment.author.hash}}):this.$router.push({name:"user",params:{username:this.comment.author.username}})},refreshQuery:function(){this.replyToggle(),this.$emit("refreshQuery")},loginMessage:function(){this.$toast.open({message:"Login required!",type:"is-danger",position:"is-bottom"})}},mounted:function(){this.$store.state.user&&(this.currentUser=this.$store.state.user.username)},components:{"app-comment":v}},u=s(22),d=Object(u.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.deleted?t._e():s("div",[t.comment.author?s("div",[s("div",{staticClass:"media margin-bottom-20-px"},[s("div",{staticClass:"media-left"},[s("figure",{staticClass:"image is-24x24"},[s("img",{staticClass:"is-rounded",attrs:{src:t.comment.author&&t.comment.author.image?t.server+"attachments.img/sm/"+t.comment.author.image.hash:t.server+"public/images/sm/empty_pp.png"}})]),t._v(" "),s("div",{staticClass:"pointer has-text-centered is-size-7 margin-top-5-px"},[t.upvoted?t._e():s("span",{on:{click:function(e){null!=t.currentUser?t.upvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1),t._v(" "),t.upvoted?s("span",{staticClass:"has-text-danger",on:{click:function(e){null!=t.currentUser?t.downvoteComment():t.loginMessage()}}},[s("b-icon",{attrs:{icon:"arrow-up",size:"is-small"}})],1):t._e(),t._v(" "),t.nupvotes?s("p",{staticClass:"margin-top--5-px"},[s("b",[t._v(t._s(t.nupvotes))])]):t._e()])]),t._v(" "),s("div",{staticClass:"media-content"},[t.comment.permissions&&1==t.comment.permissions.write&&null!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:t.openRemoveCommentDialogBox}},[s("b-icon",{attrs:{icon:"delete",size:"is-small"}})],1):t._e(),t._v(" "),t.comment.permissions&&0==t.comment.permissions.write&&t.comment.author.username!=t.currentUser?s("span",{staticClass:"pointer is-pulled-right has-text-grey-light",on:{click:function(e){null!=t.currentUser?t.isFlagCommentModalActive=!0:t.loginMessage()}}},[s("b-icon",{attrs:{icon:"flag",size:"is-small"}})],1):t._e(),t._v(" "),s("div",{staticClass:"display-block"},[s("nuxt-link",{attrs:{to:this.comment.author.hash?{name:"singleCollection",params:{hash:this.comment.author.hash}}:{name:"user",params:{username:this.comment.author.username}}}},[s("strong",{staticClass:"is-size-6-half pointer"},[t._v(t._s(t.comment.author.name))])]),t._v(" "),s("p",{staticClass:"has-text-grey is-size-7 "},[t._v(t._s(t._f("moment")(t.comment.timestamp,"from","now")))])],1),t._v(" "),s("div",{staticClass:"is-size-6-half margin-top-5-px",domProps:{innerHTML:t._s(t.comment.content)}}),t._v(" "),s("div",[s("p",{staticClass:"is-size-7 margin-top-5-px"},[t.nreplies?s("span",{staticClass:"pointer  margin-right-10-px ",on:{click:function(e){return t.replyToggle("onlyreplies")}}},[s("b",[t._v(t._s(t.nreplies))]),s("span",[t._v(" replies")])]):t._e(),t._v(" "),s("span",{staticClass:"pointer has-text-weight-bold",on:{click:function(e){return t.replyToggle("replieswithtextbox")}}},[t._v("reply")])]),t._v(" "),s("div",[t.replyingActive?s("div",{staticClass:"reply-text-box margin-top-10-px",attrs:{id:"reply-"+t.comment.hash}},[s("textarea-autosize",{ref:"comment",staticClass:"textarea box-shadow-none",attrs:{rows:"2",placeholder:"Write a reply ...",maxlength:"1000"},model:{value:t.replyContent,callback:function(e){t.replyContent="string"==typeof e?e.trim():e},expression:"replyContent"}}),t._v(" "),t.replyContent.length>0?s("div",{staticClass:"margin-top-10-px"},[s("button",{staticClass:"button is-clear is-rounded is-small",attrs:{disabled:t.disable},on:{click:function(e){null!=t.currentUser?t.submitReply(t.comment.hash):t.loginMessage()}}},[t._v("Submit")]),t._v("\n                     ")]):t._e()],1):t._e(),t._v(" "),t.replyActive?s("div",[t._l(t.replies,(function(e){return t.replies?s("div",{key:e.hash,staticClass:"margin-top-10-px"},[s("app-comment",{attrs:{comment:e,selectedCommenter:t.selectedCommenter},on:{refreshQuery:function(e){return t.refreshQuery(e)},decreaseNcomments:function(e){return t.decreaseNcomments(e)}}})],1):t._e()})),t._v(" "),t.commentR&&1==t.commentR.hasmore?s("div",{staticClass:"has-text-centered margin-top-20-px"},[s("button",{staticClass:"button is-clear is-small is-rounded",on:{click:t.loadMore}},[t._v("load more")])]):t._e()],2):t._e()])])]),t._v(" "),s("b-modal",{staticClass:"has-custom-modal-card is-flag-modal",attrs:{active:t.isFlagCommentModalActive,width:350,scroll:"keep"},on:{"update:active":function(e){t.isFlagCommentModalActive=e}}},[s("section",{staticClass:"width-auto"},[s("div",{staticClass:"margin-bottom-10-px"},[s("h1",{staticClass:"is-size-4 is-size-5-mobile has-text-weight-bold"},[t._v("\n                     Flagging comment\n                  ")]),t._v("\n                  You are about to flag a comment. Please select a category.\n               ")]),t._v(" "),s("div",{staticClass:"line-height-32-px margin-bottom-20-px"},[s("b-radio",{attrs:{"native-value":"spam"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment is a spam")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"harrasment"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment used for harrassment")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"hateful"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains hateful content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"sexuallyexplicit"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Sexually explicit")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"graphicalviolence"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment contains violent content")])]),s("br"),t._v(" "),s("b-radio",{attrs:{"native-value":"promotescrime"},model:{value:t.flagType,callback:function(e){t.flagType=e},expression:"flagType"}},[s("span",[t._v(" Comment promotes crime or violence")])])],1),t._v(" "),s("button",{staticClass:"button is-clear margin-bottom-20-px",on:{click:t.flagComment}},[t._v("Done")])])])],1)]):t._e()])}),[],!1,null,null,null),v=e.a=d.exports},306:function(t,e,s){},348:function(t,e,s){"use strict";var a=s(306);s.n(a).a}}]);